import{r as y,z as v,e as V,c as x,o as $,w as l,i as d,l as o,A as q,u as s,p as n,K as c}from"./app-9G_tloqE.js";import{_ as z}from"./AppLayout-CdATmoCK.js";import{_ as U}from"./OrganisationLayout.vue_vue_type_script_setup_true_lang-Bz4u9hY6.js";import{_}from"./index-CjbdDEUZ.js";import{_ as u}from"./Input.vue_vue_type_script_setup_true_lang-Dcxzoals.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-7jpsuXpI.js";import{_ as w}from"./Textarea.vue_vue_type_script_setup_true_lang-BVGJBUn6.js";import{_ as k}from"./AddressInput-B9ouh0RD.js";import{_ as m}from"./InputError.vue_vue_type_script_setup_true_lang-BDpB9hsT.js";import{_ as D}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-2_botdNv.js";import"./FlashMessage-Cfbe6Ptg.js";import"./x-65HsNZ-8.js";import"./createLucideIcon-0bZCvOlr.js";import"./loader-circle-J6IWV-_i.js";import"./Heading.vue_vue_type_script_setup_true_lang-DVss0P7H.js";import"./Separator.vue_vue_type_script_setup_true_lang-DpJgJ0md.js";import"./Separator-YAaE9XQw.js";import"./debounce-DKVy94zs.js";import"./map-pin-Ar1iEcF9.js";const E={class:"space-y-6"},M={class:"max-w-2xl"},N={class:"space-y-4"},j={class:"grid gap-2"},A={class:"grid gap-2"},B={class:"space-y-4"},C={class:"space-y-4"},S={class:"grid gap-2"},P={class:"grid gap-4 p-4 bg-muted/50 rounded-lg border"},R={class:"grid gap-2"},F={class:"grid grid-cols-2 gap-4"},G={class:"grid gap-2"},I={class:"grid gap-2"},J={class:"flex justify-end gap-4 pt-4 border-t"},ae={__name:"Edit",props:{depot:{type:Object,required:!0}},setup(g){const a=g,f=y(null),t=v({name:a.depot.name,description:a.depot.description,address:a.depot.address,city:a.depot.city,latitude:a.depot.latitude,longitude:a.depot.longitude,postal_code:a.depot.postal_code,country:a.depot.country||"FR"});V(f,i=>{if(!i){t.address="",t.city="",t.postal_code="",t.latitude="",t.longitude="";return}if(i){const e=[];i.housenumber&&e.push(i.housenumber),i.street&&e.push(i.street),t.address=e.join(" ")||i.name,t.city=i.city,t.postal_code=i.postcode,t.latitude=i.lat,t.longitude=i.lng}});const b=()=>{t.put(route("app.organizations.depots.update",a.depot.id),{onSuccess:()=>{c.visit(route("app.organizations.depots.index"))}})};return(i,e)=>($(),x(z,null,{default:l(()=>[d(U,null,{default:l(()=>[o("section",E,[d(D,{title:"Modifier le dépôt",description:"Modifiez les informations de ce lieu de stockage."}),o("div",M,[o("form",{onSubmit:q(b,["prevent"]),class:"space-y-8"},[o("div",N,[e[11]||(e[11]=o("div",{class:"flex items-center gap-2 pb-2 border-b"},[o("span",{class:"text-lg font-semibold"},"Informations générales")],-1)),o("div",j,[d(s(p),{for:"name"},{default:l(()=>e[7]||(e[7]=[n("Nom du dépôt")])),_:1,__:[7]}),e[8]||(e[8]=o("p",{class:"text-sm text-muted-foreground"}," Évitez d'inclure des informations précises de localisation dans le nom car il sera affiché publiquement avec la ville. ",-1)),d(s(u),{id:"name",modelValue:s(t).name,"onUpdate:modelValue":e[0]||(e[0]=r=>s(t).name=r),placeholder:"Ex: Dépôt principal, Entrepôt sud...",required:""},null,8,["modelValue"]),d(m,{message:s(t).errors.name},null,8,["message"])]),o("div",A,[d(s(p),{for:"description"},{default:l(()=>e[9]||(e[9]=[n("Description")])),_:1,__:[9]}),e[10]||(e[10]=o("p",{class:"text-sm text-muted-foreground"}," Décrivez brièvement ce dépôt et ses caractéristiques principales. ",-1)),d(s(w),{id:"description",modelValue:s(t).description,"onUpdate:modelValue":e[1]||(e[1]=r=>s(t).description=r),placeholder:"Ex: Grand entrepôt avec accès poids lourds...",rows:"3"},null,8,["modelValue"]),d(m,{message:s(t).errors.description},null,8,["message"])])]),o("div",B,[e[17]||(e[17]=o("div",{class:"flex items-center gap-2 pb-2 border-b"},[o("span",{class:"text-lg font-semibold"},"Localisation")],-1)),o("div",C,[o("div",S,[d(s(p),{for:"location"},{default:l(()=>e[12]||(e[12]=[n("Modifier l'adresse")])),_:1,__:[12]}),e[13]||(e[13]=o("p",{class:"text-sm text-muted-foreground"}," Une adresse précise nous permet de géolocaliser votre dépôt et d'améliorer les résultats de recherche d'équipements en fonction de la distance. Pour des raisons de sécurité, seule la ville sera visible publiquement sur le site. ",-1)),d(k,{id:"location",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=r=>f.value=r),placeholder:"Rechercher une adresse",required:""},null,8,["modelValue"]),d(m,{message:s(t).errors.address},null,8,["message"])]),o("div",P,[o("div",R,[d(s(p),{for:"address"},{default:l(()=>e[14]||(e[14]=[n("Adresse complète")])),_:1,__:[14]}),d(s(u),{id:"address",modelValue:s(t).address,"onUpdate:modelValue":e[3]||(e[3]=r=>s(t).address=r),readonly:"",disabled:""},null,8,["modelValue"])]),o("div",F,[o("div",G,[d(s(p),{for:"city"},{default:l(()=>e[15]||(e[15]=[n("Ville")])),_:1,__:[15]}),d(s(u),{id:"city",modelValue:s(t).city,"onUpdate:modelValue":e[4]||(e[4]=r=>s(t).city=r),readonly:"",disabled:""},null,8,["modelValue"])]),o("div",I,[d(s(p),{for:"postal_code"},{default:l(()=>e[16]||(e[16]=[n("Code postal")])),_:1,__:[16]}),d(s(u),{id:"postal_code",modelValue:s(t).postal_code,"onUpdate:modelValue":e[5]||(e[5]=r=>s(t).postal_code=r),readonly:"",disabled:""},null,8,["modelValue"])])])]),d(m,{message:s(t).errors.latitude},null,8,["message"]),d(m,{message:s(t).errors.longitude},null,8,["message"])])]),o("div",J,[d(s(_),{type:"button",variant:"outline",onClick:e[6]||(e[6]=r=>s(c).visit(i.route("app.organizations.depots.index")))},{default:l(()=>e[18]||(e[18]=[n(" Annuler ")])),_:1,__:[18]}),d(s(_),{type:"submit",disabled:s(t).processing},{default:l(()=>e[19]||(e[19]=[n(" Sauvegarder ")])),_:1,__:[19]},8,["disabled"])])],32)])])]),_:1})]),_:1}))}};export{ae as default};
