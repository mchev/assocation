import{A as R,k as u,o as d,i as s,l as n,w as i,u as e,p as a,B as A,F as p,v as c,s as g,c as y,f as B}from"./app-CAMIXTHv.js";import{_ as v}from"./index-BLpophj8.js";import{_ as N}from"./Input.vue_vue_type_script_setup_true_lang-BMJZ9mKg.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-BtarQPDs.js";import{a as w,b as x,c as $,d as q,e as k,_ as P}from"./TableHeader.vue_vue_type_script_setup_true_lang-jBd95kBU.js";import{_ as C}from"./InputError.vue_vue_type_script_setup_true_lang-B0gTQV4E.js";import{_ as D}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-DALMz1Vm.js";import{a as E,_ as F}from"./DialogContent.vue_vue_type_script_setup_true_lang-Dor-Fqm_.js";import{_ as M,a as U}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CDmbhxq1.js";import{_ as j,a as G}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CQEkHxy2.js";import{_ as L}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-B_QqBGzp.js";import{_ as b}from"./Checkbox.vue_vue_type_script_setup_true_lang-B2iMwx6E.js";import"./x-j77fX13R.js";import"./createLucideIcon-DVpwict0.js";import"./nullish-CHIgUVhi.js";import"./isValueEqualOrExist-B5JO9E3o.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./check-BfN8yJ4G.js";import"./RovingFocusGroup-Cd_IXq9k.js";import"./VisuallyHiddenInput-D5PiiTgo.js";import"./VisuallyHidden-b-u6nYl7.js";const T={class:"space-y-6"},H={class:"space-y-4"},I={class:"grid gap-4 py-4"},J={class:"grid gap-2"},K={class:"grid gap-2"},O={class:"grid gap-2"},Q={class:"rounded-md border dark:border-gray-800"},W={class:"font-medium"},X={class:"grid gap-2"},ke={__name:"RolesManagement",props:{roles:{type:Array,required:!0},permissions:{type:Array,required:!0}},setup(f){const o=R({name:"",permissions:[]}),S=()=>{o.post(route("organizations.roles.store"),{preserveScroll:!0,onSuccess:()=>{o.reset()}})},V=m=>{confirm("Êtes-vous sûr de vouloir supprimer ce rôle ?")&&router.delete(route("organizations.roles.destroy",m.id),{preserveScroll:!0})},z=(m,r)=>{router.post(route("organizations.roles.toggle-permission",{role:m.id}),{permission:r.id},{preserveScroll:!0})};return(m,r)=>(d(),u("section",T,[s(D,{title:"Rôles et permissions",description:"Gérez les rôles et les permissions de votre organisation."}),n("div",H,[s(e(F),null,{default:i(()=>[s(e(L),{asChild:""},{default:i(()=>[s(e(v),null,{default:i(()=>r[2]||(r[2]=[a("Créer un nouveau rôle")])),_:1,__:[2]})]),_:1}),s(e(E),null,{default:i(()=>[n("form",{onSubmit:A(S,["prevent"])},[s(e(j),null,{default:i(()=>[s(e(G),null,{default:i(()=>r[3]||(r[3]=[a("Créer un nouveau rôle")])),_:1,__:[3]}),s(e(M),null,{default:i(()=>r[4]||(r[4]=[a(" Définissez un nouveau rôle avec ses permissions associées. ")])),_:1,__:[4]})]),_:1}),n("div",I,[n("div",J,[s(e(_),{for:"name"},{default:i(()=>r[5]||(r[5]=[a("Nom du rôle")])),_:1,__:[5]}),s(e(N),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":r[0]||(r[0]=t=>e(o).name=t),placeholder:"Ex: Administrateur",required:""},null,8,["modelValue"]),s(C,{message:e(o).errors.name},null,8,["message"])]),n("div",K,[s(e(_),null,{default:i(()=>r[6]||(r[6]=[a("Permissions")])),_:1,__:[6]}),n("div",O,[(d(!0),u(p,null,c(f.permissions,t=>(d(),u("div",{key:t.id,class:"flex items-center space-x-2"},[s(e(b),{id:"permission-"+t.id,checked:e(o).permissions,"onUpdate:checked":r[1]||(r[1]=l=>e(o).permissions=l),value:t.id},null,8,["id","checked","value"]),s(e(_),{for:"permission-"+t.id},{default:i(()=>[a(g(t.name),1)]),_:2},1032,["for"])]))),128))]),s(C,{message:e(o).errors.permissions},null,8,["message"])])]),s(e(U),null,{default:i(()=>[s(e(v),{type:"submit",disabled:e(o).processing},{default:i(()=>r[7]||(r[7]=[a(" Créer le rôle ")])),_:1,__:[7]},8,["disabled"])]),_:1})],32)]),_:1})]),_:1}),n("div",Q,[s(e(P),null,{default:i(()=>[s(e(w),null,{default:i(()=>[s(e(x),null,{default:i(()=>[s(e($),null,{default:i(()=>r[8]||(r[8]=[a("Rôle")])),_:1,__:[8]}),s(e($),null,{default:i(()=>r[9]||(r[9]=[a("Permissions")])),_:1,__:[9]}),s(e($),{class:"w-[100px]"},{default:i(()=>r[10]||(r[10]=[a("Actions")])),_:1,__:[10]})]),_:1})]),_:1}),s(e(q),null,{default:i(()=>[(d(!0),u(p,null,c(f.roles,t=>(d(),y(e(x),{key:t.id},{default:i(()=>[s(e(k),null,{default:i(()=>[n("div",W,g(t.name),1)]),_:2},1024),s(e(k),null,{default:i(()=>[n("div",X,[(d(!0),u(p,null,c(f.permissions,l=>(d(),u("div",{key:l.id,class:"flex items-center space-x-2"},[s(e(b),{id:"role-"+t.id+"-permission-"+l.id,checked:t.permissions.includes(l.id),onChange:Y=>z(t,l)},null,8,["id","checked","onChange"]),s(e(_),{for:"role-"+t.id+"-permission-"+l.id},{default:i(()=>[a(g(l.name),1)]),_:2},1032,["for"])]))),128))])]),_:2},1024),s(e(k),null,{default:i(()=>[t.name!=="admin"?(d(),y(e(v),{key:0,variant:"destructive",size:"sm",onClick:l=>V(t)},{default:i(()=>r[11]||(r[11]=[a(" Supprimer ")])),_:2,__:[11]},1032,["onClick"])):B("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]))}};export{ke as default};
