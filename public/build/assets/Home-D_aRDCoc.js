import{l as L,u as e,h as P,q as pt,i as E,s as ve,H as re,c as q,o as p,w as m,j as M,g as R,b as d,I as Z,e as J,z as G,bP as vt,m as ue,p as Ee,bS as ht,E as Ie,f as C,a as n,d as z,t as I,S as Ne,F as W,r as Q,n as X,D as gt,T as yt,v as He,N as Ge,M as fe,a5 as xt,x as _t}from"./app-D_SQFuQG.js";import{_ as bt}from"./AppLayout-B0wcaTw-.js";import{_ as kt,a as wt}from"./CardContent.vue_vue_type_script_setup_true_lang-C8EfAOqZ.js";import{P as Y,_ as H,c as ee}from"./index-31cyMxtM.js";import{c as de,b as he,j as $t,X as te,u as We,d as Qe}from"./useForwardPropsEmits-Cea3RVZx.js";import{A as Ct}from"./arrow-right-DNHi_ENf.js";import{S as St}from"./sparkles-XXmPZ9Gd.js";import{S as Vt}from"./shield-check-D2ncojNm.js";import{c as ce}from"./createLucideIcon-C2XjWVHS.js";import{U as Et}from"./users-CgBjlamN.js";import{a as It,b as jt,c as qt,d as ae,_ as zt}from"./SelectValue.vue_vue_type_script_setup_true_lang-DVHtEdij.js";import{_ as ne}from"./Label.vue_vue_type_script_setup_true_lang-CbCc56Ee.js";import{l as je,p as Tt,x as Xe,u as Ft,t as Ot,e as Bt,f as Lt,g as Rt}from"./UserDropdown-DQALunjU.js";import{f as qe,h as Pt,I as Mt}from"./FlashMessage-B_IoneG0.js";import{_ as ze,a as Te,b as Fe}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-B5eVlaY_.js";import{d as Kt}from"./debounce-NioKrRQJ.js";import{M as Ke}from"./map-pin-HWbuXmeG.js";import{b as Je,k as ke,h as At,u as Dt,r as se,v as Ut}from"./useForwardExpose-Be-7QJzM.js";import{i as $e}from"./ohash.D__AXeF1-DHF4M4F_.js";import{u as Nt}from"./useFormControl-ZfhfCE3C.js";import{_ as Ht}from"./VisuallyHiddenInput-XTP4VEY1.js";import{u as Gt}from"./useKbd-kRIii9yh.js";import{_ as Ye}from"./index-C34TZIZf.js";import{C as Ce}from"./check-DatJc-4c.js";import{C as Wt}from"./circle-help-BCWuxwCw.js";import{_ as Qt}from"./Pagination-NSR-ZBx-.js";import{I as Xt}from"./image-6iIWgjuN.js";import{_ as Jt,a as Yt}from"./index-BjR46NCh.js";import"./chevron-down-Ck_3lejD.js";import"./clamp-DJygDXEo.js";import"./nullish-CHIgUVhi.js";import"./package-H9V068Yy.js";import"./loader-circle-B2ZUSrjm.js";import"./Input.vue_vue_type_script_setup_true_lang-C1geyE2N.js";import"./plus-Cb9A6U81.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=ce("ChevronsUpDownIcon",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=ce("LayoutListIcon",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ce("PackageSearchIcon",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ce("SearchXIcon",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=ce("TagIcon",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);function os(t){const l=L(()=>e(t)),o=L(()=>new Intl.Collator("en",{usage:"search",...l.value}));return{startsWith:(a,s)=>s.length===0?!0:(a=a.normalize("NFC"),s=s.normalize("NFC"),o.value.compare(a.slice(0,s.length),s)===0),endsWith:(a,s)=>s.length===0?!0:(a=a.normalize("NFC"),s=s.normalize("NFC"),o.value.compare(a.slice(-s.length),s)===0),contains:(a,s)=>{if(s.length===0)return!0;a=a.normalize("NFC"),s=s.normalize("NFC");let u=0;const h=s.length;for(;u+h<=a.length;u++){const b=a.slice(u,u+h);if(o.value.compare(s,b)===0)return!0}return!1}}}function as(t,l,o){return t===void 0?!1:Array.isArray(t)?t.some(i=>ie(i,l,o)):ie(t,l,o)}function ie(t,l,o){return t===void 0||l===void 0?!1:typeof t=="string"?t===l:typeof o=="function"?o(t,l):typeof o=="string"?(t==null?void 0:t[o])===(l==null?void 0:l[o]):$e(t,l)}function ns(t,l,o){const i=t.findIndex(s=>$e(s,l)),c=t.findIndex(s=>$e(s,o));if(i===-1||c===-1)return[];const[r,a]=[i,c].sort((s,u)=>s-u);return t.slice(r,a+1)}const[Oe,ls]=de("ListboxRoot"),rs=P({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(t,{expose:l,emit:o}){const i=t,c=o,{multiple:r,highlightOnHover:a,orientation:s,disabled:u,selectionBehavior:h,dir:b}=pt(i),{getItems:k}=je({isProvider:!0}),{handleTypeaheadSearch:f}=Tt(),{primitiveElement:_,currentElement:y}=Xe(),S=Gt(),x=Ft(b),w=Nt(y),v=E(),j=E(!1),K=E(!0),F=Je(i,"modelValue",c,{defaultValue:i.defaultValue??(r.value?[]:void 0),passive:i.modelValue===void 0,deep:!0});function O(g){if(j.value=!0,i.multiple){const $=Array.isArray(F.value)?[...F.value]:[],V=$.findIndex(B=>ie(B,g,i.by));i.selectionBehavior==="toggle"?(V===-1?$.push(g):$.splice(V,1),F.value=$):(F.value=[g],v.value=g)}else i.selectionBehavior==="toggle"&&ie(F.value,g,i.by)?F.value=void 0:F.value=g;setTimeout(()=>{j.value=!1},1)}const T=E(null),A=E(null),D=E(!1),ye=E(!1),Be=ke(),xe=ke(),Le=ke();function _e(){return k().map(g=>g.ref).filter(g=>g.dataset.disabled!=="")}function U(g,$=!0){if(!g)return;T.value=g,K.value&&T.value.focus(),$&&T.value.scrollIntoView({block:"nearest"});const V=k().find(B=>B.ref===g);c("highlight",V)}function lt(g){if(D.value)Le.trigger(g);else{const $=k().find(V=>ie(V.value,g,i.by));$&&(T.value=$.ref,U($.ref))}}function rt(g){T.value&&T.value.isConnected&&(g.preventDefault(),g.stopPropagation(),ye.value||T.value.click())}function it(g){if(K.value){if(j.value=!0,D.value)xe.trigger(g);else{const $=g.altKey||g.ctrlKey||g.metaKey;if($&&g.key==="a"&&r.value){const V=k(),B=V.map(N=>N.value);F.value=[...B],g.preventDefault(),U(V[V.length-1].ref)}else if(!$){const V=f(g.key,k());V&&U(V)}}setTimeout(()=>{j.value=!1},1)}}function ut(){ye.value=!0}function dt(){requestAnimationFrame(()=>{ye.value=!1})}function Re(){re(()=>{const g=new KeyboardEvent("keydown",{key:"PageUp"});Pe(g)})}function be(g){const $=T.value;$!=null&&$.isConnected&&(A.value=$),T.value=null,c("leave",g)}function ct(g){var V,B;const $=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((V=g.currentTarget)==null||V.dispatchEvent($),c("entryFocus",$),!$.defaultPrevented)if(A.value)U(A.value);else{const N=(B=_e())==null?void 0:B[0];U(N)}}function Pe(g){const $=Ot(g,s.value,x.value);if(!$)return;let V=_e();if(T.value){if($==="last")V.reverse();else if($==="prev"||$==="next"){$==="prev"&&V.reverse();const B=V.indexOf(T.value);V=V.slice(B+1)}mt(g,V[0])}if(V.length){const B=!T.value&&$==="prev"?V.length-1:0;U(V[B])}if(D.value)return xe.trigger(g)}function mt(g,$){var B;if(!(D.value||i.selectionBehavior!=="replace"||!r.value||!Array.isArray(F.value)||(g.altKey||g.ctrlKey||g.metaKey)&&!g.shiftKey)&&g.shiftKey){const N=k().filter(oe=>oe.ref.dataset.disabled!=="");let me=(B=N.find(oe=>oe.ref===$))==null?void 0:B.value;if(g.key===S.END?me=N[N.length-1].value:g.key===S.HOME&&(me=N[0].value),!me||!v.value)return;const ft=ns(N.map(oe=>oe.value),v.value,me);F.value=ft}}async function Me(g){if(await re(),D.value)Be.trigger(g);else{const $=_e(),V=$.find(B=>B.dataset.state==="checked");V?U(V):$.length&&U($[0])}}return ve(F,()=>{j.value||re(()=>{Me()})},{immediate:!0,deep:!0}),l({highlightedElement:T,highlightItem:lt,highlightFirstItem:Re,highlightSelected:Me,getItems:k}),ls({modelValue:F,onValueChange:O,multiple:r,orientation:s,dir:x,disabled:u,highlightOnHover:a,highlightedElement:T,isVirtual:D,virtualFocusHook:Be,virtualKeydownHook:xe,virtualHighlightHook:Le,by:i.by,firstValue:v,selectionBehavior:h,focusable:K,onLeave:be,onEnter:ct,changeHighlight:U,onKeydownEnter:rt,onKeydownNavigation:Pe,onKeydownTypeAhead:it,onCompositionStart:ut,onCompositionEnd:dt,highlightFirstItem:Re}),(g,$)=>(p(),q(e(Y),{ref_key:"primitiveElement",ref:_,as:g.as,"as-child":g.asChild,dir:e(x),"data-disabled":e(u)?"":void 0,onPointerleave:be,onFocusout:$[0]||($[0]=async V=>{const B=V.relatedTarget||V.target;await re(),T.value&&e(y)&&!e(y).contains(B)&&be(V)})},{default:m(()=>[M(g.$slots,"default",{modelValue:e(F)}),e(w)&&g.name?(p(),q(e(Ht),{key:0,name:g.name,value:e(F),disabled:e(u),required:g.required},null,8,["name","value","disabled","required"])):R("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),is=P({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(t){const{CollectionSlot:l}=je(),o=Oe(),i=At(!1,10);return(c,r)=>(p(),q(e(l),null,{default:m(()=>[d(e(Y),{role:"listbox",as:c.as,"as-child":c.asChild,tabindex:e(o).focusable.value?e(o).highlightedElement.value?"-1":"0":void 0,"aria-orientation":e(o).orientation.value,"aria-multiselectable":!!e(o).multiple.value,"data-orientation":e(o).orientation.value,onMousedown:r[0]||(r[0]=J(a=>i.value=!0,["left"])),onFocus:r[1]||(r[1]=a=>{e(i)||e(o).onEnter(a)}),onKeydown:[r[2]||(r[2]=Z(J(a=>{e(o).focusable.value&&e(o).onKeydownNavigation(a)},["prevent"]),["down","up","left","right","home","end"])),Z(e(o).onKeydownEnter,["enter"]),e(o).onKeydownTypeAhead]},{default:m(()=>[M(c.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),[us,ds]=de("ListboxGroup"),cs=P({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(t){const l=t,o=he(void 0,"reka-listbox-group");return ds({id:o}),(i,c)=>(p(),q(e(Y),G({role:"group"},l,{"aria-labelledby":e(o)}),{default:m(()=>[M(i.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),ms=P({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(t,{emit:l}){const o=t,c=Je(o,"modelValue",l,{defaultValue:"",passive:o.modelValue===void 0}),r=Oe(),{primitiveElement:a,currentElement:s}=Xe(),u=L(()=>o.disabled||r.disabled.value||!1),h=E();return vt(()=>{var b;return h.value=(b=r.highlightedElement.value)==null?void 0:b.id}),ue(()=>{r.focusable.value=!1,setTimeout(()=>{var b;o.autoFocus&&((b=s.value)==null||b.focus())},1)}),Ee(()=>{r.focusable.value=!0}),(b,k)=>(p(),q(e(Y),{ref_key:"primitiveElement",ref:a,as:b.as,"as-child":b.asChild,value:e(c),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":h.value,type:"text",onKeydown:[Z(J(e(r).onKeydownNavigation,["prevent"]),["down","up","home","end"]),Z(e(r).onKeydownEnter,["enter"])],onInput:k[0]||(k[0]=f=>{c.value=f.target.value,e(r).highlightFirstItem(f)}),onCompositionstart:e(r).onCompositionStart,onCompositionend:e(r).onCompositionEnd},{default:m(()=>[M(b.$slots,"default",{modelValue:e(c)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),fs="listbox.select",[fn,ps]=de("ListboxItem"),vs=P({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(t,{emit:l}){const o=t,i=l,c=he(void 0,"reka-listbox-item"),{CollectionItem:r}=je(),{forwardRef:a,currentElement:s}=Dt(),u=Oe(),h=L(()=>s.value===u.highlightedElement.value),b=L(()=>as(u.modelValue.value,o.value,u.by)),k=L(()=>u.disabled.value||o.disabled);async function f(y){i("select",y),!(y!=null&&y.defaultPrevented)&&!k.value&&y&&(u.onValueChange(o.value),u.changeHighlight(s.value))}function _(y){const S={originalEvent:y,value:o.value};$t(fs,f,S)}return ps({isSelected:b}),(y,S)=>(p(),q(e(r),{value:y.value},{default:m(()=>[ht([h.value,b.value],()=>d(e(Y),G({id:e(c)},y.$attrs,{ref:e(a),role:"option",tabindex:e(u).focusable.value?h.value?"0":"-1":-1,"aria-selected":b.value,as:y.as,"as-child":y.asChild,disabled:k.value?"":void 0,"data-disabled":k.value?"":void 0,"data-highlighted":h.value?"":void 0,"data-state":b.value?"checked":"unchecked",onClick:_,onKeydown:Z(J(_,["prevent"]),["space"]),onPointermove:S[0]||(S[0]=x=>{e(u).highlightedElement.value!==e(s)&&(e(u).highlightOnHover.value?e(u).changeHighlight(e(s),!1):e(u).focusable.value||e(u).changeHighlight(e(s),!1))})}),{default:m(()=>[M(y.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),S,1)]),_:3},8,["value"]))}}),hs=P({__name:"ListboxGroupLabel",props:{for:{},asChild:{type:Boolean},as:{default:"div"}},setup(t){const l=t,o=us({id:""});return(i,c)=>(p(),q(e(Y),G(l,{id:e(o).id}),{default:m(()=>[M(i.$slots,"default")]),_:3},16,["id"]))}}),gs={key:0,"aria-labelledby":"hero-heading",class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},ys={class:"flex flex-col lg:flex-row items-center gap-8"},xs={class:"flex-1 text-center lg:text-left"},_s={class:"space-y-4"},bs={class:"text-base text-gray-500 max-w-xl mx-auto lg:mx-0 dark:text-gray-400"},ks={class:"text-gray-900 dark:text-white"},ws={class:"mt-6 flex flex-wrap items-center gap-3 justify-center lg:justify-start"},$s={class:"flex-shrink-0 lg:w-80"},Cs={class:"rounded-lg p-4"},Ss={class:"grid gap-3",role:"list"},Vs={class:"text-sm font-medium text-gray-900 dark:text-white"},Es={class:"text-xs text-gray-500 mt-0.5 dark:text-gray-400"},Is={__name:"HeroSection",setup(t){const o=Ie().props.name,i=E(!0),c=()=>{i.value=!1,localStorage.setItem("heroCardDismissed","true")},r=[{icon:St,title:"Gratuit",description:"Pour une association ou un particulier"},{icon:Vt,title:"Réservation sécurisée",description:"Processus simple et sûr"},{icon:Zt,title:"Gestion d'inventaire",description:"Suivez votre matériel"},{icon:Et,title:"Communauté active",description:"Réseau associatif"}];return(a,s)=>(p(),q(yt,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform -translate-y-4 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-4 opacity-0"},{default:m(()=>[i.value?(p(),C("section",gs,[s[7]||(s[7]=n("div",{class:"absolute inset-0 rounded-2xl"},null,-1)),d(e(kt),{class:"relative border-none bg-gradient-to-br from-violet-100 via-blue-50 to-background dark:from-violet-950 dark:via-blue-950 dark:to-background"},{default:m(()=>[d(e(H),{variant:"ghost",size:"icon",class:"absolute right-3 top-3 hover:bg-white/80",onClick:c},{default:m(()=>[d(e(te),{class:"h-4 w-4"}),s[0]||(s[0]=n("span",{class:"sr-only"},"Fermer la bannière d'accueil",-1))]),_:1,__:[0]}),d(e(wt),{class:"p-6"},{default:m(()=>[n("div",ys,[n("div",xs,[n("div",_s,[s[2]||(s[2]=n("h1",{id:"hero-heading",class:"text-2xl sm:text-3xl font-bold font-title text-gray-900 leading-tight dark:text-white"},[n("span",{class:"inline-block"},[z(" Location et prêt de matériel "),n("span",{class:"bg-gradient-to-r from-violet-600 to-blue-600 bg-clip-text text-transparent whitespace-nowrap dark:from-violet-400 dark:to-blue-400"},"événementiel")]),n("span",{class:"block text-lg sm:text-xl mt-2 text-gray-600 font-medium dark:text-gray-400"}," entre associations et particuliers ")],-1)),n("p",bs,[n("strong",ks,I(e(o)),1),s[1]||(s[1]=z(" facilite la location de matériel entre associations. Trouvez et réservez en quelques clics le matériel dont vous avez besoin pour vos événements. "))])]),n("div",ws,[d(e(Ne),{href:a.route("discover"),class:"inline-flex items-center px-5 py-2.5 text-sm font-medium rounded-lg bg-gradient-to-r from-violet-600 to-blue-600 text-white hover:from-violet-700 hover:to-blue-700 transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-violet-500 dark:from-violet-500 dark:to-blue-500 dark:hover:from-violet-600 dark:hover:to-blue-600"},{default:m(()=>[s[3]||(s[3]=z(" Découvrir la plateforme ")),d(e(Ct),{class:"ml-2 h-4 w-4"})]),_:1,__:[3]},8,["href"]),d(e(H),{variant:"outline",as:"a",href:a.route("how-it-works"),class:"text-sm border-violet-200 text-violet-700 hover:text-violet-500 hover:bg-violet-50 dark:border-violet-800 dark:text-violet-300 dark:hover:bg-violet-900"},{default:m(()=>s[4]||(s[4]=[z(" Comment ça marche ? ")])),_:1,__:[4]},8,["href"])])]),s[6]||(s[6]=n("div",{class:"hidden lg:block w-px h-32 bg-gradient-to-b from-violet-200 to-blue-200 self-center dark:from-violet-800 dark:to-blue-800"},null,-1)),n("div",$s,[n("div",Cs,[s[5]||(s[5]=n("h2",{class:"text-sm font-medium text-gray-900 mb-4 dark:text-white"}," Avantages de la plateforme ",-1)),n("ul",Ss,[(p(),C(W,null,Q(r,u=>n("li",{key:u.title,class:"flex items-start gap-3 group"},[n("div",{class:X(["rounded-md bg-gradient-to-br from-violet-100 to-blue-100 p-2 group-hover:from-violet-200 group-hover:to-blue-200 transition-colors duration-200 dark:from-violet-900 dark:to-blue-900",{"from-violet-200 to-blue-200 dark:from-violet-800 dark:to-blue-800":u.title==="Gratuit"}])},[(p(),q(gt(u.icon),{class:"w-4 h-4 text-violet-600 dark:text-violet-400"}))],2),n("div",null,[n("h3",Vs,I(u.title),1),n("p",Es,I(u.description),1)])])),64))])])])])]),_:1})]),_:1})])):R("",!0)]),_:1}))}},js={class:"flex items-center border rounded-lg shadow-md bg-background"},qs={class:"pl-3 text-muted-foreground"},zs=["onKeydown"],Ts={__name:"SearchInput",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","search:submit"],setup(t,{emit:l}){const o=t,i=l,c=E(null),r=L({get(){return o.modelValue},set(u){i("update:modelValue",u)}}),a=()=>{r.value="",re(()=>{var u;(u=c.value)==null||u.focus()})},s=()=>{i("search:submit",r.value)};return(u,h)=>(p(),C("div",js,[n("span",qs,[d(e(qe),{class:"h-5 w-5"})]),He(n("input",{ref_key:"inputRef",ref:c,"onUpdate:modelValue":h[0]||(h[0]=b=>r.value=b),type:"text",class:"flex-1 h-12 px-3 bg-transparent focus:outline-none",placeholder:"Que recherchez-vous ?",onKeydown:Z(J(s,["prevent"]),["enter"]),autocomplete:"off"},null,40,zs),[[Ge,r.value]]),r.value?(p(),C("button",{key:0,onMousedown:J(a,["prevent"]),class:"pr-3 text-muted-foreground hover:text-foreground",tabindex:"-1"},[d(e(te),{class:"h-4 w-4"})],32)):R("",!0)]))}},Fs={class:"relative w-full"},Os={class:"flex items-center border rounded-lg shadow-md bg-background"},Bs={class:"pl-3 text-muted-foreground"},Ls={key:0,class:"py-6 text-center text-sm text-muted-foreground"},Rs={key:1,class:"py-6 text-center text-sm text-destructive"},Ps={key:2,class:"py-6 text-center text-sm text-muted-foreground"},Ms={key:3,class:"max-h-[300px] overflow-y-auto"},Ks=["onClick"],As={class:"flex flex-col"},Ds={class:"text-xs text-muted-foreground"},Us={__name:"CityInput",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","selected"],setup(t,{emit:l}){const o=t,i=l,c=E(o.modelValue),r=E([]),a=E(!1),s=E(!1),u=E(""),h=E(null),b=Kt(async _=>{if(_.length<3){r.value=[],a.value=!1,u.value="";return}s.value=!0,a.value=!0,u.value="";try{const y=await fe.get(`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(_)}&type=municipality&limit=5`);if(!y.data.features||y.data.features.length===0){r.value=[];return}r.value=y.data.features.map(S=>({id:S.properties.id,name:S.properties.city,postcode:S.properties.postcode,coordinates:{lat:S.geometry.coordinates[1],lng:S.geometry.coordinates[0]}}))}catch(y){console.error("Error fetching city suggestions:",y),r.value=[],y.value="Erreur lors de la recherche de villes. Veuillez réessayer."}finally{s.value=!1}},150);ve(c,_=>{i("update:modelValue",_),_.length>=3&&_!==h.value?b(_):(r.value=[],a.value=!1)});const k=_=>{h.value=_.name+" ("+_.postcode+")",c.value=h.value,u.value="";let y={name:_.name,lat:_.coordinates.lat,lng:_.coordinates.lng,postcode:_.postcode,departement:_.postcode.substring(0,2)};i("selected",y),a.value=!1},f=()=>{c.value="",r.value=[],a.value=!1,u.value="",h.value=null,i("update:modelValue",""),i("selected",null)};return(_,y)=>(p(),C("div",Fs,[d(e(Fe),{open:a.value,"onUpdate:open":y[1]||(y[1]=S=>a.value=S)},{default:m(()=>[d(e(ze),{asChild:""},{default:m(()=>[n("div",Os,[n("span",Bs,[d(e(Ke),{class:"h-5 w-5"})]),He(n("input",{"onUpdate:modelValue":y[0]||(y[0]=S=>c.value=S),type:"text",class:"flex-1 h-12 px-3 bg-transparent focus:outline-none",placeholder:"Ajouter une localisation"},null,512),[[Ge,c.value]]),c.value?(p(),C("button",{key:0,onMousedown:J(f,["prevent"]),class:"pr-3 text-muted-foreground hover:text-foreground",tabindex:"-1"},[d(e(te),{class:"h-4 w-4"})],32)):R("",!0)])]),_:1}),d(e(Te),{class:"w-full p-0",align:"start"},{default:m(()=>[s.value?(p(),C("div",Ls,y[2]||(y[2]=[n("div",{class:"flex items-center justify-center"},[n("div",{class:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),n("span",{class:"ml-2"},"Recherche en cours...")],-1)]))):u.value?(p(),C("div",Rs,I(u.value),1)):r.value.length===0?(p(),C("div",Ps," Aucun résultat trouvé ")):(p(),C("div",Ms,[(p(!0),C(W,null,Q(r.value,S=>(p(),C("div",{key:S.id,class:"flex items-center gap-2 px-4 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground",onClick:x=>k(S)},[d(e(Ke),{class:"h-4 w-4 text-muted-foreground"}),n("div",As,[n("span",null,I(S.name),1),n("span",Ds,I(S.postcode),1)])],8,Ks))),128))]))]),_:1})]),_:1},8,["open"])]))}},et=P({__name:"Command",props:{modelValue:{default:""},defaultValue:{},multiple:{type:Boolean},orientation:{},dir:{},disabled:{type:Boolean},selectionBehavior:{},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(t,{emit:l}){const o=t,i=l,c=se(o,"class"),r=We(c,i),a=E(new Map),s=E(new Map),{contains:u}=os({sensitivity:"base"}),h=xt({search:"",filtered:{count:0,items:new Map,groups:new Set}});function b(){if(!h.search){h.filtered.count=a.value.size;return}h.filtered.groups=new Set;let k=0;for(const[f,_]of a.value){const y=u(_,h.search);h.filtered.items.set(f,y?1:0),y&&k++}for(const[f,_]of s.value)for(const y of _)if(h.filtered.items.get(y)>0){h.filtered.groups.add(f);break}h.filtered.count=k}return ve(()=>h.search,()=>{b()}),Ws({allItems:a,allGroups:s,filterState:h}),(k,f)=>(p(),q(e(rs),G({"data-slot":"command"},e(r),{class:e(ee)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",o.class)}),{default:m(()=>[M(k.$slots,"default")]),_:3},16,["class"]))}}),tt=P({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(t){const l=t,o=se(l,"class"),{filterState:i}=ge(),c=L(()=>!!i.search&&i.filtered.count===0);return(r,a)=>c.value?(p(),q(e(Y),G({key:0,"data-slot":"command-empty"},e(o),{class:e(ee)("py-6 text-center text-sm",l.class)}),{default:m(()=>[M(r.$slots,"default")]),_:3},16,["class"])):R("",!0)}}),st=P({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{},heading:{}},setup(t){const l=t,o=se(l,"class"),{allGroups:i,filterState:c}=ge(),r=he(),a=L(()=>c.search?c.filtered.groups.has(r):!0);return Xs({id:r}),ue(()=>{i.value.has(r)||i.value.set(r,new Set)}),Ee(()=>{i.value.delete(r)}),(s,u)=>(p(),q(e(cs),G(e(o),{id:e(r),"data-slot":"command-group",class:e(ee)("text-foreground overflow-hidden p-1",l.class),hidden:a.value?void 0:!0}),{default:m(()=>[s.heading?(p(),q(e(hs),{key:0,class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:m(()=>[z(I(s.heading),1)]),_:1})):R("",!0),M(s.$slots,"default")]),_:3},16,["id","class","hidden"]))}}),Ns={"data-slot":"command-input-wrapper",class:"flex h-12 items-center gap-2 border-b px-3"},ot=P({inheritAttrs:!1,__name:"CommandInput",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(t){const l=t,o=se(l,"class"),i=Qe(o),{filterState:c}=ge();return(r,a)=>(p(),C("div",Ns,[d(e(qe),{class:"size-4 shrink-0 opacity-50"}),d(e(ms),G({...e(i),...r.$attrs},{modelValue:e(c).search,"onUpdate:modelValue":a[0]||(a[0]=s=>e(c).search=s),"data-slot":"command-input","auto-focus":"",class:e(ee)("placeholder:text-muted-foreground flex h-12 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",l.class)}),null,16,["modelValue","class"])]))}}),Se=P({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},emits:["select"],setup(t,{emit:l}){const o=t,i=l,c=se(o,"class"),r=We(c,i),a=he(),{filterState:s,allItems:u,allGroups:h}=ge(),b=Qs(),k=L(()=>{if(s.search){const y=s.filtered.items.get(a);return y===void 0?!0:y>0}else return!0}),f=E(),_=Ut(f);return ue(()=>{var S,x;if(!(_.value instanceof HTMLElement))return;u.value.set(a,_.value.textContent??((S=o.value)==null?void 0:S.toString())??"");const y=b==null?void 0:b.id;y&&(h.value.has(y)?(x=h.value.get(y))==null||x.add(a):h.value.set(y,new Set([a])))}),Ee(()=>{u.value.delete(a)}),(y,S)=>k.value?(p(),q(e(vs),G({key:0},e(r),{id:e(a),ref_key:"itemRef",ref:f,"data-slot":"command-item",class:e(ee)("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-3 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",o.class),onSelect:S[0]||(S[0]=()=>{e(s).search=""})}),{default:m(()=>[M(y.$slots,"default")]),_:3},16,["id","class"])):R("",!0)}}),Hs={role:"presentation"},Gs=P({__name:"CommandList",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(t){const l=t,o=se(l,"class"),i=Qe(o);return(c,r)=>(p(),q(e(is),G({"data-slot":"command-list"},e(i),{class:e(ee)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",l.class)}),{default:m(()=>[n("div",Hs,[M(c.$slots,"default")])]),_:3},16,["class"]))}}),[ge,Ws]=de("Command"),[Qs,Xs]=de("CommandGroup");var Js=typeof global=="object"&&global&&global.Object===Object&&global,Ys=typeof self=="object"&&self&&self.Object===Object&&self,at=Js||Ys||Function("return this")(),pe=at.Symbol,nt=Object.prototype,Zs=nt.hasOwnProperty,eo=nt.toString,le=pe?pe.toStringTag:void 0;function to(t){var l=Zs.call(t,le),o=t[le];try{t[le]=void 0;var i=!0}catch{}var c=eo.call(t);return i&&(l?t[le]=o:delete t[le]),c}var so=Object.prototype,oo=so.toString;function ao(t){return oo.call(t)}var no="[object Null]",lo="[object Undefined]",Ae=pe?pe.toStringTag:void 0;function ro(t){return t==null?t===void 0?lo:no:Ae&&Ae in Object(t)?to(t):ao(t)}function io(t){return t!=null&&typeof t=="object"}var uo="[object Symbol]";function co(t){return typeof t=="symbol"||io(t)&&ro(t)==uo}var mo=/\s/;function fo(t){for(var l=t.length;l--&&mo.test(t.charAt(l)););return l}var po=/^\s+/;function vo(t){return t&&t.slice(0,fo(t)+1).replace(po,"")}function Ve(t){var l=typeof t;return t!=null&&(l=="object"||l=="function")}var De=NaN,ho=/^[-+]0x[0-9a-f]+$/i,go=/^0b[01]+$/i,yo=/^0o[0-7]+$/i,xo=parseInt;function Ue(t){if(typeof t=="number")return t;if(co(t))return De;if(Ve(t)){var l=typeof t.valueOf=="function"?t.valueOf():t;t=Ve(l)?l+"":l}if(typeof t!="string")return t===0?t:+t;t=vo(t);var o=go.test(t);return o||yo.test(t)?xo(t.slice(2),o?2:8):ho.test(t)?De:+t}var we=function(){return at.Date.now()},_o="Expected a function",bo=Math.max,ko=Math.min;function wo(t,l,o){var i,c,r,a,s,u,h=0,b=!1,k=!1,f=!0;if(typeof t!="function")throw new TypeError(_o);l=Ue(l)||0,Ve(o)&&(b=!!o.leading,k="maxWait"in o,r=k?bo(Ue(o.maxWait)||0,l):r,f="trailing"in o?!!o.trailing:f);function _(O){var T=i,A=c;return i=c=void 0,h=O,a=t.apply(A,T),a}function y(O){return h=O,s=setTimeout(w,l),b?_(O):a}function S(O){var T=O-u,A=O-h,D=l-T;return k?ko(D,r-A):D}function x(O){var T=O-u,A=O-h;return u===void 0||T>=l||T<0||k&&A>=r}function w(){var O=we();if(x(O))return v(O);s=setTimeout(w,S(O))}function v(O){return s=void 0,f&&i?_(O):(i=c=void 0,a)}function j(){s!==void 0&&clearTimeout(s),h=0,i=u=c=s=void 0}function K(){return s===void 0?a:v(we())}function F(){var O=we(),T=x(O);if(i=arguments,c=this,u=O,T){if(s===void 0)return y(u);if(k)return clearTimeout(s),s=setTimeout(w,l),_(u)}return s===void 0&&(s=setTimeout(w,l)),a}return F.cancel=j,F.flush=K,F}const $o={class:"truncate"},Co={class:"flex items-center justify-between border-b p-2"},So={class:"text-sm text-muted-foreground"},Vo={key:0},Eo={key:1},Io={key:0,class:"mt-2 flex flex-wrap gap-1"},jo=["onClick"],qo={__name:"OrganizationFilter",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(t,{emit:l}){const o=t,i=l,c=E(!1),r=E(""),a=E([]),s=E([]),u=E(!1),h=L(()=>o.modelValue.map(x=>s.value.find(w=>w.id===x)).filter(Boolean)),b=async x=>{if(x.length===0)return;const w=x.filter(v=>!s.value.some(j=>j.id===v));if(w.length!==0)try{const v=await fe.get(route("api.organizations.index",{"ids[]":w}));s.value.push(...v.data.data)}catch(v){console.error("Error fetching organizations by IDs:",v)}};ue(()=>{S(),b(o.modelValue)}),ve(()=>o.modelValue,x=>{b(x)},{deep:!0});const k=x=>o.modelValue.includes(x.id),f=(x,w)=>{w&&w.preventDefault();const v=[...o.modelValue],j=v.indexOf(x.id);j>-1?v.splice(j,1):v.push(x.id),i("update:modelValue",v)},_=x=>{f(x,null)},y=()=>{i("update:modelValue",[])},S=wo(async()=>{u.value=!0;try{const x=await fe.get(route("api.organizations.index",{search:r.value}));a.value=x.data.data,x.data.data.forEach(w=>{s.value.some(v=>v.id===w.id)||s.value.push(w)})}catch(x){console.error("Error searching organizations:",x)}finally{u.value=!1}},300);return(x,w)=>(p(),C("div",null,[d(e(Fe),{open:c.value,"onUpdate:open":w[1]||(w[1]=v=>c.value=v)},{default:m(()=>[d(e(ze),{asChild:""},{default:m(()=>[d(e(H),{variant:"outline",role:"combobox","aria-expanded":c.value,class:"w-full justify-between"},{default:m(()=>[n("span",$o,I(h.value.length>0?h.value.map(v=>v.name).join(", "):"Sélectionner une ou plusieurs organisations"),1),d(e(Ze),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),d(e(Te),{class:"w-[--radix-popover-trigger-width] p-0"},{default:m(()=>[d(e(et),{"filter-function":v=>v},{default:m(()=>[n("div",Co,[n("p",So,I(h.value.length)+" sélectionnée(s) ",1),h.value.length>0?(p(),q(e(H),{key:0,variant:"ghost",size:"sm",onClick:y},{default:m(()=>w[2]||(w[2]=[z(" Effacer ")])),_:1,__:[2]})):R("",!0)]),d(e(ot),{modelValue:r.value,"onUpdate:modelValue":[w[0]||(w[0]=v=>r.value=v),e(S)],placeholder:"Rechercher une organisation..."},null,8,["modelValue","onUpdate:modelValue"]),d(e(tt),null,{default:m(()=>[u.value?(p(),C("span",Vo,"Chargement...")):(p(),C("span",Eo,"Aucune organisation trouvée."))]),_:1}),d(e(st),null,{default:m(()=>[(p(!0),C(W,null,Q(a.value,v=>(p(),q(e(Se),{key:v.id,value:v.name,onSelect:j=>f(v,j)},{default:m(()=>[d(e(Ce),{class:X(["mr-2 h-4 w-4",k(v)?"opacity-100":"opacity-0"])},null,8,["class"]),z(" "+I(v.name),1)]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1},8,["filter-function"])]),_:1})]),_:1},8,["open"]),h.value.length>0?(p(),C("div",Io,[(p(!0),C(W,null,Q(h.value,v=>(p(),q(e(Ye),{key:`selected-${v.id}`,variant:"secondary"},{default:m(()=>[z(I(v.name)+" ",1),n("button",{type:"button",class:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:j=>_(v)},[d(e(te),{class:"h-3 w-3 text-muted-foreground hover:text-foreground"})],8,jo)]),_:2},1024))),128))])):R("",!0)]))}},zo={class:"truncate"},To={class:"flex items-center justify-between border-b p-2"},Fo={class:"text-sm text-muted-foreground"},Oo={key:0},Bo={key:1},Lo={key:0,class:"mt-2 flex flex-wrap gap-1"},Ro=["onClick"],Po={__name:"CategoryFilter",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(t,{emit:l}){const o=t,i=l,c=E(!1),r=E(""),a=E([]),s=L(()=>a.value.flatMap(x=>[x,...x.children])),u=E(!1),h=L(()=>o.modelValue.map(x=>s.value.find(w=>w.id===x)).filter(Boolean)),b=async()=>{u.value=!0;try{const x=await fe.get("/api/categories");a.value=x.data}catch(x){console.error("Error fetching categories:",x)}finally{u.value=!1}};ue(()=>{b()});const k=x=>o.modelValue.includes(x.id),f=(x,w)=>{w&&w.preventDefault();const v=[...o.modelValue],j=v.indexOf(x.id);j>-1?v.splice(j,1):v.push(x.id),i("update:modelValue",v)},_=x=>{f(x,null)},y=()=>{i("update:modelValue",[])},S=(x,w)=>x.filter(v=>{var K;const j=(K=v.children)==null?void 0:K.some(F=>F.name.toLowerCase().includes(w.toLowerCase()));return v.name.toLowerCase().includes(w.toLowerCase())||j});return(x,w)=>(p(),C("div",null,[d(e(Fe),{open:c.value,"onUpdate:open":w[1]||(w[1]=v=>c.value=v)},{default:m(()=>[d(e(ze),{asChild:""},{default:m(()=>[d(e(H),{variant:"outline",role:"combobox","aria-expanded":c.value,class:"w-full justify-between"},{default:m(()=>[n("span",zo,I(h.value.length>0?h.value.map(v=>v.name).join(", "):"Sélectionner une ou plusieurs catégories"),1),d(e(Ze),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),d(e(Te),{class:"w-[--radix-popover-trigger-width] p-0"},{default:m(()=>[d(e(et),{"filter-function":S},{default:m(()=>[n("div",To,[n("p",Fo,I(h.value.length)+" sélectionnée(s) ",1),h.value.length>0?(p(),q(e(H),{key:0,variant:"ghost",size:"sm",onClick:y},{default:m(()=>w[2]||(w[2]=[z(" Effacer ")])),_:1,__:[2]})):R("",!0)]),d(e(ot),{modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=v=>r.value=v),placeholder:"Rechercher une catégorie..."},null,8,["modelValue"]),d(e(tt),null,{default:m(()=>[u.value?(p(),C("span",Oo,"Chargement...")):(p(),C("span",Bo,"Aucune catégorie trouvée."))]),_:1}),d(e(Gs),null,{default:m(()=>[(p(!0),C(W,null,Q(a.value,v=>(p(),q(e(st),{key:v.id,heading:v.name},{default:m(()=>[d(e(Se),{value:v.name,onSelect:j=>f(v,j)},{default:m(()=>[d(e(Ce),{class:X(["mr-2 h-4 w-4",k(v)?"opacity-100":"opacity-0"])},null,8,["class"]),z(" "+I(v.name)+" (toute la catégorie) ",1)]),_:2},1032,["value","onSelect"]),(p(!0),C(W,null,Q(v.children,j=>(p(),q(e(Se),{key:j.id,value:j.name,onSelect:K=>f(j,K),class:"pl-8"},{default:m(()=>[d(e(Ce),{class:X(["mr-2 h-4 w-4",k(j)?"opacity-100":"opacity-0"])},null,8,["class"]),z(" "+I(j.name),1)]),_:2},1032,["value","onSelect"]))),128))]),_:2},1032,["heading"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),h.value.length>0?(p(),C("div",Lo,[(p(!0),C(W,null,Q(h.value,v=>(p(),q(e(Ye),{key:`selected-${v.id}`,variant:"secondary"},{default:m(()=>[z(I(v.name)+" ",1),n("button",{type:"button",class:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:j=>_(v)},[d(e(te),{class:"h-3 w-3 text-muted-foreground hover:text-foreground"})],8,Ro)]),_:2},1024))),128))])):R("",!0)]))}},Mo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ko={class:"relative rounded-xl shadow-xl border border-gray-200/60"},Ao={key:0,class:"px-6 pt-6 pb-4"},Do={class:"px-6 pb-6"},Uo={class:"flex flex-col md:flex-row gap-4 p-4"},No={class:"flex-1"},Ho={class:"flex-1"},Go={class:"flex items-end"},Wo={key:1,class:"h-5 w-5 mr-2"},Qo={class:"px-6 pb-6"},Xo={class:""},Jo={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},Yo={class:"space-y-2"},Zo={class:"space-y-2"},ea={class:"space-y-2"},ta={class:"flex justify-end items-end"},sa={__name:"SearchSection",props:{filters:{type:Object,default:()=>({})},stats:{type:Object,required:!0}},emits:["searching"],setup(t,{emit:l}){const i=Ie().props.auth.user,c=t,r=l,a=E(!1),s=_t({search:c.filters.search||"",radius:c.filters.radius||50,categories:c.filters.categories||[],organizations:c.filters.organizations||[],coordinates:c.filters.coordinates||null,city:c.filters.city||null,postcode:c.filters.postcode||null}),u=()=>{console.log(s.categories),s.isDirty&&(a.value=!0,r("searching",a.value),s.get(route("home"),{only:["filters","equipments"],preserveScroll:!0,preserveState:!0,onFinish:()=>{a.value=!1,r("searching",a.value)}}))},h=()=>{s.reset({search:"",radius:50,categories:[],organizations:[],coordinates:null,city:null,postcode:null}),u()},b=k=>{s.city=k.name,s.postcode=k.postcode,s.coordinates={lat:k.lat,lng:k.lng},s.radius=s.radius||5,u()};return(k,f)=>(p(),C("div",{class:X({"relative mt-8":e(i)})},[n("div",Mo,[n("div",Ko,[e(i)?R("",!0):(p(),C("div",Ao,f[5]||(f[5]=[n("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Trouvez le matériel dont vous avez besoin",-1),n("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Recherchez parmi des milliers d'équipements disponibles près de chez vous.",-1)]))),n("div",Do,[n("div",Uo,[n("div",No,[d(e(ne),{class:"text-sm font-medium mb-2 text-gray-700 dark:text-white"},{default:m(()=>f[6]||(f[6]=[z("Dans quel secteur ?")])),_:1,__:[6]}),d(Us,{modelValue:e(s).city,"onUpdate:modelValue":f[0]||(f[0]=_=>e(s).city=_),onSelected:b,placeholder:"Entrez une ville ou un code postal"},null,8,["modelValue"])]),n("div",Ho,[d(e(ne),{class:"text-sm font-medium mb-2 text-gray-700 dark:text-white"},{default:m(()=>f[7]||(f[7]=[z("Que recherchez-vous ?")])),_:1,__:[7]}),d(Ts,{modelValue:e(s).search,"onUpdate:modelValue":f[1]||(f[1]=_=>e(s).search=_),placeholder:"Ex: Vidéoprojecteur, Enceinte, Table...","onSearch:submit":u},null,8,["modelValue"])]),n("div",Go,[d(e(H),{type:"submit",size:"lg",disabled:a.value,class:"w-full md:w-auto min-w-[140px] bg-primary hover:bg-primary/90 shadow-sm dark:bg-primary dark:hover:bg-primary/90",onClick:u},{default:m(()=>[a.value?(p(),C("span",Wo,f[8]||(f[8]=[n("span",{class:"animate-spin inline-block h-5 w-5 border-[3px] border-current border-t-transparent rounded-full"},null,-1)]))):(p(),q(e(qe),{key:0,class:"h-5 w-5 mr-2"})),z(" "+I(a.value?"Recherche...":"Rechercher"),1)]),_:1},8,["disabled"])])])]),n("div",Qo,[n("div",Xo,[n("div",Jo,[n("div",Yo,[d(e(ne),{for:"radius",class:"flex items-center gap-2"},{default:m(()=>[f[10]||(f[10]=z(" Rayon de recherche ")),d(e(Pt),null,{default:m(()=>[d(e(Bt),null,{default:m(()=>[d(e(Lt),null,{default:m(()=>[d(e(Wt),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),d(e(Rt),null,{default:m(()=>f[9]||(f[9]=[n("p",null,"Distance maximale de recherche",-1)])),_:1,__:[9]})]),_:1})]),_:1})]),_:1,__:[10]}),d(e(zt),{modelValue:e(s).radius,"onUpdate:modelValue":[f[2]||(f[2]=_=>e(s).radius=_),u]},{default:m(()=>[d(e(It),{id:"radius",class:"w-full bg-white dark:bg-gray-800"},{default:m(()=>[d(e(jt),{placeholder:"Sélectionner un rayon"})]),_:1}),d(e(qt),null,{default:m(()=>[d(e(ae),{value:"5"},{default:m(()=>f[11]||(f[11]=[z("5 km")])),_:1,__:[11]}),d(e(ae),{value:"10"},{default:m(()=>f[12]||(f[12]=[z("10 km")])),_:1,__:[12]}),d(e(ae),{value:"25"},{default:m(()=>f[13]||(f[13]=[z("25 km")])),_:1,__:[13]}),d(e(ae),{value:"50"},{default:m(()=>f[14]||(f[14]=[z("50 km")])),_:1,__:[14]}),d(e(ae),{value:"100"},{default:m(()=>f[15]||(f[15]=[z("100 km")])),_:1,__:[15]})]),_:1})]),_:1},8,["modelValue"])]),n("div",Zo,[d(e(ne),null,{default:m(()=>f[16]||(f[16]=[z("Catégories")])),_:1,__:[16]}),d(Po,{modelValue:e(s).categories,"onUpdate:modelValue":[f[3]||(f[3]=_=>e(s).categories=_),u]},null,8,["modelValue"])]),n("div",ea,[d(e(ne),{class:"flex items-center gap-2"},{default:m(()=>f[17]||(f[17]=[z(" Filtrer par organisation ")])),_:1,__:[17]}),d(qo,{modelValue:e(s).organizations,"onUpdate:modelValue":[f[4]||(f[4]=_=>e(s).organizations=_),u]},null,8,["modelValue"])]),n("div",ta,[d(e(H),{variant:"outline",size:"sm",onClick:h,class:"text-sm hover:text-destructive hover:border-destructive dark:hover:text-destructive dark:hover:border-destructive"},{default:m(()=>[d(e(te),{class:"h-4 w-4 mr-1.5"}),f[18]||(f[18]=z(" Réinitialiser les filtres "))]),_:1,__:[18]})])])])])])])],2))}},oa=["src","alt"],aa={key:1,class:"flex h-full w-full items-center justify-center bg-accent/10 text-muted-foreground/30"},na={class:"flex flex-grow flex-col p-4"},la={class:"flex-grow"},ra={class:"line-clamp-1 font-semibold text-foreground transition-colors duration-200 group-hover:text-primary"},ia={class:"text-sm"},ua={class:"font-semibold text-foreground"},da={class:"mt-2 space-y-2 text-xs text-muted-foreground"},ca={class:"truncate"},ma={class:"mt-2 flex items-center text-xs text-muted-foreground"},fa={class:"truncate"},pa={__name:"EquipmentCard",props:{equipment:{type:Object,required:!0}},setup(t){const l=t,o=E(!1),i=L(()=>l.equipment.images&&l.equipment.images.length>0),c=()=>{o.value=!0},r=a=>a==null?"":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(a);return(a,s)=>(p(),q(e(Ne),{href:a.route("equipments.show",t.equipment),class:"group relative flex flex-col overflow-hidden rounded-xl border border-border/50 bg-card shadow-sm transition-all duration-200 hover:shadow-lg"},{default:m(()=>{var u,h,b;return[n("div",{class:X(["relative block aspect-[4/3] overflow-hidden",{shimmer:i.value&&!o.value}])},[i.value?(p(),C("img",{key:0,src:t.equipment.images[0].url,alt:t.equipment.name,loading:"lazy",class:X(["h-full w-full object-cover transition-all duration-300 group-hover:scale-105",{"opacity-0":!o.value}]),onLoad:c},null,42,oa)):(p(),C("div",aa,[d(e(Xt),{class:"h-12 w-12"})]))],2),n("div",na,[n("div",la,[n("h3",ra,I(t.equipment.name),1),n("div",ia,[n("span",ua,I(r(t.equipment.rental_price)),1),s[0]||(s[0]=n("span",{class:"text-sm text-muted-foreground"}," / jour",-1))]),n("div",da,[n("span",ca,I(((u=t.equipment.organization)==null?void 0:u.name)||"Particulier")+" - "+I(((h=t.equipment.depot)==null?void 0:h.city)||"Non localisé"),1)]),n("div",ma,[d(e(ss),{class:"mr-2 h-4 w-4"}),n("span",fa,I(((b=t.equipment.category)==null?void 0:b.name)||"Sans catégorie"),1)])])])]}),_:1},8,["href"]))}},va={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ha={key:0,class:"min-h-[400px] flex flex-col items-center justify-center"},ga={key:1,class:"min-h-[400px] flex flex-col items-center justify-center text-center"},ya={class:"w-24 h-24 text-muted-foreground mb-6"},xa={class:"text-xl font-medium text-foreground"},_a={class:"mt-2 text-base text-muted-foreground max-w-md"},ba={key:0,class:"mt-6"},ka={key:2},wa={class:"mb-6 flex items-center justify-between"},$a={class:"text-lg font-medium text-foreground"},Ca={class:"text-sm text-muted-foreground"},Sa={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},Va={class:"mt-12"},Ea={__name:"ResultsSection",props:{equipments:{type:Object,required:!0},startDate:{type:String,default:""},endDate:{type:String,default:""},isSearching:{type:Boolean,default:!1}},setup(t){const l=t,o=L(()=>l.equipments.data.length>0),i=L(()=>l.startDate||l.endDate);return(c,r)=>(p(),C("div",va,[t.isSearching?(p(),C("div",ha,r[1]||(r[1]=[n("div",{class:"w-16 h-16 mb-4"},[n("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"})],-1),n("h3",{class:"text-lg font-medium text-foreground"},"Recherche en cours...",-1),n("p",{class:"mt-2 text-sm text-muted-foreground"}," Nous recherchons les meilleurs équipements pour vous ",-1)]))):o.value?(p(),C("div",ka,[n("div",wa,[n("h2",$a,I(t.equipments.total)+" équipement"+I(t.equipments.total>1?"s":"")+" trouvé"+I(t.equipments.total>1?"s":""),1),n("p",Ca," Page "+I(t.equipments.current_page)+" sur "+I(t.equipments.last_page),1)]),n("div",Sa,[(p(!0),C(W,null,Q(t.equipments.data,a=>(p(),q(pa,{key:a.id,equipment:a,"start-date":t.startDate,"end-date":t.endDate,class:"transition-all duration-300 ease-in-out"},null,8,["equipment","start-date","end-date"]))),128))]),n("div",Va,[d(Qt,{links:t.equipments.links},null,8,["links"])])])):(p(),C("div",ga,[n("div",ya,[i.value?(p(),q(e(ts),{key:0,class:"w-full h-full"})):(p(),q(e(es),{key:1,class:"w-full h-full"}))]),n("h3",xa,I(i.value?"Aucun équipement trouvé":"Commencez votre recherche"),1),n("p",_a,I(i.value?"Essayez de modifier vos critères de recherche pour trouver plus de résultats.":"Utilisez la barre de recherche ci-dessus pour trouver l'équipement dont vous avez besoin."),1),i.value?(p(),C("div",ba,[d(e(H),{variant:"outline",onClick:r[0]||(r[0]=a=>c.$emit("reset-filters"))},{default:m(()=>r[2]||(r[2]=[z(" Réinitialiser les filtres ")])),_:1,__:[2]})])):R("",!0)]))]))}},Ia={class:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 my-2"},ja={key:0,class:"relative"},pn={__name:"Home",props:{equipments:{type:Object,required:!0},filters:{type:Object,default:()=>({})},stats:{type:Object,default:()=>({min_price:0,max_price:1e3,categories:[]})}},setup(t){const l=E(!1),o=Ie(),i=o.props.name,c=o.props.auth.user;return(r,a)=>(p(),q(bt,{title:"Location et prêt de matériel événementiel",description:`${e(i)} facilite la location de matériel entre associations. Trouvez et réservez en quelques clics le matériel dont vous avez besoin pour vos événements.`},{default:m(()=>[n("div",Ia,[d(e(Jt),{class:"bg-yellow-500/10 border-yellow-500 text-yellow-800"},{default:m(()=>[d(e(Mt),{class:"size-4"}),d(e(Yt),null,{default:m(()=>[z(I(e(i))+" est actuellement en version beta - En cas de problème, n'hésitez pas à nous contacter sur ",1),a[1]||(a[1]=n("a",{href:"mailto:contact@assocation.fr",class:"underline hover:text-primary"},"contact@assocation.fr",-1)),a[2]||(a[2]=z(". "))]),_:1,__:[1,2]})]),_:1})]),e(c)?R("",!0):(p(),C("section",ja,[d(Is)])),n("section",null,[d(sa,{filters:t.filters,stats:t.stats,onSearching:a[0]||(a[0]=s=>l.value=s)},null,8,["filters","stats"])]),n("section",{class:X(["relative py-12 bg-gradient-to-b from-background via-background/50 to-background",{"mt-8":t.equipments.data.length>0}])},[d(Ea,{equipments:t.equipments,"start-date":t.filters.start_date,"end-date":t.filters.end_date,isSearching:l.value},null,8,["equipments","start-date","end-date","isSearching"])],2)]),_:1},8,["description"]))}};export{pn as default};
