import{i as $,l as h,E as U,c as V,o as d,w as a,a as e,f as u,b as r,u as s,S as L,d as m,F as M,r as S,t as l,g as b,J as w}from"./app-B5OC5brE.js";import{_ as c}from"./index-C8qEhsP7.js";import{_ as k,a as C}from"./CardContent.vue_vue_type_script_setup_true_lang-Bk_D5AGA.js";import{_ as T,a as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-B97EsY6_.js";import{_ as N}from"./Separator.vue_vue_type_script_setup_true_lang-wizJeYow.js";import{_ as P,a as H}from"./DialogContent.vue_vue_type_script_setup_true_lang-BsMenUZz.js";import{_ as R,a as B}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bs2TD0ai.js";import{_ as J,a as Q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BGT4A_mC.js";import{T as Z,g as G,t as _}from"./FlashMessage-CQ9obvRM.js";import{_ as K}from"./PublicLayout-Bq6OPjIH.js";import{c as y}from"./createLucideIcon-CYnrfhGZ.js";import{P as O}from"./plus-BODXBDY_.js";import{T as W}from"./triangle-alert-jsquz6zd.js";import{U as X}from"./users-BNhy8Wjo.js";import{S as Y}from"./shield-D8p_vkTg.js";import{C as ee}from"./circle-alert-BgA-Yzo3.js";import"./Separator-0qGm8mY_.js";import"./useForwardExpose-Cw9oHNFR.js";import"./useForwardPropsEmits-CnjzfPsU.js";import"./DialogPortal-iMNLwq_h.js";import"./DialogDescription-Bnsiq6oD.js";import"./DialogTitle-D00qTOjb.js";import"./UserDropdown-DtlzIlPO.js";import"./index-C5B29JEo.js";import"./package-CZFpW4cG.js";import"./loader-circle-7m2k5sSN.js";import"./Input.vue_vue_type_script_setup_true_lang-ucHtsJl9.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=y("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=y("CreditCardIcon",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=y("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=y("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),ie={class:"max-w-7xl mx-auto py-6"},ne={key:0,class:"flex flex-col items-center justify-center py-12"},oe={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},le={class:"lg:col-span-2 space-y-6"},de={class:"uppercase font-medium"},ue={class:"flex flex-wrap gap-6"},me={class:"relative"},ce=["src","alt"],pe={key:1,class:"w-12 h-12 lg:w-32 lg:h-32 bg-muted rounded-lg flex items-center justify-center"},fe={class:"flex-1"},_e={class:"text-lg font-semibold mb-2"},ve={class:"space-y-2 text-sm text-muted-foreground"},xe={class:"space-y-1"},ye={class:"flex items-center gap-2 mt-1"},ge={class:"w-8 text-center"},he={key:0},be={class:"lg:text-right space-y-2"},we={class:"text-lg font-semibold"},ke={class:"text-sm"},Ce={key:0,class:"text-sm text-muted-foreground"},qe={class:"flex justify-between pt-4 border-t"},ze={class:"font-medium"},je={class:"text-right"},$e={class:"font-semibold"},Ve={key:0,class:"text-sm text-muted-foreground"},Le={class:"lg:col-span-1 space-y-6"},Me={class:"space-y-2"},Se={class:"flex justify-between"},Te={class:"flex justify-between"},Ee={class:"space-y-4 py-4"},Fe={class:"flex gap-3"},Ie={class:"flex-shrink-0 w-6 h-6 rounded-full bg-destructive/10 flex items-center justify-center text-destructive"},Ae={class:"flex gap-3"},De={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Ue={class:"flex gap-3"},Ne={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Pe={class:"flex gap-3"},He={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Re={class:"flex gap-3"},Be={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Je={class:"flex gap-3"},Qe={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},bt={__name:"Show",setup(Ze){const f=$(!1),v=$(!1),x=h(()=>U().props.items),q=n=>new Date(n).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),p=n=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(n),F=h(()=>{var n;return((n=x.value)==null?void 0:n.reduce((t,o)=>t+o.total,0))??0}),I=h(()=>{var n;return((n=x.value)==null?void 0:n.reduce((t,o)=>t+o.deposit,0))??0}),g=async n=>{if(!f.value){f.value=!0;try{await n()}finally{f.value=!1}}},z=(n,t)=>{t<1||g(()=>w.put(route("carts.update",n.equipment.id),{quantity:t,rental_start:n.rental_start,rental_end:n.rental_end},{preserveScroll:!0,only:["items"],onError:()=>{_("Erreur",{description:"Une erreur s'est produite lors de la mise à jour de la quantité.",variant:"destructive"})}}))},A=n=>{confirm("Voulez-vous vraiment retirer cet article du camion ?")&&g(()=>w.delete(route("carts.remove",n.equipment.id),{data:{rental_start:n.rental_start,rental_end:n.rental_end}},{preserveScroll:!0,onSuccess:()=>{_("Article supprimé",{description:"L'article a été retiré de votre camion."})},onError:()=>{_("Erreur",{description:"Une erreur s'est produite lors de la suppression de l'article.",variant:"destructive"})}}))},D=()=>{confirm("Voulez-vous vraiment vider votre camion ?")&&g(()=>w.delete(route("carts.clear"),{onSuccess:()=>{_("Camion vidé",{description:"Tous les articles ont été retirés de votre camion."})},onError:()=>{_("Erreur",{description:"Une erreur s'est produite lors du vidage du camion.",variant:"destructive"})}}))};return(n,t)=>(d(),V(K,{title:"Mon camion",description:"Vérifier le chargement avant de confirmer votre demande"},{header:a(()=>t[3]||(t[3]=[e("div",{class:"max-w-7xl mx-auto"},[e("h1",{class:"text-xl font-semibold"},"Mon camion"),e("p",{class:"text-sm text-muted-foreground"}," Vérifiez bien les dates et les quantités avant de confirmer votre demande. ")],-1)])),default:a(()=>[e("div",ie,[x.value.length===0?(d(),u("div",ne,[r(s(Z),{class:"h-16 w-16 text-muted-foreground mb-4"}),t[5]||(t[5]=e("h2",{class:"text-2xl font-semibold mb-2"},"Votre camion est vide",-1)),t[6]||(t[6]=e("p",{class:"text-muted-foreground mb-6"},"Ajoutez du matériel à votre camion pour commencer",-1)),r(s(c),{asChild:""},{default:a(()=>[r(s(L),{href:n.route("home")},{default:a(()=>t[4]||(t[4]=[m(" Parcourir le matériel disponible ")])),_:1,__:[4]},8,["href"])]),_:1})])):(d(),u("div",oe,[e("div",le,[(d(!0),u(M,null,S(x.value,o=>(d(),u("div",{key:o.organization.id,class:"space-y-4"},[r(s(k),{class:"bg-secondary/50"},{default:a(()=>[r(s(T),null,{default:a(()=>[r(s(E),null,{default:a(()=>[e("span",de,l(o.organization.name),1)]),_:2},1024)]),_:2},1024),r(s(C),{class:"space-y-4"},{default:a(()=>[(d(!0),u(M,null,S(o.items,i=>(d(),V(s(k),{key:i.equipment.id,class:"group"},{default:a(()=>[r(s(C),{class:"px-4"},{default:a(()=>[e("div",ue,[e("div",me,[i.image?(d(),u("img",{key:0,src:i.image,alt:i.equipment.name,class:"w-12 h-12 lg:w-32 lg:h-32 object-cover rounded-lg"},null,8,ce)):(d(),u("div",pe,[r(s(te),{class:"h-10 w-10 text-muted-foreground"})]))]),e("div",fe,[e("h3",_e,l(i.equipment.name),1),e("div",ve,[e("p",null," du "+l(q(i.rental_start))+" au "+l(q(i.rental_end)),1),e("div",xe,[t[7]||(t[7]=e("span",{class:"font-medium"},"Quantité:",-1)),e("div",ye,[r(s(c),{variant:"outline",size:"icon",onClick:j=>z(i,i.quantity-1),disabled:i.quantity<=1,class:"transition-opacity"},{default:a(()=>[r(s(ae),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),e("span",ge,l(i.quantity),1),r(s(c),{variant:"outline",size:"icon",onClick:j=>z(i,i.quantity+1),class:"transition-opacity",disabled:i.quantity>=i.quantityAvailable},{default:a(()=>[r(s(O),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])])]),i.notes?(d(),u("p",he,[t[8]||(t[8]=e("span",{class:"font-medium"},"Notes:",-1)),t[9]||(t[9]=e("br",null,null,-1)),m(" "+l(i.notes),1)])):b("",!0)])]),e("div",be,[e("p",we,l(p(i.total)),1),e("p",ke,l(p(i.price))+" x "+l(i.days)+" jours ",1),i.equipment.requires_deposit?(d(),u("p",Ce," Caution: "+l(p(i.equipment.deposit_amount*i.quantity)),1)):b("",!0),r(s(c),{variant:"ghost",class:"text-destructive",size:"sm",onClick:j=>A(i)},{default:a(()=>[r(s(G),{class:"h-4 w-4"}),t[10]||(t[10]=m(" Retirer "))]),_:2,__:[10]},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128)),e("div",qe,[e("span",ze,"Total pour "+l(o.organization.name),1),e("div",je,[e("p",$e,l(p(o.total)),1),o.deposit>0?(d(),u("p",Ve," Caution: "+l(p(o.deposit)),1)):b("",!0)])])]),_:2},1024)]),_:2},1024)]))),128))]),e("div",Le,[r(s(k),null,{default:a(()=>[r(s(T),null,{default:a(()=>[r(s(E),null,{default:a(()=>t[11]||(t[11]=[m("Récapitulatif de la réservation")])),_:1,__:[11]})]),_:1}),r(s(C),{class:"space-y-4"},{default:a(()=>[e("div",Me,[e("div",Se,[t[12]||(t[12]=e("span",null,"Coût de location",-1)),e("span",null,l(p(F.value)),1)]),e("div",Te,[t[13]||(t[13]=e("span",null,"Caution totale",-1)),e("span",null,l(p(I.value)),1)]),r(s(N)),t[14]||(t[14]=e("p",{class:"text-sm text-muted-foreground"}," La caution sera à régler directement avec le propriétaire lors de la remise du matériel. ",-1))]),t[17]||(t[17]=e("div",{class:"space-y-2"},[e("div",{class:"mt-4 p-4 bg-muted/50 rounded-lg border border-border"},[e("h4",{class:"font-medium mb-3 flex items-center gap-2"}," Comment fonctionne la réservation ? "),e("div",{class:"space-y-3 text-sm"},[e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"1"),e("p",null,'Vous notifiez les organisations propriétaires des équipements sélectionnés en cliquant sur le bouton "Confirmer ma demande".')]),e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"2"),e("p",null,"Les propriétaires valident ou refusent votre demande. Laissez-leur un peu de temps pour répondre.")]),e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"3"),e("p",null,"Vous recevez un email de chaque propriétaire avec leurs coordonnées pour finaliser la réservation si elle est acceptée. Vous recevez également un email si la réservation est refusée.")])])])],-1)),r(s(c),{class:"w-full",disabled:f.value,onClick:t[0]||(t[0]=o=>v.value=!0)},{default:a(()=>t[15]||(t[15]=[m(" Confirmer ma demande ")])),_:1,__:[15]},8,["disabled"]),r(s(c),{variant:"destructive",onClick:D,class:"w-full",disabled:f.value},{default:a(()=>t[16]||(t[16]=[m(" Vider le camion ")])),_:1,__:[16]},8,["disabled"])]),_:1,__:[17]})]),_:1}),r(s(P),{open:v.value,"onUpdate:open":t[2]||(t[2]=o=>v.value=o)},{default:a(()=>[r(s(H),{class:"sm:max-w-[600px]"},{default:a(()=>[r(s(J),null,{default:a(()=>[r(s(Q),null,{default:a(()=>t[18]||(t[18]=[m("Confirmation de votre demande")])),_:1,__:[18]}),r(s(R),null,{default:a(()=>t[19]||(t[19]=[m(" Veuillez prendre connaissance des informations importantes avant de confirmer votre demande. ")])),_:1,__:[19]})]),_:1}),e("div",Ee,[e("div",Fe,[e("div",Ie,[r(s(W),{class:"h-4 w-4"})]),t[20]||(t[20]=e("p",{class:"text-sm text-destructive"},"Les demandes de réservation de plus d'une semaine restées sans réponse seront automatiquement annulées.",-1))]),e("div",Ae,[e("div",De,[r(s(X),{class:"h-4 w-4"})]),t[21]||(t[21]=e("p",{class:"text-sm"},"Chaque demande faite à une organisation différente est traitée comme une réservation distincte.",-1))]),e("div",Ue,[e("div",Ne,[r(s(Y),{class:"h-4 w-4"})]),t[22]||(t[22]=e("p",{class:"text-sm"},"La plateforme agit uniquement comme intermédiaire et ne peut être tenue responsable des litiges entre les parties.",-1))]),e("div",Pe,[e("div",He,[r(s(re),{class:"h-4 w-4"})]),t[23]||(t[23]=e("p",{class:"text-sm"},"Il est de la responsabilité des utilisateurs de vérifier l'état et la conformité du matériel avant la location.",-1))]),e("div",Re,[e("div",Be,[r(s(ee),{class:"h-4 w-4"})]),t[24]||(t[24]=e("p",{class:"text-sm"},"La plateforme ne garantit pas la disponibilité des équipements et ne peut être tenue responsable des annulations.",-1))]),e("div",Je,[e("div",Qe,[r(s(se),{class:"h-4 w-4"})]),t[25]||(t[25]=e("p",{class:"text-sm"},"Les paiements et arrangements financiers se font directement avec les propriétaires des équipements, en dehors de la plateforme.",-1))])]),r(s(B),null,{default:a(()=>[r(s(c),{variant:"outline",onClick:t[1]||(t[1]=o=>v.value=!1)},{default:a(()=>t[26]||(t[26]=[m(" Annuler ")])),_:1,__:[26]}),r(s(c),{asChild:""},{default:a(()=>[r(s(L),{href:n.route("app.organizations.reservations.in.create")},{default:a(()=>t[27]||(t[27]=[m(" Je confirme ma demande ")])),_:1,__:[27]},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]))])]),_:1}))}};export{bt as default};
