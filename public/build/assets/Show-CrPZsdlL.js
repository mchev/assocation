import{r as V,b as h,y as N,c as L,o as d,w as r,l as e,k as u,i as a,u as s,S as M,p as c,F as S,v as T,s as l,f as b,J as k}from"./app-qa8um4kZ.js";import{_ as m}from"./index-BzBeTBtZ.js";import{_ as w,a as C}from"./CardContent.vue_vue_type_script_setup_true_lang-CMAkPWqV.js";import{_ as F,a as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-BOSAI4Wh.js";import{_ as H}from"./Separator.vue_vue_type_script_setup_true_lang-BAtTp3GY.js";import{_ as P,a as R}from"./DialogContent.vue_vue_type_script_setup_true_lang-BosUnCkY.js";import{_ as B,a as J}from"./DialogFooter.vue_vue_type_script_setup_true_lang-B99DSulJ.js";import{_ as Q,a as Z}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C1SPVpGF.js";import{T as G,c as K,g as O,t as p}from"./FlashMessage-CWixpSef.js";import{_ as W}from"./PublicLayout-DFuZG6He.js";import{c as y}from"./createLucideIcon-C0Kd60M4.js";import{T as X}from"./triangle-alert-BE0N4sQG.js";import{U as Y}from"./users-DcphG7lM.js";import{C as ee}from"./circle-alert-YNDeli5y.js";import{C as te}from"./credit-card-DHQIZ2UK.js";import"./Separator-BELC9T-Z.js";import"./Input.vue_vue_type_script_setup_true_lang-BFxz0zMI.js";import"./x-CyXp4GtK.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=y("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=y("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=y("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=y("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ne={class:"max-w-7xl mx-auto py-6"},oe={key:0,class:"flex flex-col items-center justify-center py-12"},le={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},de={class:"lg:col-span-2 space-y-6"},ue={class:"uppercase font-medium"},ce={class:"flex flex-wrap gap-6"},me={class:"relative"},fe=["src","alt"],pe={key:1,class:"w-12 h-12 lg:w-32 lg:h-32 bg-muted rounded-lg flex items-center justify-center"},ve={class:"flex-1"},_e={class:"text-lg font-semibold mb-2"},xe={class:"space-y-2 text-sm text-muted-foreground"},ye={class:"space-y-1"},ge={class:"flex items-center gap-2 mt-1"},he={class:"w-8 text-center"},be={key:0},ke={class:"lg:text-right space-y-2"},we={class:"text-lg font-semibold"},Ce={class:"text-sm"},qe={key:0,class:"text-sm text-muted-foreground"},je={class:"flex justify-between pt-4 border-t"},ze={class:"font-medium"},$e={class:"text-right"},Ve={class:"font-semibold"},Le={key:0,class:"text-sm text-muted-foreground"},Me={class:"lg:col-span-1 space-y-6"},Se={class:"space-y-2"},Te={class:"flex justify-between"},Fe={class:"flex justify-between"},Ee={class:"space-y-4 py-4"},Ie={class:"flex gap-3"},De={class:"flex-shrink-0 w-6 h-6 rounded-full bg-destructive/10 flex items-center justify-center text-destructive"},Ue={class:"flex gap-3"},Ae={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Ne={class:"flex gap-3"},He={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Pe={class:"flex gap-3"},Re={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Be={class:"flex gap-3"},Je={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Qe={class:"flex gap-3"},Ze={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},ft={__name:"Show",setup(Ge){const v=V(!1),_=V(!1),x=h(()=>N().props.items),q=i=>new Date(i).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),f=i=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),I=h(()=>{var i;return((i=x.value)==null?void 0:i.reduce((t,o)=>t+o.total,0))??0}),D=h(()=>{var i;return((i=x.value)==null?void 0:i.reduce((t,o)=>t+o.deposit,0))??0}),g=async i=>{if(!v.value){v.value=!0;try{await i()}finally{v.value=!1}}},j=(i,t)=>{t<1||g(()=>k.put(route("cart.update",i),{quantity:t},{onSuccess:()=>{p("Camion mis à jour",{description:"La quantité a été mise à jour avec succès."})},onError:()=>{p("Erreur",{description:"Une erreur s'est produite lors de la mise à jour de la quantité.",variant:"destructive"})}}))},U=i=>{confirm("Voulez-vous vraiment retirer cet article du camion ?")&&g(()=>k.delete(route("carts.remove",i.equipment.id),{data:{rental_start:i.rental_start,rental_end:i.rental_end}},{preserveScroll:!0,onSuccess:()=>{p("Article supprimé",{description:"L'article a été retiré de votre camion."})},onError:()=>{p("Erreur",{description:"Une erreur s'est produite lors de la suppression de l'article.",variant:"destructive"})}}))},A=()=>{confirm("Voulez-vous vraiment vider votre camion ?")&&g(()=>k.delete(route("carts.clear"),{onSuccess:()=>{p("Camion vidé",{description:"Tous les articles ont été retirés de votre camion."})},onError:()=>{p("Erreur",{description:"Une erreur s'est produite lors du vidage du camion.",variant:"destructive"})}}))};return(i,t)=>(d(),L(W,{title:"Mon camion",description:"Vérifier le chargement avant de confirmer votre demande"},{header:r(()=>t[3]||(t[3]=[e("div",{class:"max-w-7xl mx-auto"},[e("h1",{class:"text-xl font-semibold"},"Mon camion"),e("p",{class:"text-sm text-muted-foreground"}," Vérifiez bien les dates et les quantités avant de confirmer votre demande. ")],-1)])),default:r(()=>[e("div",ne,[x.value.length===0?(d(),u("div",oe,[a(s(G),{class:"h-16 w-16 text-muted-foreground mb-4"}),t[5]||(t[5]=e("h2",{class:"text-2xl font-semibold mb-2"},"Votre camion est vide",-1)),t[6]||(t[6]=e("p",{class:"text-muted-foreground mb-6"},"Ajoutez du matériel à votre camion pour commencer",-1)),a(s(m),{asChild:""},{default:r(()=>[a(s(M),{href:i.route("home")},{default:r(()=>t[4]||(t[4]=[c(" Parcourir le matériel disponible ")])),_:1,__:[4]},8,["href"])]),_:1})])):(d(),u("div",le,[e("div",de,[(d(!0),u(S,null,T(x.value,o=>(d(),u("div",{key:o.organization.id,class:"space-y-4"},[a(s(w),{class:"bg-secondary/50"},{default:r(()=>[a(s(F),null,{default:r(()=>[a(s(E),null,{default:r(()=>[e("span",ue,l(o.organization.name),1)]),_:2},1024)]),_:2},1024),a(s(C),{class:"space-y-4"},{default:r(()=>[(d(!0),u(S,null,T(o.items,(n,z)=>(d(),L(s(w),{key:n.equipment.id,class:"group"},{default:r(()=>[a(s(C),{class:"px-4"},{default:r(()=>[e("div",ce,[e("div",me,[n.image?(d(),u("img",{key:0,src:n.image,alt:n.equipment.name,class:"w-12 h-12 lg:w-32 lg:h-32 object-cover rounded-lg"},null,8,fe)):(d(),u("div",pe,[a(s(se),{class:"h-10 w-10 text-muted-foreground"})]))]),e("div",ve,[e("h3",_e,l(n.equipment.name),1),e("div",xe,[e("p",null," du "+l(q(n.rental_start))+" au "+l(q(n.rental_end)),1),e("div",ye,[t[7]||(t[7]=e("span",{class:"font-medium"},"Quantité:",-1)),e("div",ge,[a(s(m),{variant:"outline",size:"icon",onClick:$=>j(z,n.quantity-1),disabled:n.quantity<=1,class:"transition-opacity"},{default:r(()=>[a(s(re),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),e("span",he,l(n.quantity),1),a(s(m),{variant:"outline",size:"icon",onClick:$=>j(z,n.quantity+1),class:"transition-opacity"},{default:r(()=>[a(s(K),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),n.notes?(d(),u("p",be,[t[8]||(t[8]=e("span",{class:"font-medium"},"Notes:",-1)),t[9]||(t[9]=e("br",null,null,-1)),c(" "+l(n.notes),1)])):b("",!0)])]),e("div",ke,[e("p",we,l(f(n.total)),1),e("p",Ce,l(f(n.price))+" x "+l(n.days)+" jours ",1),n.equipment.requires_deposit?(d(),u("p",qe," Caution: "+l(f(n.equipment.deposit_amount*n.quantity)),1)):b("",!0),a(s(m),{variant:"ghost",class:"text-destructive",size:"sm",onClick:$=>U(n)},{default:r(()=>[a(s(O),{class:"h-4 w-4"}),t[10]||(t[10]=c(" Retirer "))]),_:2,__:[10]},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128)),e("div",je,[e("span",ze,"Total pour "+l(o.organization.name),1),e("div",$e,[e("p",Ve,l(f(o.total)),1),o.deposit>0?(d(),u("p",Le," Caution: "+l(f(o.deposit)),1)):b("",!0)])])]),_:2},1024)]),_:2},1024)]))),128))]),e("div",Me,[a(s(w),null,{default:r(()=>[a(s(F),null,{default:r(()=>[a(s(E),null,{default:r(()=>t[11]||(t[11]=[c("Récapitulatif de la réservation")])),_:1,__:[11]})]),_:1}),a(s(C),{class:"space-y-4"},{default:r(()=>[e("div",Se,[e("div",Te,[t[12]||(t[12]=e("span",null,"Coût de location",-1)),e("span",null,l(f(I.value)),1)]),e("div",Fe,[t[13]||(t[13]=e("span",null,"Caution totale",-1)),e("span",null,l(f(D.value)),1)]),a(s(H)),t[14]||(t[14]=e("p",{class:"text-sm text-muted-foreground"}," La caution sera à régler directement avec le propriétaire lors de la remise du matériel. ",-1))]),t[17]||(t[17]=e("div",{class:"space-y-2"},[e("div",{class:"mt-4 p-4 bg-muted/50 rounded-lg border border-border"},[e("h4",{class:"font-medium mb-3 flex items-center gap-2"}," Comment fonctionne la réservation ? "),e("div",{class:"space-y-3 text-sm"},[e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"1"),e("p",null,'Vous notifiez les organisations propriétaires des équipements sélectionnés en cliquant sur le bouton "Confirmer ma demande".')]),e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"2"),e("p",null,"Les propriétaires valident ou refusent votre demande. Laissez-leur un peu de temps pour répondre.")]),e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"3"),e("p",null,"Vous recevez un email de chaque propriétaire avec leurs coordonnées pour finaliser la réservation si elle est acceptée. Vous recevez également un email si la réservation est refusée.")])])])],-1)),a(s(m),{class:"w-full",disabled:v.value,onClick:t[0]||(t[0]=o=>_.value=!0)},{default:r(()=>t[15]||(t[15]=[c(" Confirmer ma demande ")])),_:1,__:[15]},8,["disabled"]),a(s(m),{variant:"destructive",onClick:A,class:"w-full",disabled:v.value},{default:r(()=>t[16]||(t[16]=[c(" Vider le camion ")])),_:1,__:[16]},8,["disabled"])]),_:1,__:[17]})]),_:1}),a(s(P),{open:_.value,"onUpdate:open":t[2]||(t[2]=o=>_.value=o)},{default:r(()=>[a(s(R),{class:"sm:max-w-[600px]"},{default:r(()=>[a(s(Q),null,{default:r(()=>[a(s(Z),null,{default:r(()=>t[18]||(t[18]=[c("Confirmation de votre demande")])),_:1,__:[18]}),a(s(B),null,{default:r(()=>t[19]||(t[19]=[c(" Veuillez prendre connaissance des informations importantes avant de confirmer votre demande. ")])),_:1,__:[19]})]),_:1}),e("div",Ee,[e("div",Ie,[e("div",De,[a(s(X),{class:"h-4 w-4"})]),t[20]||(t[20]=e("p",{class:"text-sm text-destructive"},"Les demandes de réservation en attente depuis plus d'une semaine seront automatiquement annulées.",-1))]),e("div",Ue,[e("div",Ae,[a(s(Y),{class:"h-4 w-4"})]),t[21]||(t[21]=e("p",{class:"text-sm"},"Chaque demande faite à une organisation différente est traitée comme une réservation distincte.",-1))]),e("div",Ne,[e("div",He,[a(s(ie),{class:"h-4 w-4"})]),t[22]||(t[22]=e("p",{class:"text-sm"},"La plateforme agit uniquement comme intermédiaire et ne peut être tenue responsable des litiges entre les parties.",-1))]),e("div",Pe,[e("div",Re,[a(s(ae),{class:"h-4 w-4"})]),t[23]||(t[23]=e("p",{class:"text-sm"},"Il est de la responsabilité des utilisateurs de vérifier l'état et la conformité du matériel avant la location.",-1))]),e("div",Be,[e("div",Je,[a(s(ee),{class:"h-4 w-4"})]),t[24]||(t[24]=e("p",{class:"text-sm"},"La plateforme ne garantit pas la disponibilité des équipements et ne peut être tenue responsable des annulations.",-1))]),e("div",Qe,[e("div",Ze,[a(s(te),{class:"h-4 w-4"})]),t[25]||(t[25]=e("p",{class:"text-sm"},"Les paiements et arrangements financiers se font directement avec les propriétaires des équipements, en dehors de la plateforme.",-1))])]),a(s(J),null,{default:r(()=>[a(s(m),{variant:"outline",onClick:t[1]||(t[1]=o=>_.value=!1)},{default:r(()=>t[26]||(t[26]=[c(" Annuler ")])),_:1,__:[26]}),a(s(m),{asChild:""},{default:r(()=>[a(s(M),{href:i.route("checkout.index")},{default:r(()=>t[27]||(t[27]=[c(" Je confirme ma demande ")])),_:1,__:[27]},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]))])]),_:1}))}};export{ft as default};
