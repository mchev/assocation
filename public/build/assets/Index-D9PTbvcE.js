import{b as R,y as H,z as P,c as u,o as n,w as s,l as i,i as l,u as t,A as X,p as r,k as $,F as U,v as F,s as f,f as I,H as v,x as G,S as J}from"./app-CDZTLD2r.js";import{_ as K}from"./AppLayout-ph4p2q2E.js";import{_ as C}from"./index-DrmbqrP0.js";import{_ as M,a as O}from"./CardContent.vue_vue_type_script_setup_true_lang-Dd_nJnip.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-pGdLm8n8.js";import{_ as w}from"./Label.vue_vue_type_script_setup_true_lang-CSgQWuFY.js";import{_ as W,a as Y,b as E,c as b,d as Z,e as y}from"./TableHeader.vue_vue_type_script_setup_true_lang-DfPPKc_R.js";import{_ as k,a as V,b as q,c as z,d}from"./SelectValue.vue_vue_type_script_setup_true_lang-DCvVNfNe.js";import{C as h,b as ee}from"./FlashMessage-O1b9eN3z.js";import{A as te,a as se,b as le}from"./arrow-up-BdpJgUam.js";import"./x-BizFJRUX.js";import"./createLucideIcon-D27TTLAa.js";import"./chevron-down-B72Mvch9.js";import"./clamp-DOQwPC9g.js";import"./check-CswsBNF0.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./loader-circle-DSX6gelI.js";const ae={class:"flex justify-between items-center"},ie={class:"font-semibold text-xl leading-tight"},oe={class:"py-12"},re={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ne={class:"flex flex-wrap items-end gap-6"},ue={class:"flex gap-2 ml-auto"},de={key:0,class:"text-center py-12"},me={key:1},fe={class:"flex items-center space-x-2"},pe={class:"flex items-center space-x-2"},_e={class:"flex items-center space-x-2"},ce={class:"flex items-center space-x-2"},ve={class:"flex items-center space-x-2"},xe={class:"text-sm text-muted-foreground truncate max-w-60"},ge={class:"max-w-40 flex flex-col"},be={class:"truncate font-medium"},ye={class:"text-xs text-muted-foreground"},Ee={__name:"Index",props:{organization:{type:Object,required:!0},equipments:{type:Object,required:!0},filters:{type:Object,required:!0},allCategories:{type:Array,required:!0}},setup(p){var N,j,D,S,T,B;const c=p,A=R(()=>H().props.auth.user.can),o=P({search:((N=c.filters)==null?void 0:N.search)??"",category:((j=c.filters)==null?void 0:j.category)??null,condition:((D=c.filters)==null?void 0:D.condition)??null,availability:((S=c.filters)==null?void 0:S.availability)??null,sort:((T=c.filters)==null?void 0:T.sort)??"name",direction:((B=c.filters)==null?void 0:B.direction)??"asc"}),_=()=>{o.get(route("app.organizations.equipments.index"),{preserveState:!0,preserveScroll:!0})},L=()=>{o.search="",o.category=null,o.condition=null,o.availability=null,o.sort="name",o.direction="asc",_()},x=m=>{o.sort===m?o.direction=o.direction==="asc"?"desc":"asc":(o.sort=m,o.direction="asc"),_()},g=m=>o.sort!==m?te:o.direction==="asc"?se:le;return(m,e)=>(n(),u(K,{title:"Matériel",description:"Liste du matériel de l'organisation"},{header:s(()=>[i("div",ae,[i("h2",ie," Inventaire du matériel de "+f(p.organization.name)+" ("+f(p.equipments.total)+") ",1),A.value.equipments.create?(n(),u(t(C),{key:0,asChild:""},{default:s(()=>[l(t(J),{href:m.route("app.organizations.equipments.create")},{default:s(()=>e[9]||(e[9]=[r(" Ajouter du matériel ")])),_:1,__:[9]},8,["href"])]),_:1})):I("",!0)])]),default:s(()=>[i("div",oe,[i("div",re,[l(t(M),{class:"mb-6"},{default:s(()=>[l(t(O),{class:"p-4"},{default:s(()=>[i("form",{onSubmit:X(_,["prevent"])},[i("div",ne,[i("div",null,[l(t(w),{for:"search",class:"text-sm"},{default:s(()=>e[10]||(e[10]=[r("Rechercher")])),_:1,__:[10]}),l(t(Q),{id:"search",modelValue:t(o).search,"onUpdate:modelValue":e[0]||(e[0]=a=>t(o).search=a),type:"text",placeholder:"Nom, catégorie...",onInput:_},null,8,["modelValue"])]),i("div",null,[l(t(w),{for:"category",class:"text-sm"},{default:s(()=>e[11]||(e[11]=[r("Catégorie")])),_:1,__:[11]}),l(t(k),{modelValue:t(o).category,"onUpdate:modelValue":[e[1]||(e[1]=a=>t(o).category=a),_]},{default:s(()=>[l(t(V),{class:"h-9"},{default:s(()=>[l(t(q),{placeholder:"Toutes"})]),_:1}),l(t(z),null,{default:s(()=>[l(t(d),{value:null},{default:s(()=>e[12]||(e[12]=[r("Toutes les catégories")])),_:1,__:[12]}),(n(!0),$(U,null,F(p.allCategories,a=>(n(),u(t(d),{key:a.id,value:a.name},{default:s(()=>[r(f(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",null,[l(t(w),{for:"condition",class:"text-sm"},{default:s(()=>e[13]||(e[13]=[r("État")])),_:1,__:[13]}),l(t(k),{modelValue:t(o).condition,"onUpdate:modelValue":[e[2]||(e[2]=a=>t(o).condition=a),_]},{default:s(()=>[l(t(V),{class:"h-9"},{default:s(()=>[l(t(q),{placeholder:"Tous"})]),_:1}),l(t(z),null,{default:s(()=>[l(t(d),{value:null},{default:s(()=>e[14]||(e[14]=[r("Tous les états")])),_:1,__:[14]}),l(t(d),{value:"new"},{default:s(()=>e[15]||(e[15]=[r("Neuf")])),_:1,__:[15]}),l(t(d),{value:"good"},{default:s(()=>e[16]||(e[16]=[r("Bon")])),_:1,__:[16]}),l(t(d),{value:"fair"},{default:s(()=>e[17]||(e[17]=[r("Moyen")])),_:1,__:[17]}),l(t(d),{value:"poor"},{default:s(()=>e[18]||(e[18]=[r("Mauvais")])),_:1,__:[18]})]),_:1})]),_:1},8,["modelValue"])]),i("div",null,[l(t(w),{for:"availability",class:"text-sm"},{default:s(()=>e[19]||(e[19]=[r("Disponibilité")])),_:1,__:[19]}),l(t(k),{modelValue:t(o).availability,"onUpdate:modelValue":[e[3]||(e[3]=a=>t(o).availability=a),_]},{default:s(()=>[l(t(V),{class:"h-9"},{default:s(()=>[l(t(q),{placeholder:"Tous"})]),_:1}),l(t(z),null,{default:s(()=>[l(t(d),{value:null},{default:s(()=>e[20]||(e[20]=[r("Tous")])),_:1,__:[20]}),l(t(d),{value:"available"},{default:s(()=>e[21]||(e[21]=[r("Disponible")])),_:1,__:[21]}),l(t(d),{value:"unavailable"},{default:s(()=>e[22]||(e[22]=[r("Non disponible")])),_:1,__:[22]})]),_:1})]),_:1},8,["modelValue"])]),i("div",ue,[l(t(C),{type:"button",variant:"outline",onClick:L,size:"sm",class:"h-9"},{default:s(()=>e[23]||(e[23]=[r(" Réinitialiser ")])),_:1,__:[23]}),l(t(C),{type:"submit",variant:"default",size:"sm",class:"h-9"},{default:s(()=>e[24]||(e[24]=[r(" Filtrer ")])),_:1,__:[24]})])])],32)]),_:1})]),_:1}),l(t(M),null,{default:s(()=>[l(t(O),{class:"p-6"},{default:s(()=>[p.equipments.data.length===0?(n(),$("div",de,[e[26]||(e[26]=i("p",{class:"text-muted-foreground text-lg"}," Aucun matériel trouvé ",-1)),A.value.equipments.create?(n(),u(t(C),{key:0,as:"a",href:m.route("app.organizations.equipments.create",p.organization),variant:"default",class:"mt-4"},{default:s(()=>e[25]||(e[25]=[r(" Ajouter du matériel ")])),_:1,__:[25]},8,["href"])):I("",!0)])):(n(),$("div",me,[l(t(W),null,{default:s(()=>[l(t(Y),null,{default:s(()=>[l(t(E),null,{default:s(()=>[l(t(b),{class:"cursor-pointer hover:bg-muted/50",onClick:e[4]||(e[4]=a=>x("name"))},{default:s(()=>[i("div",fe,[e[27]||(e[27]=i("span",null,"Nom",-1)),(n(),u(v(g("name")),{class:"w-4 h-4"}))])]),_:1}),l(t(b),{class:"cursor-pointer hover:bg-muted/50",onClick:e[5]||(e[5]=a=>x("category"))},{default:s(()=>[i("div",pe,[e[28]||(e[28]=i("span",null,"Catégorie",-1)),(n(),u(v(g("category")),{class:"w-4 h-4"}))])]),_:1}),l(t(b),{class:"cursor-pointer hover:bg-muted/50",onClick:e[6]||(e[6]=a=>x("is_available"))},{default:s(()=>[i("div",_e,[e[29]||(e[29]=i("span",null,"Dispo.",-1)),(n(),u(v(g("is_available")),{class:"w-4 h-4"}))])]),_:1}),l(t(b),{class:"cursor-pointer hover:bg-muted/50",onClick:e[7]||(e[7]=a=>x("depot"))},{default:s(()=>[i("div",ce,[e[30]||(e[30]=i("span",null,"Emplacement",-1)),(n(),u(v(g("depot")),{class:"w-4 h-4"}))])]),_:1}),l(t(b),{class:"cursor-pointer hover:bg-muted/50",onClick:e[8]||(e[8]=a=>x("rental_price"))},{default:s(()=>[i("div",ve,[e[31]||(e[31]=i("span",null,"Prix/jour",-1)),(n(),u(v(g("rental_price")),{class:"w-4 h-4"}))])]),_:1})]),_:1})]),_:1}),l(t(Z),null,{default:s(()=>[(n(!0),$(U,null,F(p.equipments.data,a=>(n(),u(t(E),{key:a.id,class:"group cursor-pointer hover:bg-muted/50",onClick:$e=>m.$inertia.visit(m.route("app.organizations.equipments.edit",a))},{default:s(()=>[l(t(y),{class:"font-medium"},{default:s(()=>[i("div",null,[r(f(a.name)+" ",1),i("p",xe,f(a.description),1)])]),_:2},1024),l(t(y),null,{default:s(()=>[r(f(a.category.name),1)]),_:2},1024),l(t(y),{class:"text-center"},{default:s(()=>[(n(),u(v(a.is_available?t(h):t(ee)),{class:G([a.is_available?"text-success":"text-destructive","w-4 h-4 mx-auto"])},null,8,["class"]))]),_:2},1024),l(t(y),null,{default:s(()=>[i("div",ge,[i("span",be,f(a.depot.name),1),i("span",ye,f(a.depot.city),1)])]),_:2},1024),l(t(y),null,{default:s(()=>[r(f(a.rental_price)+"€",1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]))]),_:1})]),_:1})])])]),_:1}))}};export{Ee as default};
