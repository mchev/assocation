import{r as U,b as w,y as A,P as B,c as $,o as l,w as r,l as e,k as d,i as s,u as a,S as E,p as m,F as I,v as S,f as x,s as i,J as C}from"./app-CcIGVFaD.js";import{_ as p}from"./index-nNqTAf33.js";import{_ as g,a as h}from"./CardContent.vue_vue_type_script_setup_true_lang-CmHbaDyh.js";import{_ as j,a as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-CikcI3Sz.js";import{_ as M}from"./Separator.vue_vue_type_script_setup_true_lang-BC78-Mgw.js";import{T as R,c as J,g as Q,U as H,t as f}from"./FlashMessage-DBjqyuIl.js";import{_ as G}from"./PublicLayout-xSluyt06.js";import{c as T}from"./createLucideIcon-Cz3fWJyD.js";import{T as K}from"./triangle-alert-DecPkjPE.js";import{C as O}from"./credit-card-ChQLxwg0.js";import"./Separator-B-wWy3P2.js";import"./Input.vue_vue_type_script_setup_true_lang-BRVcKG_C.js";import"./x-TUNIbFr5.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=T("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=T("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Y={class:"container py-6"},Z={key:0,class:"flex flex-col items-center justify-center py-12"},ee={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},te={class:"lg:col-span-2 space-y-6"},se=["src","alt"],ae={class:"flex gap-6"},re={class:"relative"},oe=["src","alt"],ne={key:1,class:"w-32 h-32 bg-muted rounded-lg flex items-center justify-center"},ie={class:"flex-1"},le={class:"text-lg font-semibold mb-2"},de={class:"space-y-2 text-sm text-muted-foreground"},ue={class:"space-y-1"},ce={class:"flex items-center gap-2 mt-1"},me={class:"w-8 text-center"},pe={key:0},fe={class:"text-right"},_e={class:"text-lg font-semibold"},ve={class:"text-sm"},ye={key:0,class:"text-sm text-muted-foreground"},xe={class:"flex justify-between pt-4 border-t"},ge={class:"font-medium"},he={class:"text-right"},be={class:"font-semibold"},ke={key:0,class:"text-sm text-muted-foreground"},we={class:"space-y-4"},Ce={class:"flex gap-3"},je={class:"flex-shrink-0 w-6 h-6 rounded-full bg-destructive/10 flex items-center justify-center text-destructive"},qe={class:"flex gap-3"},ze={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Le={class:"flex gap-3"},Ve={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},$e={class:"lg:col-span-1"},Ee={class:"space-y-2"},Ie={class:"flex justify-between"},Se={class:"flex justify-between"},Ke={__name:"Show",setup(Te){const _=U(!1),y=w(()=>A().props.items),z=n=>new Date(n).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),c=n=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(n),D=w(()=>{var n;return((n=y.value)==null?void 0:n.reduce((t,v)=>t+v.total,0))??0}),F=w(()=>{var n;return((n=y.value)==null?void 0:n.reduce((t,v)=>t+v.deposit,0))??0}),b=async n=>{if(!_.value){_.value=!0;try{await n()}finally{_.value=!1}}},L=(n,t)=>{t<1||b(()=>C.put(route("cart.update",n),{quantity:t},{onSuccess:()=>{f("Camion mis à jour",{description:"La quantité a été mise à jour avec succès."})},onError:()=>{f("Erreur",{description:"Une erreur s'est produite lors de la mise à jour de la quantité.",variant:"destructive"})}}))},P=n=>{b(()=>C.delete(route("cart.remove",n),{onSuccess:()=>{f("Article supprimé",{description:"L'article a été retiré de votre camion."})},onError:()=>{f("Erreur",{description:"Une erreur s'est produite lors de la suppression de l'article.",variant:"destructive"})}}))},N=()=>{b(()=>C.delete(route("cart.clear"),{onSuccess:()=>{f("Camion vidé",{description:"Tous les articles ont été retirés de votre camion."})},onError:()=>{f("Erreur",{description:"Une erreur s'est produite lors du vidage du camion.",variant:"destructive"})}}))};return(n,t)=>{const v=B("Info");return l(),$(G,null,{default:r(()=>[e("div",Y,[y.value.length===0?(l(),d("div",Z,[s(a(R),{class:"h-16 w-16 text-muted-foreground mb-4"}),t[1]||(t[1]=e("h2",{class:"text-2xl font-semibold mb-2"},"Votre camion est vide",-1)),t[2]||(t[2]=e("p",{class:"text-muted-foreground mb-6"},"Ajoutez du matériel à votre camion pour commencer",-1)),s(a(p),{asChild:""},{default:r(()=>[s(a(E),{href:n.route("home")},{default:r(()=>t[0]||(t[0]=[m(" Parcourir le matériel disponible ")])),_:1,__:[0]},8,["href"])]),_:1})])):(l(),d("div",ee,[e("div",te,[(l(!0),d(I,null,S(y.value,u=>(l(),d("div",{key:u.organization.id,class:"space-y-4"},[s(a(g),null,{default:r(()=>[s(a(j),null,{default:r(()=>[s(a(q),{class:"flex items-center gap-2"},{default:r(()=>[u.organization.logo?(l(),d("img",{key:0,src:u.organization.logo,alt:u.organization.name,class:"w-8 h-8 rounded-full object-cover"},null,8,se)):x("",!0),e("span",null,i(u.organization.name),1)]),_:2},1024)]),_:2},1024),s(a(h),{class:"space-y-4"},{default:r(()=>[(l(!0),d(I,null,S(u.items,(o,k)=>(l(),$(a(g),{key:o.equipment.id,class:"group"},{default:r(()=>[s(a(h),{class:"p-6"},{default:r(()=>[e("div",ae,[e("div",re,[o.image?(l(),d("img",{key:0,src:o.image,alt:o.equipment.name,class:"w-32 h-32 object-cover rounded-lg"},null,8,oe)):(l(),d("div",ne,[s(a(W),{class:"h-10 w-10 text-muted-foreground"})]))]),e("div",ie,[e("h3",le,i(o.equipment.name),1),e("div",de,[e("p",null,[t[3]||(t[3]=e("span",{class:"font-medium"},"Période de location:",-1)),t[4]||(t[4]=e("br",null,null,-1)),m(" "+i(z(o.rental_start))+" - "+i(z(o.rental_end)),1)]),e("div",ue,[t[5]||(t[5]=e("span",{class:"font-medium"},"Quantité:",-1)),e("div",ce,[s(a(p),{variant:"outline",size:"icon",onClick:V=>L(k,o.quantity-1),disabled:o.quantity<=1,class:"transition-opacity"},{default:r(()=>[s(a(X),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),e("span",me,i(o.quantity),1),s(a(p),{variant:"outline",size:"icon",onClick:V=>L(k,o.quantity+1),class:"transition-opacity"},{default:r(()=>[s(a(J),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),o.notes?(l(),d("p",pe,[t[6]||(t[6]=e("span",{class:"font-medium"},"Notes:",-1)),t[7]||(t[7]=e("br",null,null,-1)),m(" "+i(o.notes),1)])):x("",!0)])]),e("div",fe,[e("p",_e,i(c(o.total)),1),e("p",ve,i(c(o.price))+" x "+i(o.days)+" jours ",1),o.equipment.requires_deposit?(l(),d("p",ye," Caution: "+i(c(o.equipment.deposit_amount*o.quantity)),1)):x("",!0),s(a(p),{variant:"ghost",size:"icon",class:"mt-4 opacity-0 group-hover:opacity-100 transition-opacity",onClick:V=>P(k)},{default:r(()=>[s(a(Q),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128)),e("div",xe,[e("span",ge,"Total pour "+i(u.organization.name),1),e("div",he,[e("p",be,i(c(u.total)),1),u.deposit>0?(l(),d("p",ke," Caution: "+i(c(u.deposit)),1)):x("",!0)])])]),_:2},1024)]),_:2},1024)]))),128)),s(a(g),null,{default:r(()=>[s(a(j),null,{default:r(()=>[s(a(q),{class:"flex items-center gap-2"},{default:r(()=>[s(v,{class:"h-5 w-5 text-primary"}),t[8]||(t[8]=m(" Informations importantes "))]),_:1,__:[8]})]),_:1}),s(a(h),null,{default:r(()=>[e("div",we,[e("div",Ce,[e("div",je,[s(a(K),{class:"h-4 w-4"})]),t[9]||(t[9]=e("p",{class:"text-sm text-orange-500"},"Les demandes de réservation en attente depuis plus d'une semaine seront automatiquement annulées.",-1))]),e("div",qe,[e("div",ze,[s(a(H),{class:"h-4 w-4"})]),t[10]||(t[10]=e("p",{class:"text-sm"},"Vous pouvez consulter vos réservations en cours dans votre espace personnel.",-1))]),e("div",Le,[e("div",Ve,[s(a(O),{class:"h-4 w-4"})]),t[11]||(t[11]=e("p",{class:"text-sm"},"Les paiements et arrangements financiers se font directement avec les propriétaires des équipements, en dehors de la plateforme.",-1))])])]),_:1})]),_:1})]),e("div",$e,[s(a(g),null,{default:r(()=>[s(a(j),null,{default:r(()=>[s(a(q),null,{default:r(()=>t[12]||(t[12]=[m("Récapitulatif de la réservation")])),_:1,__:[12]})]),_:1}),s(a(h),{class:"space-y-4"},{default:r(()=>[e("div",Ee,[e("div",Ie,[t[13]||(t[13]=e("span",null,"Coût de location",-1)),e("span",null,i(c(D.value)),1)]),e("div",Se,[t[14]||(t[14]=e("span",null,"Caution totale",-1)),e("span",null,i(c(F.value)),1)]),s(a(M)),t[15]||(t[15]=e("p",{class:"text-sm text-muted-foreground"}," La caution sera à régler directement avec le propriétaire lors de la remise du matériel. ",-1))]),t[18]||(t[18]=e("div",{class:"space-y-2"},[e("div",{class:"mt-4 p-4 bg-muted/50 rounded-lg border border-border"},[e("h4",{class:"font-medium mb-3 flex items-center gap-2"}," Comment fonctionne la réservation ? "),e("div",{class:"space-y-3 text-sm"},[e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"1"),e("p",null,'Vous notifiez les propriétaires des équipements sélectionnés en cliquant sur le bouton "Confirmer ma demande".')]),e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"2"),e("p",null,"Les propriétaires valident ou refusent votre demande. Laissez-leur un peu de temps pour répondre.")]),e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"3"),e("p",null,"Vous recevez un email de chaque propriétaire avec leurs coordonnées pour finaliser la réservation si elle est acceptée. Vous recevez également un email si la réservation est refusée.")])])])],-1)),s(a(p),{asChild:"",class:"w-full",disabled:_.value},{default:r(()=>[s(a(E),{href:n.route("checkout.index")},{default:r(()=>t[16]||(t[16]=[m(" Confirmer ma demande ")])),_:1,__:[16]},8,["href"])]),_:1},8,["disabled"]),s(a(p),{variant:"destructive",onClick:N,class:"w-full",disabled:_.value},{default:r(()=>t[17]||(t[17]=[m(" Vider le camion ")])),_:1,__:[17]},8,["disabled"])]),_:1,__:[18]})]),_:1})])]))])]),_:1})}}};export{Ke as default};
