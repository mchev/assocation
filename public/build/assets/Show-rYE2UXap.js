import{r as F,b as g,z as N,c as D,o as u,w as r,l as e,k as v,i as n,u as o,S as $,p as l,F as T,v as V,s as i,f as z,J as b}from"./app-DH6RXXGs.js";import{_ as c}from"./index-CTqwGJRd.js";import{_ as j,a as S}from"./CardContent.vue_vue_type_script_setup_true_lang-CAwvMbEg.js";import{_ as I,a as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-DQ71zL3d.js";import{_ as B}from"./Separator.vue_vue_type_script_setup_true_lang-C3B2-0VF.js";import{g as M,_ as R,c as U,T as A,t as d}from"./FlashMessage-C-QufXFc.js";import{_ as J}from"./PublicLayout-DRwWddXW.js";import{c as Q}from"./createLucideIcon-C0FVayBN.js";import"./Separator-CQF127tT.js";import"./Input.vue_vue_type_script_setup_true_lang-D_wtjMph.js";import"./x-DX4p8ZEw.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=Q("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]),H={class:"container py-6"},K={key:0,class:"flex flex-col items-center justify-center py-12"},O={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},W={class:"lg:col-span-2 space-y-6"},X={class:"flex gap-6"},Y={class:"relative"},Z=["src","alt"],tt={class:"flex-1"},et={class:"text-lg font-semibold mb-2"},st={class:"space-y-2 text-sm text-muted-foreground"},at={class:"space-y-1"},ot={class:"flex items-center gap-2 mt-1"},nt={class:"w-8 text-center"},rt={key:0},it={class:"text-right"},lt={class:"text-lg font-semibold"},ut={class:"text-sm text-muted-foreground"},ct={class:"lg:col-span-1"},dt={class:"space-y-2"},pt={class:"flex justify-between"},mt={class:"flex justify-between"},ft={class:"flex justify-between font-semibold"},_t={class:"space-y-2"},jt={__name:"Show",setup(vt){const p=F(!1),_=g(()=>N().props.cart),h=a=>new Date(a).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),m=a=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(a),x=a=>{const t=new Date(a.rental_start),s=new Date(a.rental_end),f=Math.ceil((s-t)/(1e3*60*60*24))+1;return a.equipment.price*f*a.quantity},w=g(()=>{var a;return((a=_.value)==null?void 0:a.reduce((t,s)=>t+x(s),0))??0}),k=g(()=>{var a;return((a=_.value)==null?void 0:a.reduce((t,s)=>t+s.equipment.deposit*s.quantity,0))??0}),y=async a=>{if(!p.value){p.value=!0;try{await a()}finally{p.value=!1}}},q=(a,t)=>{t<1||y(()=>b.put(route("cart.update",a),{quantity:t},{onSuccess:()=>{d("Camion mis à jour",{description:"La quantité a été mise à jour avec succès."})},onError:()=>{d("Erreur",{description:"Une erreur s'est produite lors de la mise à jour de la quantité.",variant:"destructive"})}}))},E=a=>{y(()=>b.delete(route("cart.remove",a),{onSuccess:()=>{d("Article supprimé",{description:"L'article a été retiré de votre camion."})},onError:()=>{d("Erreur",{description:"Une erreur s'est produite lors de la suppression de l'article.",variant:"destructive"})}}))},P=()=>{y(()=>b.delete(route("cart.clear"),{onSuccess:()=>{d("Camion vidé",{description:"Tous les articles ont été retirés de votre camion."})},onError:()=>{d("Erreur",{description:"Une erreur s'est produite lors du vidage du camion.",variant:"destructive"})}}))};return(a,t)=>(u(),D(J,null,{default:r(()=>[e("div",H,[_.value.length===0?(u(),v("div",K,[n(o(M),{class:"h-16 w-16 text-muted-foreground mb-4"}),t[1]||(t[1]=e("h2",{class:"text-2xl font-semibold mb-2"},"Votre camion est vide",-1)),t[2]||(t[2]=e("p",{class:"text-muted-foreground mb-6"},"Ajoutez du matériel à votre camion pour commencer",-1)),n(o(c),{asChild:""},{default:r(()=>[n(o($),{href:a.route("home")},{default:r(()=>t[0]||(t[0]=[l(" Parcourir le matériel ")])),_:1,__:[0]},8,["href"])]),_:1})])):(u(),v("div",O,[e("div",W,[(u(!0),v(T,null,V(_.value,(s,f)=>(u(),D(o(j),{key:s.equipment.id,class:"group"},{default:r(()=>[n(o(S),{class:"p-6"},{default:r(()=>[e("div",X,[e("div",Y,[e("img",{src:s.equipment.image,alt:s.equipment.name,class:"w-32 h-32 object-cover rounded-lg"},null,8,Z),n(o(R),{class:"absolute top-2 right-2",variant:s.equipment.is_available?"success":"destructive"},{default:r(()=>[l(i(s.equipment.is_available?"Disponible":"Non disponible"),1)]),_:2},1032,["variant"])]),e("div",tt,[e("h3",et,i(s.equipment.name),1),e("div",st,[e("p",null,[t[3]||(t[3]=e("span",{class:"font-medium"},"Période de location:",-1)),t[4]||(t[4]=e("br",null,null,-1)),l(" "+i(h(s.rental_start))+" - "+i(h(s.rental_end)),1)]),e("div",at,[t[5]||(t[5]=e("span",{class:"font-medium"},"Quantité:",-1)),e("div",ot,[n(o(c),{variant:"outline",size:"icon",onClick:C=>q(f,s.quantity-1),disabled:s.quantity<=1,class:"transition-opacity"},{default:r(()=>[n(o(G),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),e("span",nt,i(s.quantity),1),n(o(c),{variant:"outline",size:"icon",onClick:C=>q(f,s.quantity+1),class:"transition-opacity"},{default:r(()=>[n(o(U),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),s.notes?(u(),v("p",rt,[t[6]||(t[6]=e("span",{class:"font-medium"},"Notes:",-1)),t[7]||(t[7]=e("br",null,null,-1)),l(" "+i(s.notes),1)])):z("",!0)])]),e("div",it,[e("p",lt,i(m(x(s))),1),e("p",ut," Caution: "+i(m(s.equipment.deposit*s.quantity)),1),n(o(c),{variant:"ghost",size:"icon",class:"mt-4 opacity-0 group-hover:opacity-100 transition-opacity",onClick:C=>E(f)},{default:r(()=>[n(o(A),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),e("div",ct,[n(o(j),null,{default:r(()=>[n(o(I),null,{default:r(()=>[n(o(L),null,{default:r(()=>t[8]||(t[8]=[l("Récapitulatif de la commande")])),_:1,__:[8]})]),_:1}),n(o(S),{class:"space-y-4"},{default:r(()=>[e("div",dt,[e("div",pt,[t[9]||(t[9]=e("span",null,"Sous-total",-1)),e("span",null,i(m(w.value)),1)]),e("div",mt,[t[10]||(t[10]=e("span",null,"Caution totale",-1)),e("span",null,i(m(k.value)),1)]),n(o(B)),e("div",ft,[t[11]||(t[11]=e("span",null,"Total",-1)),e("span",null,i(m(w.value+k.value)),1)])]),e("div",_t,[n(o(c),{variant:"outline",onClick:P,class:"w-full",disabled:p.value},{default:r(()=>t[12]||(t[12]=[l(" Vider le camion ")])),_:1,__:[12]},8,["disabled"]),n(o(c),{asChild:"",class:"w-full",disabled:p.value},{default:r(()=>[n(o($),{href:a.route("checkout.index")},{default:r(()=>t[13]||(t[13]=[l(" Passer la commande ")])),_:1,__:[13]},8,["href"])]),_:1},8,["disabled"])])]),_:1})]),_:1})])]))])]),_:1}))}};export{jt as default};
