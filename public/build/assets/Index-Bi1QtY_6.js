import{b as L,z as R,A as H,c as u,o as n,w as s,l as i,i as a,u as t,B as X,p as r,k as $,F as U,v as M,s as m,f as q,H as c,S as E,x as G}from"./app-D87cSTEK.js";import{_ as J}from"./AppLayout-P_ZKEA8z.js";import{_ as g}from"./index-BTdAFRTQ.js";import{_ as F,a as I}from"./CardContent.vue_vue_type_script_setup_true_lang-BX_EYPiC.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-Cd58GjNH.js";import{_ as C}from"./Label.vue_vue_type_script_setup_true_lang-BmaP6Evz.js";import{_ as Q,a as W,b as O,c as x,d as Y,e as y}from"./TableHeader.vue_vue_type_script_setup_true_lang-BdLqlTlU.js";import{_ as V,a as z,b as A,c as h,d as f}from"./SelectValue.vue_vue_type_script_setup_true_lang-DeZ3ZOuI.js";import{C as Z,b as ee}from"./FlashMessage-dPrOLo5Z.js";import{E as te,A as se,a as ae,b as le}from"./eye-Qd99FfA7.js";import{P as ie}from"./pencil-D06GKBQb.js";import"./x-D9dlJtfS.js";import"./createLucideIcon-gO3h018p.js";import"./chevron-down-CvLDhNBO.js";import"./clamp-B84JdEtN.js";import"./check-mKlYqLlS.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./VisuallyHidden-DR1YdzqK.js";import"./nullish-CHIgUVhi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"flex justify-between items-center"},re={class:"font-semibold text-xl leading-tight"},ne={class:"py-12"},ue={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},de={class:"flex flex-wrap items-end gap-6"},fe={class:"flex gap-2 ml-auto"},me={key:0,class:"text-center py-12"},pe={key:1},_e={class:"flex items-center space-x-2"},ve={class:"flex items-center space-x-2"},ce={class:"flex items-center space-x-2"},ge={class:"flex items-center space-x-2"},xe={class:"flex items-center space-x-2"},ye={class:"text-sm text-muted-foreground truncate max-w-60"},be={class:"max-w-40 flex flex-col"},we={class:"truncate font-medium"},$e={class:"text-xs text-muted-foreground"},Ce={class:"flex items-center justify-end space-x-2"},Re={__name:"Index",props:{organization:{type:Object,required:!0},equipments:{type:Object,required:!0},filters:{type:Object,required:!0},allCategories:{type:Array,required:!0}},setup(p){var j,N,B,D,S,T;const v=p,k=L(()=>R().props.auth.user.can),o=H({search:((j=v.filters)==null?void 0:j.search)??"",category:((N=v.filters)==null?void 0:N.category)??null,condition:((B=v.filters)==null?void 0:B.condition)??null,availability:((D=v.filters)==null?void 0:D.availability)??null,sort:((S=v.filters)==null?void 0:S.sort)??"name",direction:((T=v.filters)==null?void 0:T.direction)??"asc"}),_=()=>{o.get(route("app.organizations.equipments.index"),{preserveState:!0,preserveScroll:!0})},P=()=>{o.search="",o.category=null,o.condition=null,o.availability=null,o.sort="name",o.direction="asc",_()},b=d=>{o.sort===d?o.direction=o.direction==="asc"?"desc":"asc":(o.sort=d,o.direction="asc"),_()},w=d=>o.sort!==d?se:o.direction==="asc"?ae:le;return(d,e)=>(n(),u(J,{title:"Matériel",description:"Liste du matériel de l'organisation"},{header:s(()=>[i("div",oe,[i("h2",re," Inventaire du matériel de "+m(p.organization.name)+" ("+m(p.equipments.total)+") ",1),k.value.equipments.create?(n(),u(t(g),{key:0,asChild:""},{default:s(()=>[a(t(E),{href:d.route("app.organizations.equipments.create")},{default:s(()=>e[9]||(e[9]=[r(" Ajouter du matériel ")])),_:1,__:[9]},8,["href"])]),_:1})):q("",!0)])]),default:s(()=>[i("div",ne,[i("div",ue,[a(t(F),{class:"mb-6"},{default:s(()=>[a(t(I),{class:"p-4"},{default:s(()=>[i("form",{onSubmit:X(_,["prevent"])},[i("div",de,[i("div",null,[a(t(C),{for:"search",class:"text-sm"},{default:s(()=>e[10]||(e[10]=[r("Rechercher")])),_:1,__:[10]}),a(t(K),{id:"search",modelValue:t(o).search,"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).search=l),type:"text",placeholder:"Nom, catégorie...",onInput:_},null,8,["modelValue"])]),i("div",null,[a(t(C),{for:"category",class:"text-sm"},{default:s(()=>e[11]||(e[11]=[r("Catégorie")])),_:1,__:[11]}),a(t(V),{modelValue:t(o).category,"onUpdate:modelValue":[e[1]||(e[1]=l=>t(o).category=l),_]},{default:s(()=>[a(t(z),{class:"h-9"},{default:s(()=>[a(t(A),{placeholder:"Toutes"})]),_:1}),a(t(h),null,{default:s(()=>[a(t(f),{value:null},{default:s(()=>e[12]||(e[12]=[r("Toutes les catégories")])),_:1,__:[12]}),(n(!0),$(U,null,M(p.allCategories,l=>(n(),u(t(f),{key:l.id,value:l.name},{default:s(()=>[r(m(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",null,[a(t(C),{for:"condition",class:"text-sm"},{default:s(()=>e[13]||(e[13]=[r("État")])),_:1,__:[13]}),a(t(V),{modelValue:t(o).condition,"onUpdate:modelValue":[e[2]||(e[2]=l=>t(o).condition=l),_]},{default:s(()=>[a(t(z),{class:"h-9"},{default:s(()=>[a(t(A),{placeholder:"Tous"})]),_:1}),a(t(h),null,{default:s(()=>[a(t(f),{value:null},{default:s(()=>e[14]||(e[14]=[r("Tous les états")])),_:1,__:[14]}),a(t(f),{value:"new"},{default:s(()=>e[15]||(e[15]=[r("Neuf")])),_:1,__:[15]}),a(t(f),{value:"good"},{default:s(()=>e[16]||(e[16]=[r("Bon")])),_:1,__:[16]}),a(t(f),{value:"fair"},{default:s(()=>e[17]||(e[17]=[r("Moyen")])),_:1,__:[17]}),a(t(f),{value:"poor"},{default:s(()=>e[18]||(e[18]=[r("Mauvais")])),_:1,__:[18]})]),_:1})]),_:1},8,["modelValue"])]),i("div",null,[a(t(C),{for:"availability",class:"text-sm"},{default:s(()=>e[19]||(e[19]=[r("Disponibilité")])),_:1,__:[19]}),a(t(V),{modelValue:t(o).availability,"onUpdate:modelValue":[e[3]||(e[3]=l=>t(o).availability=l),_]},{default:s(()=>[a(t(z),{class:"h-9"},{default:s(()=>[a(t(A),{placeholder:"Tous"})]),_:1}),a(t(h),null,{default:s(()=>[a(t(f),{value:null},{default:s(()=>e[20]||(e[20]=[r("Tous")])),_:1,__:[20]}),a(t(f),{value:"available"},{default:s(()=>e[21]||(e[21]=[r("Disponible")])),_:1,__:[21]}),a(t(f),{value:"unavailable"},{default:s(()=>e[22]||(e[22]=[r("Non disponible")])),_:1,__:[22]})]),_:1})]),_:1},8,["modelValue"])]),i("div",fe,[a(t(g),{type:"button",variant:"outline",onClick:P,size:"sm",class:"h-9"},{default:s(()=>e[23]||(e[23]=[r(" Réinitialiser ")])),_:1,__:[23]}),a(t(g),{type:"submit",variant:"default",size:"sm",class:"h-9"},{default:s(()=>e[24]||(e[24]=[r(" Filtrer ")])),_:1,__:[24]})])])],32)]),_:1})]),_:1}),a(t(F),null,{default:s(()=>[a(t(I),{class:"p-6"},{default:s(()=>[p.equipments.data.length===0?(n(),$("div",me,[e[26]||(e[26]=i("p",{class:"text-muted-foreground text-lg"}," Aucun matériel trouvé ",-1)),k.value.equipments.create?(n(),u(t(g),{key:0,as:"a",href:d.route("app.organizations.equipments.create",p.organization),variant:"default",class:"mt-4"},{default:s(()=>e[25]||(e[25]=[r(" Ajouter du matériel ")])),_:1,__:[25]},8,["href"])):q("",!0)])):(n(),$("div",pe,[a(t(Q),null,{default:s(()=>[a(t(W),null,{default:s(()=>[a(t(O),null,{default:s(()=>[a(t(x),{class:"cursor-pointer hover:bg-muted/50",onClick:e[4]||(e[4]=l=>b("name"))},{default:s(()=>[i("div",_e,[e[27]||(e[27]=i("span",null,"Nom",-1)),(n(),u(c(w("name")),{class:"w-4 h-4"}))])]),_:1}),a(t(x),{class:"cursor-pointer hover:bg-muted/50",onClick:e[5]||(e[5]=l=>b("category"))},{default:s(()=>[i("div",ve,[e[28]||(e[28]=i("span",null,"Catégorie",-1)),(n(),u(c(w("category")),{class:"w-4 h-4"}))])]),_:1}),a(t(x),{class:"cursor-pointer hover:bg-muted/50",onClick:e[6]||(e[6]=l=>b("is_available"))},{default:s(()=>[i("div",ce,[e[29]||(e[29]=i("span",null,"Dispo.",-1)),(n(),u(c(w("is_available")),{class:"w-4 h-4"}))])]),_:1}),a(t(x),{class:"cursor-pointer hover:bg-muted/50",onClick:e[7]||(e[7]=l=>b("depot"))},{default:s(()=>[i("div",ge,[e[30]||(e[30]=i("span",null,"Emplacement",-1)),(n(),u(c(w("depot")),{class:"w-4 h-4"}))])]),_:1}),a(t(x),{class:"cursor-pointer hover:bg-muted/50",onClick:e[8]||(e[8]=l=>b("rental_price"))},{default:s(()=>[i("div",xe,[e[31]||(e[31]=i("span",null,"Prix/jour",-1)),(n(),u(c(w("rental_price")),{class:"w-4 h-4"}))])]),_:1}),a(t(x),{class:"text-right"},{default:s(()=>e[32]||(e[32]=[r("Actions")])),_:1,__:[32]})]),_:1})]),_:1}),a(t(Y),null,{default:s(()=>[(n(!0),$(U,null,M(p.equipments.data,l=>(n(),u(t(O),{key:l.id},{default:s(()=>[a(t(y),{class:"font-medium"},{default:s(()=>[a(t(E),{href:d.route("app.organizations.equipments.show",l)},{default:s(()=>[r(m(l.name),1)]),_:2},1032,["href"]),i("p",ye,m(l.description),1)]),_:2},1024),a(t(y),null,{default:s(()=>[r(m(l.category.name),1)]),_:2},1024),a(t(y),{class:"text-center"},{default:s(()=>[(n(),u(c(l.is_available?t(Z):t(ee)),{class:G([l.is_available?"text-success":"text-destructive","w-4 h-4 mx-auto"])},null,8,["class"]))]),_:2},1024),a(t(y),null,{default:s(()=>[i("div",be,[i("span",we,m(l.depot.name),1),i("span",$e,m(l.depot.city),1)])]),_:2},1024),a(t(y),null,{default:s(()=>[r(m(l.rental_price)+"€",1)]),_:2},1024),a(t(y),{class:"text-right"},{default:s(()=>[i("div",Ce,[a(t(g),{as:"a",href:d.route("app.organizations.equipments.show",l),size:"icon",variant:"ghost",class:"hover:bg-muted"},{default:s(()=>[a(t(te),{class:"h-4 w-4"}),e[33]||(e[33]=i("span",{class:"sr-only"},"Voir",-1))]),_:2,__:[33]},1032,["href"]),k.value.equipments.update?(n(),u(t(g),{key:0,as:"a",href:d.route("app.organizations.equipments.edit",l),size:"icon",variant:"ghost",class:"hover:bg-muted"},{default:s(()=>[a(t(ie),{class:"h-4 w-4"}),e[34]||(e[34]=i("span",{class:"sr-only"},"Modifier",-1))]),_:2,__:[34]},1032,["href"])):q("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]))]),_:1})]),_:1})])])]),_:1}))}};export{Re as default};
