import{l as O,u as e,h as P,q as pt,i as E,s as ie,H as le,c as j,o as p,w as f,j as K,g as R,b as c,I as Z,e as X,z as H,bP as vt,m as ue,p as Ee,bS as ht,E as Ie,f as $,a as l,d as z,t as q,S as Ne,F as G,r as W,n as Q,D as gt,T as yt,v as He,O as Ge,K as pe,a5 as xt,x as _t}from"./app-DjBZF9FK.js";import{_ as bt}from"./AppLayout-OR_nGhzV.js";import{_ as kt,a as wt}from"./CardContent.vue_vue_type_script_setup_true_lang-BlPg6IGh.js";import{P as Y,_ as J,c as ee}from"./index-pWS4n0U4.js";import{c as de,b as he,j as $t,X as ce,u as We,d as Qe}from"./useForwardPropsEmits-DV560IXF.js";import{A as Ct}from"./arrow-right-m2blmq0C.js";import{S as St}from"./sparkles-Dbo6Y85r.js";import{S as Vt}from"./shield-check-C9NTsrJc.js";import{c as me}from"./createLucideIcon-BMiE6FwX.js";import{U as Et}from"./users-B_O9DKOt.js";import{a as It,b as qt,c as jt,d as ae,_ as Tt}from"./SelectValue.vue_vue_type_script_setup_true_lang-C1hA_GIH.js";import{_ as oe}from"./Label.vue_vue_type_script_setup_true_lang-BSj2QS_K.js";import{l as qe,p as zt,x as Xe,u as Bt,t as Lt,e as Ft,f as Ot,g as Rt}from"./UserDropdown-BU-JnFJu.js";import{f as je,h as Pt}from"./FlashMessage-CnzK3ynY.js";import{_ as Te,a as ze,b as Be}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-PVrFELF7.js";import{d as Kt}from"./debounce-DoBswZnD.js";import{M as Me}from"./map-pin-Dv_d_wet.js";import{b as Je,k as ke,h as Mt,u as At,r as te,v as Dt}from"./useForwardExpose-CrXzeb8v.js";import{i as $e}from"./ohash.D__AXeF1-DHF4M4F_.js";import{u as Ut}from"./useFormControl-CDD3utHZ.js";import{_ as Nt}from"./VisuallyHiddenInput-BVXHtTQJ.js";import{u as Ht}from"./useKbd-kRIii9yh.js";import{_ as Ye}from"./index-Bq_fsxPZ.js";import{C as Ce}from"./check-Bx3rzglK.js";import{C as Gt}from"./circle-help-DVNdRl_U.js";import{_ as Wt}from"./Pagination-BtUVIG90.js";import{I as Qt}from"./image-BmzYhYB9.js";import"./chevron-down-DYhflWaH.js";import"./clamp-DGzvWO49.js";import"./nullish-CHIgUVhi.js";import"./package-NJ-4kOgJ.js";import"./loader-circle-DHVoUGw6.js";import"./Input.vue_vue_type_script_setup_true_lang-B9MRMKUa.js";import"./plus-Cy2vHmIp.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=me("ChevronsUpDownIcon",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=me("LayoutListIcon",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=me("PackageSearchIcon",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=me("SearchXIcon",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=me("TagIcon",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);function es(t){const n=O(()=>e(t)),a=O(()=>new Intl.Collator("en",{usage:"search",...n.value}));return{startsWith:(o,s)=>s.length===0?!0:(o=o.normalize("NFC"),s=s.normalize("NFC"),a.value.compare(o.slice(0,s.length),s)===0),endsWith:(o,s)=>s.length===0?!0:(o=o.normalize("NFC"),s=s.normalize("NFC"),a.value.compare(o.slice(-s.length),s)===0),contains:(o,s)=>{if(s.length===0)return!0;o=o.normalize("NFC"),s=s.normalize("NFC");let u=0;const h=s.length;for(;u+h<=o.length;u++){const _=o.slice(u,u+h);if(a.value.compare(s,_)===0)return!0}return!1}}}function ts(t,n,a){return t===void 0?!1:Array.isArray(t)?t.some(r=>re(r,n,a)):re(t,n,a)}function re(t,n,a){return t===void 0||n===void 0?!1:typeof t=="string"?t===n:typeof a=="function"?a(t,n):typeof a=="string"?(t==null?void 0:t[a])===(n==null?void 0:n[a]):$e(t,n)}function ss(t,n,a){const r=t.findIndex(s=>$e(s,n)),d=t.findIndex(s=>$e(s,a));if(r===-1||d===-1)return[];const[i,o]=[r,d].sort((s,u)=>s-u);return t.slice(i,o+1)}const[Le,as]=de("ListboxRoot"),os=P({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(t,{expose:n,emit:a}){const r=t,d=a,{multiple:i,highlightOnHover:o,orientation:s,disabled:u,selectionBehavior:h,dir:_}=pt(r),{getItems:m}=qe({isProvider:!0}),{handleTypeaheadSearch:w}=zt(),{primitiveElement:C,currentElement:y}=Xe(),S=Ht(),x=Bt(_),b=Ut(y),v=E(),I=E(!1),M=E(!0),B=Je(r,"modelValue",d,{defaultValue:r.defaultValue??(i.value?[]:void 0),passive:r.modelValue===void 0,deep:!0});function L(g){if(I.value=!0,r.multiple){const k=Array.isArray(B.value)?[...B.value]:[],V=k.findIndex(F=>re(F,g,r.by));r.selectionBehavior==="toggle"?(V===-1?k.push(g):k.splice(V,1),B.value=k):(B.value=[g],v.value=g)}else r.selectionBehavior==="toggle"&&re(B.value,g,r.by)?B.value=void 0:B.value=g;setTimeout(()=>{I.value=!1},1)}const T=E(null),A=E(null),D=E(!1),ye=E(!1),Fe=ke(),xe=ke(),Oe=ke();function _e(){return m().map(g=>g.ref).filter(g=>g.dataset.disabled!=="")}function U(g,k=!0){if(!g)return;T.value=g,M.value&&T.value.focus(),k&&T.value.scrollIntoView({block:"nearest"});const V=m().find(F=>F.ref===g);d("highlight",V)}function lt(g){if(D.value)Oe.trigger(g);else{const k=m().find(V=>re(V.value,g,r.by));k&&(T.value=k.ref,U(k.ref))}}function rt(g){T.value&&T.value.isConnected&&(g.preventDefault(),g.stopPropagation(),ye.value||T.value.click())}function it(g){if(M.value){if(I.value=!0,D.value)xe.trigger(g);else{const k=g.altKey||g.ctrlKey||g.metaKey;if(k&&g.key==="a"&&i.value){const V=m(),F=V.map(N=>N.value);B.value=[...F],g.preventDefault(),U(V[V.length-1].ref)}else if(!k){const V=w(g.key,m());V&&U(V)}}setTimeout(()=>{I.value=!1},1)}}function ut(){ye.value=!0}function dt(){requestAnimationFrame(()=>{ye.value=!1})}function Re(){le(()=>{const g=new KeyboardEvent("keydown",{key:"PageUp"});Pe(g)})}function be(g){const k=T.value;k!=null&&k.isConnected&&(A.value=k),T.value=null,d("leave",g)}function ct(g){var V,F;const k=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((V=g.currentTarget)==null||V.dispatchEvent(k),d("entryFocus",k),!k.defaultPrevented)if(A.value)U(A.value);else{const N=(F=_e())==null?void 0:F[0];U(N)}}function Pe(g){const k=Lt(g,s.value,x.value);if(!k)return;let V=_e();if(T.value){if(k==="last")V.reverse();else if(k==="prev"||k==="next"){k==="prev"&&V.reverse();const F=V.indexOf(T.value);V=V.slice(F+1)}mt(g,V[0])}if(V.length){const F=!T.value&&k==="prev"?V.length-1:0;U(V[F])}if(D.value)return xe.trigger(g)}function mt(g,k){var F;if(!(D.value||r.selectionBehavior!=="replace"||!i.value||!Array.isArray(B.value)||(g.altKey||g.ctrlKey||g.metaKey)&&!g.shiftKey)&&g.shiftKey){const N=m().filter(se=>se.ref.dataset.disabled!=="");let fe=(F=N.find(se=>se.ref===k))==null?void 0:F.value;if(g.key===S.END?fe=N[N.length-1].value:g.key===S.HOME&&(fe=N[0].value),!fe||!v.value)return;const ft=ss(N.map(se=>se.value),v.value,fe);B.value=ft}}async function Ke(g){if(await le(),D.value)Fe.trigger(g);else{const k=_e(),V=k.find(F=>F.dataset.state==="checked");V?U(V):k.length&&U(k[0])}}return ie(B,()=>{I.value||le(()=>{Ke()})},{immediate:!0,deep:!0}),n({highlightedElement:T,highlightItem:lt,highlightFirstItem:Re,highlightSelected:Ke,getItems:m}),as({modelValue:B,onValueChange:L,multiple:i,orientation:s,dir:x,disabled:u,highlightOnHover:o,highlightedElement:T,isVirtual:D,virtualFocusHook:Fe,virtualKeydownHook:xe,virtualHighlightHook:Oe,by:r.by,firstValue:v,selectionBehavior:h,focusable:M,onLeave:be,onEnter:ct,changeHighlight:U,onKeydownEnter:rt,onKeydownNavigation:Pe,onKeydownTypeAhead:it,onCompositionStart:ut,onCompositionEnd:dt,highlightFirstItem:Re}),(g,k)=>(p(),j(e(Y),{ref_key:"primitiveElement",ref:C,as:g.as,"as-child":g.asChild,dir:e(x),"data-disabled":e(u)?"":void 0,onPointerleave:be,onFocusout:k[0]||(k[0]=async V=>{const F=V.relatedTarget||V.target;await le(),T.value&&e(y)&&!e(y).contains(F)&&be(V)})},{default:f(()=>[K(g.$slots,"default",{modelValue:e(B)}),e(b)&&g.name?(p(),j(e(Nt),{key:0,name:g.name,value:e(B),disabled:e(u),required:g.required},null,8,["name","value","disabled","required"])):R("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),ns=P({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(t){const{CollectionSlot:n}=qe(),a=Le(),r=Mt(!1,10);return(d,i)=>(p(),j(e(n),null,{default:f(()=>[c(e(Y),{role:"listbox",as:d.as,"as-child":d.asChild,tabindex:e(a).focusable.value?e(a).highlightedElement.value?"-1":"0":void 0,"aria-orientation":e(a).orientation.value,"aria-multiselectable":!!e(a).multiple.value,"data-orientation":e(a).orientation.value,onMousedown:i[0]||(i[0]=X(o=>r.value=!0,["left"])),onFocus:i[1]||(i[1]=o=>{e(r)||e(a).onEnter(o)}),onKeydown:[i[2]||(i[2]=Z(X(o=>{e(a).focusable.value&&e(a).onKeydownNavigation(o)},["prevent"]),["down","up","left","right","home","end"])),Z(e(a).onKeydownEnter,["enter"]),e(a).onKeydownTypeAhead]},{default:f(()=>[K(d.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),[ls,rs]=de("ListboxGroup"),is=P({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(t){const n=t,a=he(void 0,"reka-listbox-group");return rs({id:a}),(r,d)=>(p(),j(e(Y),H({role:"group"},n,{"aria-labelledby":e(a)}),{default:f(()=>[K(r.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),us=P({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(t,{emit:n}){const a=t,d=Je(a,"modelValue",n,{defaultValue:"",passive:a.modelValue===void 0}),i=Le(),{primitiveElement:o,currentElement:s}=Xe(),u=O(()=>a.disabled||i.disabled.value||!1),h=E();return vt(()=>{var _;return h.value=(_=i.highlightedElement.value)==null?void 0:_.id}),ue(()=>{i.focusable.value=!1,setTimeout(()=>{var _;a.autoFocus&&((_=s.value)==null||_.focus())},1)}),Ee(()=>{i.focusable.value=!0}),(_,m)=>(p(),j(e(Y),{ref_key:"primitiveElement",ref:o,as:_.as,"as-child":_.asChild,value:e(d),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":h.value,type:"text",onKeydown:[Z(X(e(i).onKeydownNavigation,["prevent"]),["down","up","home","end"]),Z(e(i).onKeydownEnter,["enter"])],onInput:m[0]||(m[0]=w=>{d.value=w.target.value,e(i).highlightFirstItem(w)}),onCompositionstart:e(i).onCompositionStart,onCompositionend:e(i).onCompositionEnd},{default:f(()=>[K(_.$slots,"default",{modelValue:e(d)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),ds="listbox.select",[nn,cs]=de("ListboxItem"),ms=P({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(t,{emit:n}){const a=t,r=n,d=he(void 0,"reka-listbox-item"),{CollectionItem:i}=qe(),{forwardRef:o,currentElement:s}=At(),u=Le(),h=O(()=>s.value===u.highlightedElement.value),_=O(()=>ts(u.modelValue.value,a.value,u.by)),m=O(()=>u.disabled.value||a.disabled);async function w(y){r("select",y),!(y!=null&&y.defaultPrevented)&&!m.value&&y&&(u.onValueChange(a.value),u.changeHighlight(s.value))}function C(y){const S={originalEvent:y,value:a.value};$t(ds,w,S)}return cs({isSelected:_}),(y,S)=>(p(),j(e(i),{value:y.value},{default:f(()=>[ht([h.value,_.value],()=>c(e(Y),H({id:e(d)},y.$attrs,{ref:e(o),role:"option",tabindex:e(u).focusable.value?h.value?"0":"-1":-1,"aria-selected":_.value,as:y.as,"as-child":y.asChild,disabled:m.value?"":void 0,"data-disabled":m.value?"":void 0,"data-highlighted":h.value?"":void 0,"data-state":_.value?"checked":"unchecked",onClick:C,onKeydown:Z(X(C,["prevent"]),["space"]),onPointermove:S[0]||(S[0]=x=>{e(u).highlightedElement.value!==e(s)&&(e(u).highlightOnHover.value?e(u).changeHighlight(e(s),!1):e(u).focusable.value||e(u).changeHighlight(e(s),!1))})}),{default:f(()=>[K(y.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),S,1)]),_:3},8,["value"]))}}),fs=P({__name:"ListboxGroupLabel",props:{for:{},asChild:{type:Boolean},as:{default:"div"}},setup(t){const n=t,a=ls({id:""});return(r,d)=>(p(),j(e(Y),H(n,{id:e(a).id}),{default:f(()=>[K(r.$slots,"default")]),_:3},16,["id"]))}}),ps={key:0,"aria-labelledby":"hero-heading",class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},vs={class:"flex flex-col lg:flex-row items-center gap-8"},hs={class:"flex-1 text-center lg:text-left"},gs={class:"space-y-4"},ys={class:"text-base text-gray-500 max-w-xl mx-auto lg:mx-0 dark:text-gray-400"},xs={class:"text-gray-900 dark:text-white"},_s={class:"mt-6 flex flex-wrap items-center gap-3 justify-center lg:justify-start"},bs={class:"flex-shrink-0 lg:w-80"},ks={class:"rounded-lg p-4"},ws={class:"grid gap-3",role:"list"},$s={class:"text-sm font-medium text-gray-900 dark:text-white"},Cs={class:"text-xs text-gray-500 mt-0.5 dark:text-gray-400"},Ss={__name:"HeroSection",setup(t){const a=Ie().props.name,r=E(!0),d=()=>{r.value=!1,localStorage.setItem("heroCardDismissed","true")},i=[{icon:St,title:"Gratuit",description:"Pour une association ou un particulier"},{icon:Vt,title:"Réservation sécurisée",description:"Processus simple et sûr"},{icon:Xt,title:"Gestion d'inventaire",description:"Suivez votre matériel"},{icon:Et,title:"Communauté active",description:"Réseau associatif"}];return(o,s)=>(p(),j(yt,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform -translate-y-4 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-4 opacity-0"},{default:f(()=>[r.value?(p(),$("section",ps,[s[7]||(s[7]=l("div",{class:"absolute inset-0 rounded-2xl"},null,-1)),c(e(kt),{class:"relative border-none bg-gradient-to-br from-violet-100 via-blue-50 to-background dark:from-violet-950 dark:via-blue-950 dark:to-background"},{default:f(()=>[c(e(J),{variant:"ghost",size:"icon",class:"absolute right-3 top-3 hover:bg-white/80",onClick:d},{default:f(()=>[c(e(ce),{class:"h-4 w-4"}),s[0]||(s[0]=l("span",{class:"sr-only"},"Fermer la bannière d'accueil",-1))]),_:1,__:[0]}),c(e(wt),{class:"p-6"},{default:f(()=>[l("div",vs,[l("div",hs,[l("div",gs,[s[2]||(s[2]=l("h1",{id:"hero-heading",class:"text-2xl sm:text-3xl font-bold font-title text-gray-900 leading-tight dark:text-white"},[l("span",{class:"inline-block"},[z(" Location et prêt de matériel "),l("span",{class:"bg-gradient-to-r from-violet-600 to-blue-600 bg-clip-text text-transparent whitespace-nowrap dark:from-violet-400 dark:to-blue-400"},"événementiel")]),l("span",{class:"block text-lg sm:text-xl mt-2 text-gray-600 font-medium dark:text-gray-400"}," entre associations et particuliers ")],-1)),l("p",ys,[l("strong",xs,q(e(a)),1),s[1]||(s[1]=z(" facilite la location de matériel entre associations. Trouvez et réservez en quelques clics le matériel dont vous avez besoin pour vos événements. "))])]),l("div",_s,[c(e(Ne),{href:o.route("discover"),class:"inline-flex items-center px-5 py-2.5 text-sm font-medium rounded-lg bg-gradient-to-r from-violet-600 to-blue-600 text-white hover:from-violet-700 hover:to-blue-700 transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-violet-500 dark:from-violet-500 dark:to-blue-500 dark:hover:from-violet-600 dark:hover:to-blue-600"},{default:f(()=>[s[3]||(s[3]=z(" Découvrir la plateforme ")),c(e(Ct),{class:"ml-2 h-4 w-4"})]),_:1,__:[3]},8,["href"]),c(e(J),{variant:"outline",as:"a",href:o.route("how-it-works"),class:"text-sm border-violet-200 text-violet-700 hover:text-violet-500 hover:bg-violet-50 dark:border-violet-800 dark:text-violet-300 dark:hover:bg-violet-900"},{default:f(()=>s[4]||(s[4]=[z(" Comment ça marche ? ")])),_:1,__:[4]},8,["href"])])]),s[6]||(s[6]=l("div",{class:"hidden lg:block w-px h-32 bg-gradient-to-b from-violet-200 to-blue-200 self-center dark:from-violet-800 dark:to-blue-800"},null,-1)),l("div",bs,[l("div",ks,[s[5]||(s[5]=l("h2",{class:"text-sm font-medium text-gray-900 mb-4 dark:text-white"}," Avantages de la plateforme ",-1)),l("ul",ws,[(p(),$(G,null,W(i,u=>l("li",{key:u.title,class:"flex items-start gap-3 group"},[l("div",{class:Q(["rounded-md bg-gradient-to-br from-violet-100 to-blue-100 p-2 group-hover:from-violet-200 group-hover:to-blue-200 transition-colors duration-200 dark:from-violet-900 dark:to-blue-900",{"from-violet-200 to-blue-200 dark:from-violet-800 dark:to-blue-800":u.title==="Gratuit"}])},[(p(),j(gt(u.icon),{class:"w-4 h-4 text-violet-600 dark:text-violet-400"}))],2),l("div",null,[l("h3",$s,q(u.title),1),l("p",Cs,q(u.description),1)])])),64))])])])])]),_:1})]),_:1})])):R("",!0)]),_:1}))}},Vs={class:"flex items-center border rounded-lg shadow-md bg-background"},Es={class:"pl-3 text-muted-foreground"},Is=["onKeydown"],qs={__name:"SearchInput",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","search:submit"],setup(t,{emit:n}){const a=t,r=n,d=E(null),i=O({get(){return a.modelValue},set(u){r("update:modelValue",u)}}),o=()=>{i.value="",le(()=>{var u;(u=d.value)==null||u.focus()})},s=()=>{r("search:submit",i.value)};return(u,h)=>(p(),$("div",Vs,[l("span",Es,[c(e(je),{class:"h-5 w-5"})]),He(l("input",{ref_key:"inputRef",ref:d,"onUpdate:modelValue":h[0]||(h[0]=_=>i.value=_),type:"text",class:"flex-1 h-12 px-3 bg-transparent focus:outline-none",placeholder:"Que recherchez-vous ?",onKeydown:Z(X(s,["prevent"]),["enter"]),autocomplete:"off"},null,40,Is),[[Ge,i.value]]),i.value?(p(),$("button",{key:0,onMousedown:X(o,["prevent"]),class:"pr-3 text-muted-foreground hover:text-foreground",tabindex:"-1"},[c(e(ce),{class:"h-4 w-4"})],32)):R("",!0)]))}},js={class:"relative w-full"},Ts={class:"flex items-center border rounded-lg shadow-md bg-background"},zs={class:"pl-3 text-muted-foreground"},Bs={key:0,class:"py-6 text-center text-sm text-muted-foreground"},Ls={key:1,class:"py-6 text-center text-sm text-destructive"},Fs={key:2,class:"py-6 text-center text-sm text-muted-foreground"},Os={key:3,class:"max-h-[300px] overflow-y-auto"},Rs=["onClick"],Ps={class:"flex flex-col"},Ks={class:"text-xs text-muted-foreground"},Ms={__name:"CityInput",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","selected"],setup(t,{emit:n}){const a=t,r=n,d=E(a.modelValue),i=E([]),o=E(!1),s=E(!1),u=E(""),h=E(null),_=Kt(async C=>{if(C.length<3){i.value=[],o.value=!1,u.value="";return}s.value=!0,o.value=!0,u.value="";try{const y=await pe.get(`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(C)}&type=municipality&limit=5`);if(!y.data.features||y.data.features.length===0){i.value=[];return}i.value=y.data.features.map(S=>({id:S.properties.id,name:S.properties.city,postcode:S.properties.postcode,coordinates:{lat:S.geometry.coordinates[1],lng:S.geometry.coordinates[0]}}))}catch(y){console.error("Error fetching city suggestions:",y),i.value=[],y.value="Erreur lors de la recherche de villes. Veuillez réessayer."}finally{s.value=!1}},150);ie(d,C=>{r("update:modelValue",C),C.length>=3&&C!==h.value?_(C):(i.value=[],o.value=!1)});const m=C=>{h.value=C.name+" ("+C.postcode+")",d.value=h.value,u.value="";let y={name:C.name,lat:C.coordinates.lat,lng:C.coordinates.lng,postcode:C.postcode,departement:C.postcode.substring(0,2)};r("selected",y),o.value=!1},w=()=>{d.value="",i.value=[],o.value=!1,u.value="",h.value=null,r("update:modelValue",""),r("selected",null)};return(C,y)=>(p(),$("div",js,[c(e(Be),{open:o.value,"onUpdate:open":y[1]||(y[1]=S=>o.value=S)},{default:f(()=>[c(e(Te),{asChild:""},{default:f(()=>[l("div",Ts,[l("span",zs,[c(e(Me),{class:"h-5 w-5"})]),He(l("input",{"onUpdate:modelValue":y[0]||(y[0]=S=>d.value=S),type:"text",class:"flex-1 h-12 px-3 bg-transparent focus:outline-none",placeholder:"Ajouter une localisation"},null,512),[[Ge,d.value]]),d.value?(p(),$("button",{key:0,onMousedown:X(w,["prevent"]),class:"pr-3 text-muted-foreground hover:text-foreground",tabindex:"-1"},[c(e(ce),{class:"h-4 w-4"})],32)):R("",!0)])]),_:1}),c(e(ze),{class:"w-full p-0",align:"start"},{default:f(()=>[s.value?(p(),$("div",Bs,y[2]||(y[2]=[l("div",{class:"flex items-center justify-center"},[l("div",{class:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),l("span",{class:"ml-2"},"Recherche en cours...")],-1)]))):u.value?(p(),$("div",Ls,q(u.value),1)):i.value.length===0?(p(),$("div",Fs," Aucun résultat trouvé ")):(p(),$("div",Os,[(p(!0),$(G,null,W(i.value,S=>(p(),$("div",{key:S.id,class:"flex items-center gap-2 px-4 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground",onClick:x=>m(S)},[c(e(Me),{class:"h-4 w-4 text-muted-foreground"}),l("div",Ps,[l("span",null,q(S.name),1),l("span",Ks,q(S.postcode),1)])],8,Rs))),128))]))]),_:1})]),_:1},8,["open"])]))}},et=P({__name:"Command",props:{modelValue:{default:""},defaultValue:{},multiple:{type:Boolean},orientation:{},dir:{},disabled:{type:Boolean},selectionBehavior:{},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(t,{emit:n}){const a=t,r=n,d=te(a,"class"),i=We(d,r),o=E(new Map),s=E(new Map),{contains:u}=es({sensitivity:"base"}),h=xt({search:"",filtered:{count:0,items:new Map,groups:new Set}});function _(){if(!h.search){h.filtered.count=o.value.size;return}h.filtered.groups=new Set;let m=0;for(const[w,C]of o.value){const y=u(C,h.search);h.filtered.items.set(w,y?1:0),y&&m++}for(const[w,C]of s.value)for(const y of C)if(h.filtered.items.get(y)>0){h.filtered.groups.add(w);break}h.filtered.count=m}return ie(()=>h.search,()=>{_()}),Ns({allItems:o,allGroups:s,filterState:h}),(m,w)=>(p(),j(e(os),H({"data-slot":"command"},e(i),{class:e(ee)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",a.class)}),{default:f(()=>[K(m.$slots,"default")]),_:3},16,["class"]))}}),tt=P({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const n=t,a=te(n,"class"),{filterState:r}=ge(),d=O(()=>!!r.search&&r.filtered.count===0);return(i,o)=>d.value?(p(),j(e(Y),H({key:0,"data-slot":"command-empty"},e(a),{class:e(ee)("py-6 text-center text-sm",n.class)}),{default:f(()=>[K(i.$slots,"default")]),_:3},16,["class"])):R("",!0)}}),st=P({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},class:{},heading:{}},setup(t){const n=t,a=te(n,"class"),{allGroups:r,filterState:d}=ge(),i=he(),o=O(()=>d.search?d.filtered.groups.has(i):!0);return Gs({id:i}),ue(()=>{r.value.has(i)||r.value.set(i,new Set)}),Ee(()=>{r.value.delete(i)}),(s,u)=>(p(),j(e(is),H(e(a),{id:e(i),"data-slot":"command-group",class:e(ee)("text-foreground overflow-hidden p-1",n.class),hidden:o.value?void 0:!0}),{default:f(()=>[s.heading?(p(),j(e(fs),{key:0,class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:f(()=>[z(q(s.heading),1)]),_:1})):R("",!0),K(s.$slots,"default")]),_:3},16,["id","class","hidden"]))}}),As={"data-slot":"command-input-wrapper",class:"flex h-12 items-center gap-2 border-b px-3"},at=P({inheritAttrs:!1,__name:"CommandInput",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(t){const n=t,a=te(n,"class"),r=Qe(a),{filterState:d}=ge();return(i,o)=>(p(),$("div",As,[c(e(je),{class:"size-4 shrink-0 opacity-50"}),c(e(us),H({...e(r),...i.$attrs},{modelValue:e(d).search,"onUpdate:modelValue":o[0]||(o[0]=s=>e(d).search=s),"data-slot":"command-input","auto-focus":"",class:e(ee)("placeholder:text-muted-foreground flex h-12 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",n.class)}),null,16,["modelValue","class"])]))}}),Se=P({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["select"],setup(t,{emit:n}){const a=t,r=n,d=te(a,"class"),i=We(d,r),o=he(),{filterState:s,allItems:u,allGroups:h}=ge(),_=Hs(),m=O(()=>{if(s.search){const y=s.filtered.items.get(o);return y===void 0?!0:y>0}else return!0}),w=E(),C=Dt(w);return ue(()=>{var S,x;if(!(C.value instanceof HTMLElement))return;u.value.set(o,C.value.textContent??((S=a.value)==null?void 0:S.toString())??"");const y=_==null?void 0:_.id;y&&(h.value.has(y)?(x=h.value.get(y))==null||x.add(o):h.value.set(y,new Set([o])))}),Ee(()=>{u.value.delete(o)}),(y,S)=>m.value?(p(),j(e(ms),H({key:0},e(i),{id:e(o),ref_key:"itemRef",ref:w,"data-slot":"command-item",class:e(ee)("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-3 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a.class),onSelect:S[0]||(S[0]=()=>{e(s).search=""})}),{default:f(()=>[K(y.$slots,"default")]),_:3},16,["id","class"])):R("",!0)}}),Ds={role:"presentation"},Us=P({__name:"CommandList",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const n=t,a=te(n,"class"),r=Qe(a);return(d,i)=>(p(),j(e(ns),H({"data-slot":"command-list"},e(r),{class:e(ee)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",n.class)}),{default:f(()=>[l("div",Ds,[K(d.$slots,"default")])]),_:3},16,["class"]))}}),[ge,Ns]=de("Command"),[Hs,Gs]=de("CommandGroup");var Ws=typeof global=="object"&&global&&global.Object===Object&&global,Qs=typeof self=="object"&&self&&self.Object===Object&&self,ot=Ws||Qs||Function("return this")(),ve=ot.Symbol,nt=Object.prototype,Xs=nt.hasOwnProperty,Js=nt.toString,ne=ve?ve.toStringTag:void 0;function Ys(t){var n=Xs.call(t,ne),a=t[ne];try{t[ne]=void 0;var r=!0}catch{}var d=Js.call(t);return r&&(n?t[ne]=a:delete t[ne]),d}var Zs=Object.prototype,ea=Zs.toString;function ta(t){return ea.call(t)}var sa="[object Null]",aa="[object Undefined]",Ae=ve?ve.toStringTag:void 0;function oa(t){return t==null?t===void 0?aa:sa:Ae&&Ae in Object(t)?Ys(t):ta(t)}function na(t){return t!=null&&typeof t=="object"}var la="[object Symbol]";function ra(t){return typeof t=="symbol"||na(t)&&oa(t)==la}var ia=/\s/;function ua(t){for(var n=t.length;n--&&ia.test(t.charAt(n)););return n}var da=/^\s+/;function ca(t){return t&&t.slice(0,ua(t)+1).replace(da,"")}function Ve(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var De=NaN,ma=/^[-+]0x[0-9a-f]+$/i,fa=/^0b[01]+$/i,pa=/^0o[0-7]+$/i,va=parseInt;function Ue(t){if(typeof t=="number")return t;if(ra(t))return De;if(Ve(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Ve(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=ca(t);var a=fa.test(t);return a||pa.test(t)?va(t.slice(2),a?2:8):ma.test(t)?De:+t}var we=function(){return ot.Date.now()},ha="Expected a function",ga=Math.max,ya=Math.min;function xa(t,n,a){var r,d,i,o,s,u,h=0,_=!1,m=!1,w=!0;if(typeof t!="function")throw new TypeError(ha);n=Ue(n)||0,Ve(a)&&(_=!!a.leading,m="maxWait"in a,i=m?ga(Ue(a.maxWait)||0,n):i,w="trailing"in a?!!a.trailing:w);function C(L){var T=r,A=d;return r=d=void 0,h=L,o=t.apply(A,T),o}function y(L){return h=L,s=setTimeout(b,n),_?C(L):o}function S(L){var T=L-u,A=L-h,D=n-T;return m?ya(D,i-A):D}function x(L){var T=L-u,A=L-h;return u===void 0||T>=n||T<0||m&&A>=i}function b(){var L=we();if(x(L))return v(L);s=setTimeout(b,S(L))}function v(L){return s=void 0,w&&r?C(L):(r=d=void 0,o)}function I(){s!==void 0&&clearTimeout(s),h=0,r=u=d=s=void 0}function M(){return s===void 0?o:v(we())}function B(){var L=we(),T=x(L);if(r=arguments,d=this,u=L,T){if(s===void 0)return y(u);if(m)return clearTimeout(s),s=setTimeout(b,n),C(u)}return s===void 0&&(s=setTimeout(b,n)),o}return B.cancel=I,B.flush=M,B}const _a={class:"truncate"},ba={class:"flex items-center justify-between border-b p-2"},ka={class:"text-sm text-muted-foreground"},wa={key:0},$a={key:1},Ca={key:0,class:"mt-2 flex flex-wrap gap-1"},Sa=["onClick"],Va={__name:"OrganizationFilter",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(t,{emit:n}){const a=t,r=n,d=E(!1),i=E(""),o=E([]),s=E([]),u=E(!1),h=O(()=>a.modelValue.map(x=>s.value.find(b=>b.id===x)).filter(Boolean)),_=async x=>{if(x.length===0)return;const b=x.filter(v=>!s.value.some(I=>I.id===v));if(b.length!==0)try{const v=await pe.get(route("api.organizations.index",{"ids[]":b}));s.value.push(...v.data.data)}catch(v){console.error("Error fetching organizations by IDs:",v)}};ue(()=>{S(),_(a.modelValue)}),ie(()=>a.modelValue,x=>{_(x)},{deep:!0});const m=x=>a.modelValue.includes(x.id),w=(x,b)=>{b&&b.preventDefault();const v=[...a.modelValue],I=v.indexOf(x.id);I>-1?v.splice(I,1):v.push(x.id),r("update:modelValue",v)},C=x=>{w(x,null)},y=()=>{r("update:modelValue",[])},S=xa(async()=>{u.value=!0;try{const x=await pe.get(route("api.organizations.index",{search:i.value}));o.value=x.data.data,x.data.data.forEach(b=>{s.value.some(v=>v.id===b.id)||s.value.push(b)})}catch(x){console.error("Error searching organizations:",x)}finally{u.value=!1}},300);return(x,b)=>(p(),$("div",null,[c(e(Be),{open:d.value,"onUpdate:open":b[1]||(b[1]=v=>d.value=v)},{default:f(()=>[c(e(Te),{asChild:""},{default:f(()=>[c(e(J),{variant:"outline",role:"combobox","aria-expanded":d.value,class:"w-full justify-between"},{default:f(()=>[l("span",_a,q(h.value.length>0?h.value.map(v=>v.name).join(", "):"Sélectionner une ou plusieurs organisations"),1),c(e(Ze),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),c(e(ze),{class:"w-[--radix-popover-trigger-width] p-0"},{default:f(()=>[c(e(et),{"filter-function":v=>v},{default:f(()=>[l("div",ba,[l("p",ka,q(h.value.length)+" sélectionnée(s) ",1),h.value.length>0?(p(),j(e(J),{key:0,variant:"ghost",size:"sm",onClick:y},{default:f(()=>b[2]||(b[2]=[z(" Effacer ")])),_:1,__:[2]})):R("",!0)]),c(e(at),{modelValue:i.value,"onUpdate:modelValue":[b[0]||(b[0]=v=>i.value=v),e(S)],placeholder:"Rechercher une organisation..."},null,8,["modelValue","onUpdate:modelValue"]),c(e(tt),null,{default:f(()=>[u.value?(p(),$("span",wa,"Chargement...")):(p(),$("span",$a,"Aucune organisation trouvée."))]),_:1}),c(e(st),null,{default:f(()=>[(p(!0),$(G,null,W(o.value,v=>(p(),j(e(Se),{key:v.id,value:v.name,onSelect:I=>w(v,I)},{default:f(()=>[c(e(Ce),{class:Q(["mr-2 h-4 w-4",m(v)?"opacity-100":"opacity-0"])},null,8,["class"]),z(" "+q(v.name),1)]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1},8,["filter-function"])]),_:1})]),_:1},8,["open"]),h.value.length>0?(p(),$("div",Ca,[(p(!0),$(G,null,W(h.value,v=>(p(),j(e(Ye),{key:`selected-${v.id}`,variant:"secondary"},{default:f(()=>[z(q(v.name)+" ",1),l("button",{type:"button",class:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:I=>C(v)},[c(e(ce),{class:"h-3 w-3 text-muted-foreground hover:text-foreground"})],8,Sa)]),_:2},1024))),128))])):R("",!0)]))}},Ea={class:"truncate"},Ia={class:"flex items-center justify-between border-b p-2"},qa={class:"text-sm text-muted-foreground"},ja={key:0},Ta={key:1},za={key:0,class:"mt-2 flex flex-wrap gap-1"},Ba=["onClick"],La={__name:"CategoryFilter",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(t,{emit:n}){const a=t,r=n,d=E(!1),i=E(""),o=E([]),s=O(()=>o.value.flatMap(x=>[x,...x.children])),u=E(!1),h=O(()=>a.modelValue.map(x=>s.value.find(b=>b.id===x)).filter(Boolean)),_=async()=>{u.value=!0;try{const x=await pe.get("/api/categories");o.value=x.data}catch(x){console.error("Error fetching categories:",x)}finally{u.value=!1}};ue(()=>{_()});const m=x=>a.modelValue.includes(x.id),w=(x,b)=>{b&&b.preventDefault();const v=[...a.modelValue],I=v.indexOf(x.id);I>-1?v.splice(I,1):v.push(x.id),r("update:modelValue",v)},C=x=>{w(x,null)},y=()=>{r("update:modelValue",[])},S=(x,b)=>x.filter(v=>{var M;const I=(M=v.children)==null?void 0:M.some(B=>B.name.toLowerCase().includes(b.toLowerCase()));return v.name.toLowerCase().includes(b.toLowerCase())||I});return(x,b)=>(p(),$("div",null,[c(e(Be),{open:d.value,"onUpdate:open":b[1]||(b[1]=v=>d.value=v)},{default:f(()=>[c(e(Te),{asChild:""},{default:f(()=>[c(e(J),{variant:"outline",role:"combobox","aria-expanded":d.value,class:"w-full justify-between"},{default:f(()=>[l("span",Ea,q(h.value.length>0?h.value.map(v=>v.name).join(", "):"Sélectionner une ou plusieurs catégories"),1),c(e(Ze),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),c(e(ze),{class:"w-[--radix-popover-trigger-width] p-0"},{default:f(()=>[c(e(et),{"filter-function":S},{default:f(()=>[l("div",Ia,[l("p",qa,q(h.value.length)+" sélectionnée(s) ",1),h.value.length>0?(p(),j(e(J),{key:0,variant:"ghost",size:"sm",onClick:y},{default:f(()=>b[2]||(b[2]=[z(" Effacer ")])),_:1,__:[2]})):R("",!0)]),c(e(at),{modelValue:i.value,"onUpdate:modelValue":b[0]||(b[0]=v=>i.value=v),placeholder:"Rechercher une catégorie..."},null,8,["modelValue"]),c(e(tt),null,{default:f(()=>[u.value?(p(),$("span",ja,"Chargement...")):(p(),$("span",Ta,"Aucune catégorie trouvée."))]),_:1}),c(e(Us),null,{default:f(()=>[(p(!0),$(G,null,W(o.value,v=>(p(),j(e(st),{key:v.id,heading:v.name},{default:f(()=>[c(e(Se),{value:v.name,onSelect:I=>w(v,I)},{default:f(()=>[c(e(Ce),{class:Q(["mr-2 h-4 w-4",m(v)?"opacity-100":"opacity-0"])},null,8,["class"]),z(" "+q(v.name)+" (toute la catégorie) ",1)]),_:2},1032,["value","onSelect"]),(p(!0),$(G,null,W(v.children,I=>(p(),j(e(Se),{key:I.id,value:I.name,onSelect:M=>w(I,M),class:"pl-8"},{default:f(()=>[c(e(Ce),{class:Q(["mr-2 h-4 w-4",m(I)?"opacity-100":"opacity-0"])},null,8,["class"]),z(" "+q(I.name),1)]),_:2},1032,["value","onSelect"]))),128))]),_:2},1032,["heading"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),h.value.length>0?(p(),$("div",za,[(p(!0),$(G,null,W(h.value,v=>(p(),j(e(Ye),{key:`selected-${v.id}`,variant:"secondary"},{default:f(()=>[z(q(v.name)+" ",1),l("button",{type:"button",class:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:I=>C(v)},[c(e(ce),{class:"h-3 w-3 text-muted-foreground hover:text-foreground"})],8,Ba)]),_:2},1024))),128))])):R("",!0)]))}},Fa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Oa={class:"relative rounded-xl shadow-xl border border-gray-200/60"},Ra={key:0,class:"px-6 pt-6 pb-4"},Pa={class:"px-6 pb-6"},Ka={class:"flex flex-col md:flex-row gap-4 p-4"},Ma={class:"flex-1"},Aa={class:"flex-1"},Da={class:"flex items-end"},Ua={key:1,class:"h-5 w-5 mr-2"},Na={class:"px-6 pb-6"},Ha={class:""},Ga={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},Wa={class:"space-y-2"},Qa={class:"space-y-2"},Xa={class:"space-y-2"},Ja={__name:"SearchSection",props:{filters:{type:Object,default:()=>({})},stats:{type:Object,required:!0}},emits:["searching"],setup(t,{emit:n}){const r=Ie().props.auth.user,d=t,i=n,o=E(!1),s=_t({search:d.filters.search||"",radius:d.filters.radius||50,categories:d.filters.categories||[],organizations:d.filters.organizations||[],coordinates:d.filters.coordinates||null,city:d.filters.city||null,postcode:d.filters.postcode||null});ie([()=>s.organizations,()=>s.categories,()=>s.radius],()=>{u()},{deep:!0});const u=()=>{s.isDirty&&(o.value=!0,i("searching",o.value),s.get(route("home"),{only:["filters","equipments"],preserveScroll:!0,preserveState:!0,onFinish:()=>{o.value=!1,i("searching",o.value)}}))},h=_=>{s.city=_.name,s.postcode=_.postcode,s.coordinates={lat:_.lat,lng:_.lng},s.radius=s.radius||5,u()};return(_,m)=>(p(),$("div",{class:Q({"relative mt-8":e(r)})},[l("div",Fa,[l("div",Oa,[e(r)?R("",!0):(p(),$("div",Ra,m[5]||(m[5]=[l("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Trouvez le matériel dont vous avez besoin",-1),l("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Recherchez parmi des milliers d'équipements disponibles près de chez vous.",-1)]))),l("div",Pa,[l("div",Ka,[l("div",Ma,[c(e(oe),{class:"text-sm font-medium mb-2 text-gray-700 dark:text-white"},{default:f(()=>m[6]||(m[6]=[z("Dans quel secteur ?")])),_:1,__:[6]}),c(Ms,{modelValue:e(s).city,"onUpdate:modelValue":m[0]||(m[0]=w=>e(s).city=w),onSelected:h,placeholder:"Entrez une ville ou un code postal"},null,8,["modelValue"])]),l("div",Aa,[c(e(oe),{class:"text-sm font-medium mb-2 text-gray-700 dark:text-white"},{default:f(()=>m[7]||(m[7]=[z("Que recherchez-vous ?")])),_:1,__:[7]}),c(qs,{modelValue:e(s).search,"onUpdate:modelValue":m[1]||(m[1]=w=>e(s).search=w),placeholder:"Ex: Vidéoprojecteur, Enceinte, Table...","onSearch:submit":u},null,8,["modelValue"])]),l("div",Da,[c(e(J),{type:"submit",size:"lg",disabled:o.value,class:"w-full md:w-auto min-w-[140px] bg-primary hover:bg-primary/90 shadow-sm dark:bg-primary dark:hover:bg-primary/90",onClick:u},{default:f(()=>[o.value?(p(),$("span",Ua,m[8]||(m[8]=[l("span",{class:"animate-spin inline-block h-5 w-5 border-[3px] border-current border-t-transparent rounded-full"},null,-1)]))):(p(),j(e(je),{key:0,class:"h-5 w-5 mr-2"})),z(" "+q(o.value?"Recherche...":"Rechercher"),1)]),_:1},8,["disabled"])])])]),l("div",Na,[l("div",Ha,[l("div",Ga,[l("div",Wa,[c(e(oe),{for:"radius",class:"flex items-center gap-2"},{default:f(()=>[m[10]||(m[10]=z(" Rayon de recherche ")),c(e(Pt),null,{default:f(()=>[c(e(Ft),null,{default:f(()=>[c(e(Ot),null,{default:f(()=>[c(e(Gt),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),c(e(Rt),null,{default:f(()=>m[9]||(m[9]=[l("p",null,"Distance maximale de recherche",-1)])),_:1,__:[9]})]),_:1})]),_:1})]),_:1,__:[10]}),c(e(Tt),{modelValue:e(s).radius,"onUpdate:modelValue":m[2]||(m[2]=w=>e(s).radius=w)},{default:f(()=>[c(e(It),{id:"radius",class:"w-full bg-white dark:bg-gray-800"},{default:f(()=>[c(e(qt),{placeholder:"Sélectionner un rayon"})]),_:1}),c(e(jt),null,{default:f(()=>[c(e(ae),{value:"5"},{default:f(()=>m[11]||(m[11]=[z("5 km")])),_:1,__:[11]}),c(e(ae),{value:"10"},{default:f(()=>m[12]||(m[12]=[z("10 km")])),_:1,__:[12]}),c(e(ae),{value:"25"},{default:f(()=>m[13]||(m[13]=[z("25 km")])),_:1,__:[13]}),c(e(ae),{value:"50"},{default:f(()=>m[14]||(m[14]=[z("50 km")])),_:1,__:[14]}),c(e(ae),{value:"100"},{default:f(()=>m[15]||(m[15]=[z("100 km")])),_:1,__:[15]})]),_:1})]),_:1},8,["modelValue"])]),l("div",Qa,[c(e(oe),null,{default:f(()=>m[16]||(m[16]=[z("Catégories")])),_:1,__:[16]}),c(La,{modelValue:e(s).categories,"onUpdate:modelValue":m[3]||(m[3]=w=>e(s).categories=w)},null,8,["modelValue"])]),l("div",Xa,[c(e(oe),{class:"flex items-center gap-2"},{default:f(()=>m[17]||(m[17]=[z(" Filtrer par organisation ")])),_:1,__:[17]}),c(Va,{modelValue:e(s).organizations,"onUpdate:modelValue":m[4]||(m[4]=w=>e(s).organizations=w)},null,8,["modelValue"])])])])])])])],2))}},Ya=["src","alt"],Za={key:1,class:"flex h-full w-full items-center justify-center bg-accent/10 text-muted-foreground/30"},eo={class:"flex flex-grow flex-col p-4"},to={class:"flex-grow"},so={class:"line-clamp-1 font-semibold text-foreground transition-colors duration-200 group-hover:text-primary"},ao={class:"text-sm"},oo={class:"font-semibold text-foreground"},no={class:"mt-2 space-y-2 text-xs text-muted-foreground"},lo={class:"truncate"},ro={class:"mt-2 flex items-center text-xs text-muted-foreground"},io={class:"truncate"},uo={__name:"EquipmentCard",props:{equipment:{type:Object,required:!0}},setup(t){const n=t,a=E(!1),r=O(()=>n.equipment.images&&n.equipment.images.length>0),d=()=>{a.value=!0},i=o=>o==null?"":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(o);return(o,s)=>(p(),j(e(Ne),{href:o.route("equipments.show",t.equipment),class:"group relative flex flex-col overflow-hidden rounded-xl border border-border/50 bg-card shadow-sm transition-all duration-200 hover:shadow-lg"},{default:f(()=>{var u,h,_;return[l("div",{class:Q(["relative block aspect-[4/3] overflow-hidden",{shimmer:r.value&&!a.value}])},[r.value?(p(),$("img",{key:0,src:t.equipment.images[0].url,alt:t.equipment.name,loading:"lazy",class:Q(["h-full w-full object-cover transition-all duration-300 group-hover:scale-105",{"opacity-0":!a.value}]),onLoad:d},null,42,Ya)):(p(),$("div",Za,[c(e(Qt),{class:"h-12 w-12"})]))],2),l("div",eo,[l("div",to,[l("h3",so,q(t.equipment.name),1),l("div",ao,[l("span",oo,q(i(t.equipment.rental_price)),1),s[0]||(s[0]=l("span",{class:"text-sm text-muted-foreground"}," / jour",-1))]),l("div",no,[l("span",lo,q(((u=t.equipment.organization)==null?void 0:u.name)||"Particulier")+" - "+q(((h=t.equipment.depot)==null?void 0:h.city)||"Non localisé"),1)]),l("div",ro,[c(e(Zt),{class:"mr-2 h-4 w-4"}),l("span",io,q(((_=t.equipment.category)==null?void 0:_.name)||"Sans catégorie"),1)])])])]}),_:1},8,["href"]))}},co={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},mo={key:0,class:"min-h-[400px] flex flex-col items-center justify-center"},fo={key:1,class:"min-h-[400px] flex flex-col items-center justify-center text-center"},po={class:"w-24 h-24 text-muted-foreground mb-6"},vo={class:"text-xl font-medium text-foreground"},ho={class:"mt-2 text-base text-muted-foreground max-w-md"},go={key:2},yo={class:"mb-6 flex items-center justify-between"},xo={class:"text-lg font-medium text-foreground"},_o={class:"text-sm text-muted-foreground"},bo={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},ko={class:"mt-12"},wo={__name:"ResultsSection",props:{equipments:{type:Object,required:!0},startDate:{type:String,default:""},endDate:{type:String,default:""},isSearching:{type:Boolean,default:!1}},setup(t){const n=t,a=O(()=>n.equipments.data.length>0),r=O(()=>n.startDate||n.endDate);return(d,i)=>(p(),$("div",co,[t.isSearching?(p(),$("div",mo,i[0]||(i[0]=[l("div",{class:"w-16 h-16 mb-4"},[l("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"})],-1),l("h3",{class:"text-lg font-medium text-foreground"},"Recherche en cours...",-1),l("p",{class:"mt-2 text-sm text-muted-foreground"}," Nous recherchons les meilleurs équipements pour vous ",-1)]))):a.value?(p(),$("div",go,[l("div",yo,[l("h2",xo,q(t.equipments.total)+" équipement"+q(t.equipments.total>1?"s":"")+" trouvé"+q(t.equipments.total>1?"s":""),1),l("p",_o," Page "+q(t.equipments.current_page)+" sur "+q(t.equipments.last_page),1)]),l("div",bo,[(p(!0),$(G,null,W(t.equipments.data,o=>(p(),j(uo,{key:o.id,equipment:o,"start-date":t.startDate,"end-date":t.endDate,class:"transition-all duration-300 ease-in-out"},null,8,["equipment","start-date","end-date"]))),128))]),l("div",ko,[c(Wt,{links:t.equipments.links},null,8,["links"])])])):(p(),$("div",fo,[l("div",po,[r.value?(p(),j(e(Yt),{key:0,class:"w-full h-full"})):(p(),j(e(Jt),{key:1,class:"w-full h-full"}))]),l("h3",vo,q(r.value?"Aucun équipement trouvé":"Commencez votre recherche"),1),l("p",ho,q(r.value?"Essayez de modifier vos critères de recherche pour trouver plus de résultats.":"Utilisez la barre de recherche ci-dessus pour trouver l'équipement dont vous avez besoin."),1)]))]))}},$o={key:0,class:"relative"},ln={__name:"Home",props:{equipments:{type:Object,required:!0},filters:{type:Object,default:()=>({})},stats:{type:Object,default:()=>({min_price:0,max_price:1e3,categories:[]})}},setup(t){const n=E(!1),a=Ie(),r=a.props.name,d=a.props.auth.user;return(i,o)=>(p(),j(bt,{title:"Location et prêt de matériel événementiel",description:`${e(r)} facilite la location de matériel entre associations. Trouvez et réservez en quelques clics le matériel dont vous avez besoin pour vos événements.`},{default:f(()=>[e(d)?R("",!0):(p(),$("section",$o,[c(Ss)])),l("section",null,[c(Ja,{filters:t.filters,stats:t.stats,onSearching:o[0]||(o[0]=s=>n.value=s)},null,8,["filters","stats"])]),l("section",{class:Q(["relative py-12 bg-gradient-to-b from-background via-background/50 to-background",{"mt-8":t.equipments.data.length>0}])},[c(wo,{equipments:t.equipments,"start-date":t.filters.start_date,"end-date":t.filters.end_date,isSearching:n.value},null,8,["equipments","start-date","end-date","isSearching"])],2)]),_:1},8,["description"]))}};export{ln as default};
