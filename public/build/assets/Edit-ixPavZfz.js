import B from"./Layout-CHadXthr.js";import{_ as N,e as j,c as R,U as D}from"./FlashMessage-akAaQ0xZ.js";import{c as z,a as T,_ as y}from"./index-DtZUjKA2.js";import{d as P,k as _,o as d,a as V,x,u as t,c as g,w as r,l as s,i as a,J as h,p as i,s as n,f as w,F as E,v as M}from"./app-BtHvNGd4.js";import{_ as J,a as S,b as A,c as f,d as F,e as c}from"./TableHeader.vue_vue_type_script_setup_true_lang-DLX9SEXx.js";import{_ as $,a as b}from"./CardContent.vue_vue_type_script_setup_true_lang-B5QFfY88.js";import{_ as C,a as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-D_17EpQi.js";import{A as I}from"./arrow-left-Cf-gR2DT.js";import{B as q}from"./building-QDE9gncv.js";import{X as L}from"./x-D1Bg_thp.js";import{C as O}from"./clock-D3SLEucY.js";import{P as U,T as Q}from"./trash-2-CaJduJQG.js";import{M as X,P as G}from"./phone-Cq1T0I3S.js";import{C as H}from"./circle-alert-Cn_OPhIs.js";import"./AppLayout-Cjce_HbU.js";import"./createLucideIcon-Byi3NCDv.js";import"./upload-BwrCQaXn.js";import"./Input.vue_vue_type_script_setup_true_lang-SDDPFxwn.js";import"./loader-circle-DQXtExlR.js";const K=P({__name:"Alert",props:{class:{},variant:{}},setup(l){const u=l;return(m,v)=>(d(),_("div",{"data-slot":"alert",class:x(t(z)(t(Z)({variant:m.variant}),u.class)),role:"alert"},[V(m.$slots,"default")],2))}}),W=P({__name:"AlertDescription",props:{class:{}},setup(l){const u=l;return(m,v)=>(d(),_("div",{"data-slot":"alert-description",class:x(t(z)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",u.class))},[V(m.$slots,"default")],2))}}),Y=P({__name:"AlertTitle",props:{class:{}},setup(l){const u=l;return(m,v)=>(d(),_("div",{"data-slot":"alert-title",class:x(t(z)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",u.class))},[V(m.$slots,"default")],2))}}),Z=T("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}}),tt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 py-8"},st={class:"bg-white rounded-lg shadow-sm p-6"},et={class:"mb-6"},at={class:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4 mb-6"},rt={class:"flex-1"},lt={class:"text-2xl sm:text-3xl font-bold text-gray-900"},it={class:"flex items-center gap-2 mt-2"},nt={class:"text-lg sm:text-xl font-semibold text-gray-600"},ot={class:"flex flex-col items-start sm:items-end gap-2"},dt={class:"flex gap-2"},ut={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},mt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ft={class:"flex items-start gap-3"},ct={class:"text-gray-900"},gt={class:"flex items-start gap-3"},vt={class:"text-gray-900"},_t={class:"flex items-start gap-3"},xt={class:"text-gray-900"},pt={class:"flex items-start gap-3"},yt={class:"text-gray-900"},ht={class:"flex items-start gap-3"},wt={class:"text-gray-900"},$t={class:"flex items-start gap-3"},bt={class:"text-gray-900"},Ct={class:"grid grid-cols-1 gap-6"},kt={class:"flex items-start gap-3"},zt={class:"text-gray-900"},Pt={class:"flex items-start gap-3"},Vt={class:"text-gray-900"},jt={class:"flex items-start gap-3"},At={class:"text-gray-900"},qt={class:"flex justify-between items-center"},Bt={class:"text-right"},Nt={class:"text-xl font-bold text-gray-900"},ts={__name:"Edit",props:{reservation:{type:Object,required:!0}},setup(l){const u=l,m=()=>{confirm("Voulez-vous vraiment annuler cette réservation ?")&&h.delete(route("app.organizations.reservations.in.destroy",{reservation:u.reservation.id}))},v=p=>{confirm("Voulez-vous vraiment retirer cet équipement de la réservation ?")&&h.delete(route("organizations.reservations.in.items.destroy",{reservation:u.reservation.id,item:p}))};return(p,e)=>(d(),g(B,{title:"Réservation du "+l.reservation.start_date+" au "+l.reservation.end_date},{default:r(()=>[s("div",tt,[s("div",st,[s("div",et,[a(t(y),{variant:"ghost",class:"gap-2",onClick:e[0]||(e[0]=o=>t(h).visit(p.route("app.organizations.reservations.in.index")))},{default:r(()=>[a(t(I),{class:"h-4 w-4"}),e[1]||(e[1]=i(" Retour aux réservations "))]),_:1,__:[1]})]),s("div",at,[s("div",rt,[s("h1",lt," Réservation du "+n(l.reservation.start_date)+" au "+n(l.reservation.end_date),1),s("div",it,[a(t(q),{class:"h-4 w-4 text-gray-500"}),s("h2",nt,n(l.reservation.from_organization.name),1)])]),s("div",ot,[a(t(N),{class:x(`${l.reservation.status_color}`)},{default:r(()=>[i(n(l.reservation.status_label),1)]),_:1},8,["class"]),s("div",dt,[["pending","confirmed"].includes(l.reservation.status)?(d(),g(t(y),{key:0,variant:"destructive",size:"sm",onClick:m},{default:r(()=>[a(t(L),{class:"h-4 w-4"}),e[2]||(e[2]=i(" Annuler la réservation "))]),_:1,__:[2]})):w("",!0)])])]),s("div",ut,[a(t($),null,{default:r(()=>[a(t(C),null,{default:r(()=>[a(t(k),{class:"text-lg"},{default:r(()=>e[3]||(e[3]=[i("Détails de la réservation")])),_:1,__:[3]})]),_:1}),a(t(b),null,{default:r(()=>[s("div",mt,[s("div",ft,[a(t(j),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[e[4]||(e[4]=s("h3",{class:"text-sm font-medium text-gray-500"},"Récupération",-1)),s("p",ct,n(l.reservation.start_date),1)])]),s("div",gt,[a(t(j),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[e[5]||(e[5]=s("h3",{class:"text-sm font-medium text-gray-500"},"Retour",-1)),s("p",vt,n(l.reservation.end_date),1)])]),s("div",_t,[a(t(O),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[e[6]||(e[6]=s("h3",{class:"text-sm font-medium text-gray-500"},"Durée",-1)),s("p",xt,n(l.reservation.duration)+" jours",1)])]),s("div",pt,[a(t(q),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[e[7]||(e[7]=s("h3",{class:"text-sm font-medium text-gray-500"},"Organisation emprunteuse",-1)),s("p",yt,n(l.reservation.to_organization.name),1)])]),s("div",ht,[a(t(R),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[e[8]||(e[8]=s("h3",{class:"text-sm font-medium text-gray-500"},"Créée le",-1)),s("p",wt,n(l.reservation.created_at),1)])]),s("div",$t,[a(t(U),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[e[9]||(e[9]=s("h3",{class:"text-sm font-medium text-gray-500"},"Dernière mise à jour",-1)),s("p",bt,n(l.reservation.updated_at),1)])])])]),_:1})]),_:1}),a(t($),null,{default:r(()=>[a(t(C),null,{default:r(()=>[a(t(k),{class:"text-lg"},{default:r(()=>e[10]||(e[10]=[i("Contact")])),_:1,__:[10]})]),_:1}),a(t(b),null,{default:r(()=>[s("div",Ct,[s("div",kt,[a(t(D),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[e[11]||(e[11]=s("h3",{class:"text-sm font-medium text-gray-500"},"Nom",-1)),s("p",zt,n(l.reservation.user.name),1)])]),s("div",Pt,[a(t(X),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[e[12]||(e[12]=s("h3",{class:"text-sm font-medium text-gray-500"},"Email",-1)),s("p",Vt,n(l.reservation.user.email),1)])]),s("div",jt,[a(t(G),{class:"h-5 w-5 text-gray-500 mt-0.5"}),s("div",null,[e[13]||(e[13]=s("h3",{class:"text-sm font-medium text-gray-500"},"Téléphone",-1)),s("p",At,n(l.reservation.user.phone||"Non renseigné"),1)])])])]),_:1})]),_:1})]),a(t(K),{variant:"warning",class:"mb-6"},{default:r(()=>[a(t(H),{class:"h-4 w-4"}),a(t(Y),null,{default:r(()=>e[14]||(e[14]=[i("Information importante")])),_:1,__:[14]}),a(t(W),null,{default:r(()=>e[15]||(e[15]=[i(" Pour garantir la sécurité du matériel, les informations de localisation ne sont pas visibles sur cette page."),s("br",null,null,-1),i(" Merci de contacter directement l'organisation pour organiser la récupération. ")])),_:1,__:[15]})]),_:1}),a(t($),null,{default:r(()=>[a(t(C),null,{default:r(()=>[s("div",qt,[a(t(k),{class:"text-lg"},{default:r(()=>e[16]||(e[16]=[i("Matériel réservé")])),_:1,__:[16]}),s("div",Bt,[e[17]||(e[17]=s("p",{class:"text-sm text-gray-600"},"Prix total",-1)),s("p",Nt,n(l.reservation.total)+" €",1)])])]),_:1}),a(t(b),null,{default:r(()=>[a(t(J),null,{default:r(()=>[a(t(S),null,{default:r(()=>[a(t(A),null,{default:r(()=>[a(t(f),null,{default:r(()=>e[18]||(e[18]=[i("Équipement")])),_:1,__:[18]}),a(t(f),null,{default:r(()=>e[19]||(e[19]=[i("Qté")])),_:1,__:[19]}),a(t(f),null,{default:r(()=>e[20]||(e[20]=[i("Jours")])),_:1,__:[20]}),a(t(f),null,{default:r(()=>e[21]||(e[21]=[i("Prix/jour")])),_:1,__:[21]}),a(t(f),null,{default:r(()=>e[22]||(e[22]=[i("Sous-total")])),_:1,__:[22]}),a(t(f),null,{default:r(()=>e[23]||(e[23]=[i("Caution")])),_:1,__:[23]}),a(t(f),null,{default:r(()=>e[24]||(e[24]=[i("Emplacement")])),_:1,__:[24]}),l.reservation.status==="pending"?(d(),g(t(f),{key:0,class:"w-[100px]"})):w("",!0)]),_:1})]),_:1}),a(t(F),null,{default:r(()=>[(d(!0),_(E,null,M(l.reservation.items,o=>(d(),g(t(A),{key:o.id},{default:r(()=>[a(t(c),{class:"font-medium"},{default:r(()=>[i(n(o.equipment.name),1)]),_:2},1024),a(t(c),null,{default:r(()=>[i(n(o.quantity),1)]),_:2},1024),a(t(c),null,{default:r(()=>[i(n(l.reservation.duration),1)]),_:1}),a(t(c),null,{default:r(()=>[i(n(o.price)+" €",1)]),_:2},1024),a(t(c),null,{default:r(()=>[i(n(o.total_price)+" €",1)]),_:2},1024),a(t(c),null,{default:r(()=>[i(n(o.equipment.deposit_amount)+" €",1)]),_:2},1024),a(t(c),null,{default:r(()=>[i(n(o.city),1)]),_:2},1024),l.reservation.status==="pending"?(d(),g(t(c),{key:0},{default:r(()=>[a(t(y),{variant:"ghost",size:"icon",class:"text-destructive hover:text-destructive/90",onClick:Rt=>v(o.id)},{default:r(()=>[a(t(Q),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)):w("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1},8,["title"]))}};export{ts as default};
