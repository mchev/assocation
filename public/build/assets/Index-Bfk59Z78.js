import{k as M,u as S,c as x,o,w as a,b as i,a as e,g as m,h as y,d as s,e as l,f as V,z as A,F as f,r as c,t as g,N as q,n as v,i as b}from"./app-Ca08C4Ts.js";import{_ as N}from"./AppLayout-BKsFCpUx.js";import{_ as j}from"./OrganisationLayout.vue_vue_type_script_setup_true_lang-B_BEIqOf.js";import{_ as u}from"./index-DQFb2pjc.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-Dzh8zi4i.js";import{_ as k}from"./Label.vue_vue_type_script_setup_true_lang-B_y5gcyw.js";import{_ as w}from"./InputError.vue_vue_type_script_setup_true_lang-admlOVfk.js";import{_ as D}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-CC6W5ZPG.js";import{_ as E,a as F}from"./DialogContent.vue_vue_type_script_setup_true_lang-BurhRvic.js";import{_ as P,a as U}from"./DialogFooter.vue_vue_type_script_setup_true_lang-axb2dmfd.js";import{_ as G,a as O}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C6z8-0qT.js";import{_ as R}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BJeDemIZ.js";import{f as L,a as T}from"./fr-D_pP4D31.js";import"./FlashMessage-BA_p-u6m.js";import"./UserDropdown-j1IDwMsM.js";import"./createLucideIcon-DLqlJlEx.js";import"./Teleport-CvVh38YE.js";import"./useForwardExpose-WoIHHMNR.js";import"./index-sAl3LlNg.js";import"./package-BdBWhH5U.js";import"./loader-circle-DZSGICpH.js";import"./plus-CzFBgXBj.js";import"./Heading.vue_vue_type_script_setup_true_lang-B3C_1Uu8.js";import"./Separator.vue_vue_type_script_setup_true_lang-JFT_JzhB.js";import"./Separator-CPIFBsZ6.js";import"./DialogPortal-BQD3x5wO.js";import"./DialogDescription-DzdrYikc.js";import"./DialogTitle-uK4-501C.js";const H={class:"space-y-6"},J={class:"space-y-4"},K={class:"grid gap-4 py-4"},Q={class:"grid gap-2"},W={class:"grid gap-2"},X=["value"],Y={class:"rounded-md border"},Z={class:"border-t"},ee={role:"list",class:"divide-y divide-gray-200 dark:divide-gray-800"},te={class:"min-w-0"},re={class:"flex items-start gap-x-3"},se={class:"text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100"},ie={class:"mt-1 flex items-center gap-x-2 text-xs leading-5 text-gray-500 dark:text-gray-400"},ae={class:"whitespace-nowrap"},ne={class:"flex flex-none items-center gap-x-4"},oe={key:0,class:"rounded-md border"},de={class:"border-t"},le={role:"list",class:"divide-y divide-gray-200 dark:divide-gray-800"},me={class:"min-w-0"},ge={class:"flex items-start gap-x-3"},pe={class:"text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100"},ue={class:"mt-1 flex items-center gap-x-2 text-xs leading-5 text-gray-500 dark:text-gray-400"},_e={class:"whitespace-nowrap"},fe={class:"flex flex-none items-center gap-x-4"},Le={__name:"Index",props:{organization:{type:Object,required:!0},members:{type:Array,required:!0},pendingInvitations:{type:Array,required:!0},roles:{type:Array,required:!0}},setup(p){const _=M(!1),n=S({email:"",role:""}),$=d=>L(new Date(d),"PPP",{locale:T}),h=()=>{n.post(route("app.organizations.members.invite"),{preserveScroll:!0,onSuccess:()=>{n.reset(),_.value=!1}})},z=d=>{confirm(`Êtes-vous sûr de vouloir retirer ${d.name} de l'organisation ?`)&&b.delete(route("app.organizations.members.remove",d.id),{preserveScroll:!0})},I=d=>{confirm(`Êtes-vous sûr de vouloir annuler l'invitation de ${d.email} ?`)&&b.delete(route("app.organizations.invitations.cancel",d.id),{preserveScroll:!0})};return(d,t)=>(o(),x(N,{title:"Gestion des membres"},{default:a(()=>[i(j,null,{default:a(()=>[e("section",H,[i(D,{title:"Gestion des membres",description:"Invitez et gérez les membres de votre organisation."}),e("div",J,[i(s(E),{open:_.value,"onUpdate:open":t[2]||(t[2]=r=>_.value=r)},{default:a(()=>[i(s(R),{asChild:""},{default:a(()=>[i(s(u),null,{default:a(()=>t[3]||(t[3]=[l("Inviter un membre",-1)])),_:1,__:[3]})]),_:1}),i(s(F),null,{default:a(()=>[e("form",{onSubmit:V(h,["prevent"])},[i(s(G),null,{default:a(()=>[i(s(O),null,{default:a(()=>t[4]||(t[4]=[l("Inviter un nouveau membre",-1)])),_:1,__:[4]}),i(s(P),null,{default:a(()=>t[5]||(t[5]=[l(" Envoyez une invitation par email pour rejoindre votre organisation. ",-1)])),_:1,__:[5]})]),_:1}),e("div",K,[e("div",Q,[i(s(k),{for:"email"},{default:a(()=>t[6]||(t[6]=[l("Adresse email",-1)])),_:1,__:[6]}),i(s(B),{id:"email",type:"email",modelValue:s(n).email,"onUpdate:modelValue":t[0]||(t[0]=r=>s(n).email=r),placeholder:"email@example.com",required:""},null,8,["modelValue"]),i(w,{message:s(n).errors.email},null,8,["message"])]),e("div",W,[i(s(k),{for:"role"},{default:a(()=>t[7]||(t[7]=[l("Rôle",-1)])),_:1,__:[7]}),A(e("select",{id:"role","onUpdate:modelValue":t[1]||(t[1]=r=>s(n).role=r),class:"rounded-md border-0 bg-white py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-primary dark:bg-gray-950 dark:text-gray-100 dark:ring-gray-800 sm:text-sm sm:leading-6",required:""},[t[8]||(t[8]=e("option",{value:""},"Sélectionnez un rôle",-1)),(o(!0),m(f,null,c(p.roles,r=>(o(),m("option",{key:r.id,value:r.id},g(r.name),9,X))),128))],512),[[q,s(n).role]]),i(w,{message:s(n).errors.role},null,8,["message"])])]),i(s(U),null,{default:a(()=>[i(s(u),{type:"submit",disabled:s(n).processing},{default:a(()=>t[9]||(t[9]=[l(" Envoyer l'invitation ",-1)])),_:1,__:[9]},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),e("div",Y,[t[11]||(t[11]=e("div",{class:"px-4 py-3 sm:px-6"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-100"}," Membres actifs ")],-1)),e("div",Z,[e("ul",ee,[(o(!0),m(f,null,c(p.members,r=>(o(),m("li",{key:r.id,class:"flex items-center justify-between gap-x-6 px-4 py-5 sm:px-6"},[e("div",te,[e("div",re,[e("p",se,g(r.name),1),e("p",{class:v(["rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset",r.role==="admin"?"text-green-700 bg-green-50 ring-green-600/20 dark:bg-green-500/10 dark:text-green-400 dark:ring-green-500/20":"text-gray-600 bg-gray-50 ring-gray-500/10 dark:bg-gray-400/10 dark:text-gray-400 dark:ring-gray-400/20"])},g(r.role==="admin"?"Administrateur":"Membre"),3)]),e("div",ie,[e("p",ae,g(r.email),1)])]),e("div",ne,[r.id!==p.organization.owner_id?(o(),x(s(u),{key:0,variant:"ghost",onClick:C=>z(r)},{default:a(()=>t[10]||(t[10]=[l(" Retirer ",-1)])),_:2,__:[10]},1032,["onClick"])):y("",!0)])]))),128))])])]),p.pendingInvitations.length>0?(o(),m("div",oe,[t[13]||(t[13]=e("div",{class:"px-4 py-3 sm:px-6"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-100"}," Invitations en attente ")],-1)),e("div",de,[e("ul",le,[(o(!0),m(f,null,c(p.pendingInvitations,r=>(o(),m("li",{key:r.id,class:"flex items-center justify-between gap-x-6 px-4 py-5 sm:px-6"},[e("div",me,[e("div",ge,[e("p",pe,g(r.email),1),e("p",{class:v(["rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset",r.role==="admin"?"text-green-700 bg-green-50 ring-green-600/20 dark:bg-green-500/10 dark:text-green-400 dark:ring-green-500/20":"text-gray-600 bg-gray-50 ring-gray-500/10 dark:bg-gray-400/10 dark:text-gray-400 dark:ring-gray-400/20"])},g(r.role==="admin"?"Administrateur":"Membre"),3)]),e("div",ue,[e("p",_e,"Invité le "+g($(r.created_at)),1)])]),e("div",fe,[i(s(u),{variant:"ghost",onClick:C=>I(r)},{default:a(()=>t[12]||(t[12]=[l(" Annuler ",-1)])),_:2,__:[12]},1032,["onClick"])])]))),128))])])])):y("",!0)])])]),_:1})]),_:1}))}};export{Le as default};
