import{z as N,r as k,c as w,o as i,w as n,k as f,f as S,l as e,i as s,u as t,p as g,s as v,S as I,F as q,v as z,x as P,H as ae,M as oe,b as j,I as Y,P as Z,G as re,B as E,C as le,L as ie,e as U,A as ne,g as de}from"./app-CJtJsqc-.js";import{_ as ue}from"./AppLayout-B68rpo0y.js";import{_ as ce,a as me}from"./CardContent.vue_vue_type_script_setup_true_lang-Ck-YZuBC.js";import{_ as V}from"./index-BCt9P7yL.js";import{X as R}from"./x-C1477Tul.js";import{A as ee,E as fe}from"./euro-CLpjFgw6.js";import{S as pe}from"./sparkles-B5Q2UgDp.js";import{S as te,U as ve}from"./users-CwstaBrU.js";import{c as M}from"./createLucideIcon-Dnc3LuVi.js";import{a as he,b as ge,c as xe,d as D,_ as _e}from"./SelectValue.vue_vue_type_script_setup_true_lang-CgWEOj-w.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-DjYCe0WY.js";import{_ as A,a as O,b as H,c as B}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BvtiRTzk.js";import{l as ye,m as be,n as ke,o as G,e as Q,_ as $e}from"./DateRangePicker-Bj_7Ohyu.js";import{e as se,_ as we,d as Se}from"./FlashMessage-BkXevc28.js";import{d as qe}from"./debounce-DYcKdETa.js";import{M as L}from"./map-pin-widEaPt1.js";import{_ as Ve}from"./Pagination-S8lYpPF1.js";import{T as Ce}from"./triangle-alert-DNDETKXY.js";import{f as K,a as X}from"./fr-D_pP4D31.js";import"./Input.vue_vue_type_script_setup_true_lang-uKf5iQOD.js";import"./chevron-down-DPCR0opZ.js";import"./clamp-Cgg7hyyM.js";import"./check-GxluelUy.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./VisuallyHidden-DkQfVoa4.js";import"./nullish-CHIgUVhi.js";import"./useKbd-kRIii9yh.js";import"./chevron-right-BHerAQ68.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=M("CircleHelpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=M("LayoutListIcon",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=M("PackageSearchIcon",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=M("SearchXIcon",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=M("TagIcon",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Me={key:0,"aria-labelledby":"hero-heading",class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Te={class:"flex flex-col lg:flex-row items-center gap-8"},Ie={class:"flex-1 text-center lg:text-left"},Re={class:"space-y-4"},Fe={class:"text-base text-gray-500 max-w-xl mx-auto lg:mx-0 dark:text-gray-400"},Ee={class:"text-gray-900 dark:text-white"},Ue={class:"mt-6 flex flex-wrap items-center gap-3 justify-center lg:justify-start"},Le={class:"flex-shrink-0 lg:w-80"},Ne={class:"rounded-lg p-4"},Pe={class:"grid gap-3",role:"list"},Ae={class:"text-sm font-medium text-gray-900 dark:text-white"},Oe={class:"text-xs text-gray-500 mt-0.5 dark:text-gray-400"},He={__name:"HeroSection",setup(a){const _=N().props.name,p=k(!0),u=()=>{p.value=!1,localStorage.setItem("heroCardDismissed","true")},l=[{icon:pe,title:"Gratuit",description:"Pour une association ou un particulier"},{icon:te,title:"Réservation sécurisée",description:"Processus simple et sûr"},{icon:De,title:"Gestion d'inventaire",description:"Suivez votre matériel"},{icon:ve,title:"Communauté active",description:"Réseau associatif"}];return(c,d)=>(i(),w(oe,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform -translate-y-4 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-4 opacity-0"},{default:n(()=>[p.value?(i(),f("section",Me,[d[7]||(d[7]=e("div",{class:"absolute inset-0 rounded-2xl"},null,-1)),s(t(ce),{class:"relative border-none bg-gradient-to-br from-violet-100 via-blue-50 to-background dark:from-violet-950 dark:via-blue-950 dark:to-background"},{default:n(()=>[s(t(V),{variant:"ghost",size:"icon",class:"absolute right-3 top-3 hover:bg-white/80",onClick:u},{default:n(()=>[s(t(R),{class:"h-4 w-4"}),d[0]||(d[0]=e("span",{class:"sr-only"},"Fermer la bannière d'accueil",-1))]),_:1,__:[0]}),s(t(me),{class:"p-6"},{default:n(()=>[e("div",Te,[e("div",Ie,[e("div",Re,[d[2]||(d[2]=e("h1",{id:"hero-heading",class:"text-2xl sm:text-3xl font-bold font-title text-gray-900 leading-tight dark:text-white"},[e("span",{class:"inline-block"},[g(" Location et prêt de matériel "),e("span",{class:"bg-gradient-to-r from-violet-600 to-blue-600 bg-clip-text text-transparent whitespace-nowrap dark:from-violet-400 dark:to-blue-400"},"événementiel")]),e("span",{class:"block text-lg sm:text-xl mt-2 text-gray-600 font-medium dark:text-gray-400"}," entre associations et particuliers ")],-1)),e("p",Fe,[e("strong",Ee,v(t(_)),1),d[1]||(d[1]=g(" facilite la location de matériel entre associations. Trouvez et réservez en quelques clics le matériel dont vous avez besoin pour vos événements. "))])]),e("div",Ue,[s(t(I),{href:c.route("discover"),class:"inline-flex items-center px-5 py-2.5 text-sm font-medium rounded-lg bg-gradient-to-r from-violet-600 to-blue-600 text-white hover:from-violet-700 hover:to-blue-700 transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-violet-500 dark:from-violet-500 dark:to-blue-500 dark:hover:from-violet-600 dark:hover:to-blue-600"},{default:n(()=>[d[3]||(d[3]=g(" Découvrir la plateforme ")),s(t(ee),{class:"ml-2 h-4 w-4"})]),_:1,__:[3]},8,["href"]),s(t(V),{variant:"outline",as:"a",href:c.route("how-it-works"),class:"text-sm border-violet-200 text-violet-700 hover:bg-violet-50 dark:border-violet-800 dark:text-violet-300 dark:hover:bg-violet-900"},{default:n(()=>d[4]||(d[4]=[g(" Comment ça marche ? ")])),_:1,__:[4]},8,["href"])])]),d[6]||(d[6]=e("div",{class:"hidden lg:block w-px h-32 bg-gradient-to-b from-violet-200 to-blue-200 self-center dark:from-violet-800 dark:to-blue-800"},null,-1)),e("div",Le,[e("div",Ne,[d[5]||(d[5]=e("h2",{class:"text-sm font-medium text-gray-900 mb-4 dark:text-white"}," Avantages de la plateforme ",-1)),e("ul",Pe,[(i(),f(q,null,z(l,r=>e("li",{key:r.title,class:"flex items-start gap-3 group"},[e("div",{class:P(["rounded-md bg-gradient-to-br from-violet-100 to-blue-100 p-2 group-hover:from-violet-200 group-hover:to-blue-200 transition-colors duration-200 dark:from-violet-900 dark:to-blue-900",{"from-violet-200 to-blue-200 dark:from-violet-800 dark:to-blue-800":r.title==="Gratuit"}])},[(i(),w(ae(r.icon),{class:"w-4 h-4 text-violet-600 dark:text-violet-400"}))],2),e("div",null,[e("h3",Ae,v(r.title),1),e("p",Oe,v(r.description),1)])])),64))])])])])]),_:1})]),_:1})])):S("",!0)]),_:1}))}},Be={class:"space-y-1.5"},Ge=["for"],Qe={class:"relative"},Ke=["id","value"],Xe={value:"all"},Je=["value"],We=["value"],Ye={__name:"CategoryTreeSelectSimple",props:{modelValue:{type:[String,Number],default:"all"},categories:{type:Array,required:!0},label:{type:String,default:"Catégorie"},id:{type:String,default:"category-select"},allItemsLabel:{type:String,default:"Toutes les catégories"}},emits:["update:modelValue"],setup(a){return(h,_)=>(i(),f("div",Be,[e("label",{for:a.id,class:"text-sm font-medium text-gray-700 dark:text-white"},v(a.label),9,Ge),e("div",Qe,[e("select",{id:a.id,value:a.modelValue,onChange:_[0]||(_[0]=p=>h.$emit("update:modelValue",p.target.value)),class:"w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-gray-800"},[e("option",Xe,v(a.allItemsLabel),1),(i(!0),f(q,null,z(a.categories,p=>{var u;return i(),f(q,{key:p.id},[e("option",{value:p.id},v(p.name),9,Je),(u=p.children)!=null&&u.length?(i(!0),f(q,{key:0},z(p.children,l=>(i(),f("option",{key:l.id,value:l.id}," — "+v(l.name),9,We))),128)):S("",!0)],64)}),128))],40,Ke)])]))}},Ze={class:"flex items-center border rounded-lg shadow-md bg-background"},et={class:"pl-3 text-muted-foreground"},tt=["onKeydown"],st={__name:"SearchInput",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","search:submit"],setup(a,{emit:h}){const _=a,p=h,u=k(null),l=j({get(){return _.modelValue},set(r){p("update:modelValue",r)}}),c=()=>{l.value="",le(()=>{var r;(r=u.value)==null||r.focus()})},d=()=>{p("search:submit",l.value)};return(r,b)=>(i(),f("div",Ze,[e("span",et,[s(t(se),{class:"h-5 w-5"})]),Y(e("input",{ref_key:"inputRef",ref:u,"onUpdate:modelValue":b[0]||(b[0]=C=>l.value=C),type:"text",class:"flex-1 h-12 px-3 bg-transparent focus:outline-none",placeholder:"Que recherchez-vous ?",onKeydown:re(E(d,["prevent"]),["enter"]),autocomplete:"off"},null,40,tt),[[Z,l.value]]),l.value?(i(),f("button",{key:0,onMousedown:E(c,["prevent"]),class:"pr-3 text-muted-foreground hover:text-foreground",tabindex:"-1"},[s(t(R),{class:"h-4 w-4"})],32)):S("",!0)]))}},at={class:"relative w-full"},ot={class:"flex items-center border rounded-lg shadow-md bg-background"},rt={class:"pl-3 text-muted-foreground"},lt=["disabled"],it={key:0,class:"py-6 text-center text-sm text-muted-foreground"},nt={key:1,class:"py-6 text-center text-sm text-destructive"},dt={key:2,class:"py-6 text-center text-sm text-muted-foreground"},ut={key:3,class:"max-h-[300px] overflow-y-auto"},ct=["onClick"],mt={class:"flex flex-col"},ft={class:"text-xs text-muted-foreground"},pt={__name:"CityInput",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","coordinates","city"],setup(a,{emit:h}){const _=a,p=h,u=k(_.modelValue),l=k([]),c=k(!1),d=k(!1),r=k(""),b=qe(async y=>{if(y.length<3){l.value=[],c.value=!1,r.value="";return}d.value=!0,c.value=!0,r.value="";try{const x=await ie.get(`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(y)}&type=municipality&limit=5`);if(!x.data.features||x.data.features.length===0){l.value=[];return}l.value=x.data.features.map(m=>({id:m.properties.id,name:m.properties.city,postcode:m.properties.postcode,coordinates:{lat:m.geometry.coordinates[1],lng:m.geometry.coordinates[0]}}))}catch(x){console.error("Error fetching city suggestions:",x),l.value=[],x.value="Erreur lors de la recherche de villes. Veuillez réessayer."}finally{d.value=!1}},300);U(u,y=>{p("update:modelValue",y),y.length>=3?b(y):(l.value=[],c.value=!1)});const C=y=>{u.value=y.name,c.value=!1,r.value="",p("update:modelValue",{name:y.name,lat:y.coordinates.lat,lng:y.coordinates.lng,postcode:y.postcode,departement:y.postcode.substring(0,2)})},F=()=>{u.value="",l.value=[],c.value=!1,r.value="",p("update:modelValue","")};return(y,x)=>(i(),f("div",at,[s(t(ke),{open:c.value,"onUpdate:open":x[2]||(x[2]=m=>c.value=m)},{default:n(()=>[s(t(ye),{asChild:""},{default:n(()=>[e("div",ot,[e("span",rt,[s(t(L),{class:"h-5 w-5"})]),Y(e("input",{"onUpdate:modelValue":x[0]||(x[0]=m=>u.value=m),type:"text",class:"flex-1 h-12 px-3 bg-transparent focus:outline-none",placeholder:"Ajouter une localisation",disabled:d.value,onFocus:x[1]||(x[1]=m=>c.value=!0)},null,40,lt),[[Z,u.value]]),u.value?(i(),f("button",{key:0,onMousedown:E(F,["prevent"]),class:"pr-3 text-muted-foreground hover:text-foreground",tabindex:"-1"},[s(t(R),{class:"h-4 w-4"})],32)):S("",!0)])]),_:1}),s(t(be),{class:"w-full p-0",align:"start"},{default:n(()=>[d.value?(i(),f("div",it,x[3]||(x[3]=[e("div",{class:"flex items-center justify-center"},[e("div",{class:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e("span",{class:"ml-2"},"Recherche en cours...")],-1)]))):r.value?(i(),f("div",nt,v(r.value),1)):l.value.length===0?(i(),f("div",dt," Aucun résultat trouvé ")):(i(),f("div",ut,[(i(!0),f(q,null,z(l.value,m=>(i(),f("div",{key:m.id,class:"flex items-center gap-2 px-4 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground",onClick:o=>C(m)},[s(t(L),{class:"h-4 w-4 text-muted-foreground"}),e("div",mt,[e("span",null,v(m.name),1),e("span",ft,v(m.postcode),1)])],8,ct))),128))]))]),_:1})]),_:1},8,["open"])]))}},vt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ht={class:"relative rounded-xl shadow-xl border border-gray-200/60"},gt={key:0,class:"px-6 pt-6 pb-4"},xt={class:"px-6 pb-6"},_t={class:"flex flex-col md:flex-row gap-4 p-4"},yt={class:"flex-1"},bt={class:"flex-1"},kt={class:"flex items-end"},$t={key:1,class:"h-5 w-5 mr-2"},wt={class:"px-6 pb-6"},St={class:""},qt={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},Vt={class:"space-y-2"},Ct={class:"space-y-2"},Dt={class:"flex justify-end items-end"},zt={__name:"SearchSection",props:{filters:{type:Object,default:()=>({})},stats:{type:Object,required:!0}},emits:["searching"],setup(a,{emit:h}){const p=N().props.auth.user,u=a,l=h,c=k(!1),d=k({from:u.filters.start_date?G(u.filters.start_date):void 0,to:u.filters.end_date?G(u.filters.end_date):void 0});U(d,m=>{r.start_date=m.from?m.from.toDate(Q()).toISOString().split("T")[0]:"",r.end_date=m.to?m.to.toDate(Q()).toISOString().split("T")[0]:""},{deep:!0});const r=ne({search:u.filters.search||"",radius:u.filters.radius||50,start_date:u.filters.start_date||"",end_date:u.filters.end_date||"",coordinates:u.filters.coordinates||null,city:u.filters.city||null,postcode:u.filters.postcode||null}),b=()=>{c.value=!0,l("searching",c.value),r.get(route("home"),{only:["filters","equipments"],preserveScroll:!0,preserveState:!0,onFinish:()=>{c.value=!1,l("searching",c.value)}})},C=()=>{const m=localStorage.getItem("search_filters");if(m)try{const o=JSON.parse(m);r.city=o.city||null,r.coordinates=o.coordinates||null,r.radius=o.radius||50,r.postcode=o.postcode||null}catch(o){console.error("Error loading filters from localStorage:",o)}},F=m=>{try{const o={city:m.city,coordinates:m.coordinates,radius:m.radius,postcode:m.postcode};localStorage.setItem("search_filters",JSON.stringify(o))}catch(o){console.error("Error saving filters to localStorage:",o)}};U(r,m=>{F(m)},{deep:!0}),de(()=>{C()});const y=()=>{d.value={from:void 0,to:void 0},r.reset({search:"",radius:50,start_date:"",end_date:"",coordinates:null,city:null,postcode:null}),localStorage.removeItem("search_filters"),b()},x=m=>{r.city=m.name,r.postcode=m.postcode,r.coordinates={lat:m.lat,lng:m.lng},r.radius=r.radius||5};return(m,o)=>(i(),f("div",{class:P({"relative mt-8":t(p)})},[e("div",vt,[e("div",ht,[t(p)?S("",!0):(i(),f("div",gt,o[5]||(o[5]=[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Trouvez le matériel dont vous avez besoin",-1),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Recherchez parmi des milliers d'équipements disponibles près de chez vous.",-1)]))),e("div",xt,[e("div",_t,[e("div",yt,[s(t(T),{class:"text-sm font-medium mb-2 text-gray-700 dark:text-white"},{default:n(()=>o[6]||(o[6]=[g("Dans quel secteur ?")])),_:1,__:[6]}),s(pt,{modelValue:t(r).city,"onUpdate:modelValue":[o[0]||(o[0]=$=>t(r).city=$),x],placeholder:"Entrez une ville ou un code postal"},null,8,["modelValue"])]),e("div",bt,[s(t(T),{class:"text-sm font-medium mb-2 text-gray-700 dark:text-white"},{default:n(()=>o[7]||(o[7]=[g("Que recherchez-vous ?")])),_:1,__:[7]}),s(st,{modelValue:t(r).search,"onUpdate:modelValue":o[1]||(o[1]=$=>t(r).search=$),placeholder:"Ex: Vidéoprojecteur, Enceinte, Table...","onSearch:submit":b},null,8,["modelValue"])]),e("div",kt,[s(t(V),{type:"submit",size:"lg",disabled:c.value,class:"w-full md:w-auto min-w-[140px] bg-primary hover:bg-primary/90 shadow-sm dark:bg-primary dark:hover:bg-primary/90",onClick:b},{default:n(()=>[c.value?(i(),f("span",$t,o[8]||(o[8]=[e("span",{class:"animate-spin inline-block h-5 w-5 border-[3px] border-current border-t-transparent rounded-full"},null,-1)]))):(i(),w(t(se),{key:0,class:"h-5 w-5 mr-2"})),g(" "+v(c.value?"Recherche...":"Rechercher"),1)]),_:1},8,["disabled"])])])]),e("div",wt,[e("div",St,[e("div",qt,[s(Ye,{modelValue:t(r).category,"onUpdate:modelValue":[o[2]||(o[2]=$=>t(r).category=$),b],categories:a.stats.categories},null,8,["modelValue","categories"]),e("div",Vt,[s(t(T),{for:"radius",class:"flex items-center gap-2"},{default:n(()=>[o[10]||(o[10]=g(" Rayon de recherche ")),s(t(A),null,{default:n(()=>[s(t(O),null,{default:n(()=>[s(t(H),null,{default:n(()=>[s(t(J),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(B),null,{default:n(()=>o[9]||(o[9]=[e("p",null,"Distance maximale de recherche",-1)])),_:1,__:[9]})]),_:1})]),_:1})]),_:1,__:[10]}),s(t(_e),{modelValue:t(r).radius,"onUpdate:modelValue":[o[3]||(o[3]=$=>t(r).radius=$),b]},{default:n(()=>[s(t(he),{id:"radius",class:"w-full bg-white dark:bg-gray-800"},{default:n(()=>[s(t(ge),{placeholder:"Sélectionner un rayon"})]),_:1}),s(t(xe),null,{default:n(()=>[s(t(D),{value:"5"},{default:n(()=>o[11]||(o[11]=[g("5 km")])),_:1,__:[11]}),s(t(D),{value:"10"},{default:n(()=>o[12]||(o[12]=[g("10 km")])),_:1,__:[12]}),s(t(D),{value:"25"},{default:n(()=>o[13]||(o[13]=[g("25 km")])),_:1,__:[13]}),s(t(D),{value:"50"},{default:n(()=>o[14]||(o[14]=[g("50 km")])),_:1,__:[14]}),s(t(D),{value:"100"},{default:n(()=>o[15]||(o[15]=[g("100 km")])),_:1,__:[15]})]),_:1})]),_:1},8,["modelValue"])]),e("div",Ct,[s(t(T),{class:"flex items-center gap-2"},{default:n(()=>[o[17]||(o[17]=g(" Période de location ")),s(t(A),null,{default:n(()=>[s(t(O),null,{default:n(()=>[s(t(H),null,{default:n(()=>[s(t(J),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(t(B),null,{default:n(()=>o[16]||(o[16]=[e("p",null,"Période de location souhaitée",-1)])),_:1,__:[16]})]),_:1})]),_:1})]),_:1,__:[17]}),s($e,{modelValue:d.value,"onUpdate:modelValue":[o[4]||(o[4]=$=>d.value=$),b]},null,8,["modelValue"])]),e("div",Dt,[s(t(V),{variant:"outline",size:"sm",onClick:y,class:"text-sm hover:text-destructive hover:border-destructive dark:hover:text-destructive dark:hover:border-destructive"},{default:n(()=>[s(t(R),{class:"h-4 w-4 mr-1.5"}),o[18]||(o[18]=g(" Réinitialiser les filtres "))]),_:1,__:[18]})])])])])])])],2))}},jt={class:"group relative bg-card rounded-xl shadow-sm border border-border/50 overflow-hidden hover:shadow-lg transition-all duration-200"},Mt=["src","alt"],Tt={key:1,class:"w-full h-full flex items-center justify-center text-muted-foreground/30"},It={class:"absolute top-3 right-3"},Rt={class:"p-6"},Ft={class:"flex items-start justify-between gap-4"},Et={class:"text-lg font-semibold text-foreground group-hover:text-primary transition-colors duration-200 line-clamp-2"},Ut={class:"mt-4 space-y-3"},Lt={class:"flex items-center text-sm text-muted-foreground"},Nt={class:"truncate"},Pt={class:"flex items-center text-sm text-muted-foreground"},At={class:"truncate"},Ot={class:"flex items-center text-sm text-muted-foreground"},Ht={key:0,class:"mt-4 p-3 bg-accent/50 rounded-lg space-y-2"},Bt={class:"flex items-center text-sm"},Gt={class:"text-muted-foreground"},Qt={class:"flex items-center justify-between text-sm font-medium"},Kt={class:"text-foreground"},Xt={class:"mt-4 text-sm text-muted-foreground line-clamp-2"},Jt={class:"mt-6"},Wt={__name:"EquipmentCard",props:{equipment:{type:Object,required:!0},startDate:{type:String,default:""},endDate:{type:String,default:""}},setup(a){const h=a,_=j(()=>{if(!h.startDate||!h.endDate)return h.equipment.rental_price;const l=new Date(h.startDate),c=new Date(h.endDate),d=Math.ceil((c-l)/(1e3*60*60*24))+1;return(h.equipment.rental_price*d).toFixed(2)}),p=l=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(l),u=j(()=>{if(!h.startDate||!h.endDate)return null;const l=new Date(h.startDate),c=new Date(h.endDate),d=Math.ceil((c-l)/(1e3*60*60*24))+1;return{start:K(l,"dd MMM yyyy",{locale:X}),end:K(c,"dd MMM yyyy",{locale:X}),days:d}});return(l,c)=>{var d,r;return i(),f("div",jt,[s(t(I),{href:l.route("equipments.show",a.equipment),class:"block aspect-[16/9] bg-accent/10 relative overflow-hidden"},{default:n(()=>[a.equipment.images&&a.equipment.images.length>0?(i(),f("img",{key:0,src:a.equipment.images[0].url,alt:a.equipment.name,loading:"lazy",placeholder:"blur",class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"},null,8,Mt)):(i(),f("div",Tt,[s(t(W),{class:"w-12 h-12"})])),e("div",It,[s(t(we),{variant:a.equipment.is_available?"success":"destructive",class:"flex items-center gap-1 shadow-sm"},{default:n(()=>[a.equipment.is_available?(i(),w(t(te),{key:0,class:"h-3 w-3"})):(i(),w(t(Ce),{key:1,class:"h-3 w-3"})),g(" "+v(a.equipment.is_available?"Disponible":"Indisponible"),1)]),_:1},8,["variant"])])]),_:1},8,["href"]),e("div",Rt,[e("div",Ft,[s(t(I),{href:l.route("equipments.show",a.equipment),class:"block"},{default:n(()=>[e("h3",Et,v(a.equipment.name),1)]),_:1},8,["href"])]),e("div",Ut,[e("div",Lt,[s(t(L),{class:"h-4 w-4 mr-2 text-primary/70 flex-shrink-0"}),e("span",Nt,v(((d=a.equipment.depot)==null?void 0:d.city)||"Non localisé"),1)]),e("div",Pt,[s(t(W),{class:"h-4 w-4 mr-2 text-primary/70 flex-shrink-0"}),e("span",At,v(((r=a.equipment.category)==null?void 0:r.name)||"Sans catégorie"),1)]),e("div",Ot,[s(t(fe),{class:"h-4 w-4 mr-2 text-primary/70 flex-shrink-0"}),e("span",null,v(p(a.equipment.rental_price))+" / jour",1)])]),u.value?(i(),f("div",Ht,[e("div",Bt,[s(t(Se),{class:"h-4 w-4 mr-2 text-primary/70"}),e("span",Gt,v(u.value.start)+" - "+v(u.value.end),1)]),e("div",Qt,[e("span",null,"Total ("+v(u.value.days)+" jour"+v(u.value.days>1?"s":"")+")",1),e("span",Kt,v(p(_.value)),1)])])):S("",!0),e("p",Xt,v(a.equipment.description),1),e("div",Jt,[s(t(V),{asChild:"",class:"w-full group/button"},{default:n(()=>[s(t(I),{href:l.route("equipments.show",a.equipment)},{default:n(()=>[c[0]||(c[0]=g(" Voir les détails ")),s(t(ee),{class:"ml-2 h-4 w-4 transition-transform group-hover/button:translate-x-1"})]),_:1,__:[0]},8,["href"])]),_:1})])])])}}},Yt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Zt={key:0,class:"min-h-[400px] flex flex-col items-center justify-center"},es={key:1,class:"min-h-[400px] flex flex-col items-center justify-center text-center"},ts={class:"w-24 h-24 text-muted-foreground mb-6"},ss={class:"text-xl font-medium text-foreground"},as={class:"mt-2 text-base text-muted-foreground max-w-md"},os={key:0,class:"mt-6"},rs={key:2},ls={class:"mb-6 flex items-center justify-between"},is={class:"text-lg font-medium text-foreground"},ns={class:"text-sm text-muted-foreground"},ds={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},us={class:"mt-12"},cs={__name:"ResultsSection",props:{equipments:{type:Object,required:!0},startDate:{type:String,default:""},endDate:{type:String,default:""},isSearching:{type:Boolean,default:!1}},setup(a){const h=a,_=j(()=>h.equipments.data.length>0),p=j(()=>h.startDate||h.endDate);return(u,l)=>(i(),f("div",Yt,[a.isSearching?(i(),f("div",Zt,l[1]||(l[1]=[e("div",{class:"w-16 h-16 mb-4"},[e("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary"})],-1),e("h3",{class:"text-lg font-medium text-foreground"},"Recherche en cours...",-1),e("p",{class:"mt-2 text-sm text-muted-foreground"}," Nous recherchons les meilleurs équipements pour vous ",-1)]))):_.value?(i(),f("div",rs,[e("div",ls,[e("h2",is,v(a.equipments.total)+" équipement"+v(a.equipments.total>1?"s":"")+" trouvé"+v(a.equipments.total>1?"s":""),1),e("p",ns," Page "+v(a.equipments.current_page)+" sur "+v(a.equipments.last_page),1)]),e("div",ds,[(i(!0),f(q,null,z(a.equipments.data,c=>(i(),w(Wt,{key:c.id,equipment:c,"start-date":a.startDate,"end-date":a.endDate,class:"transition-all duration-300 ease-in-out"},null,8,["equipment","start-date","end-date"]))),128))]),e("div",us,[s(Ve,{links:a.equipments.links},null,8,["links"])])])):(i(),f("div",es,[e("div",ts,[p.value?(i(),w(t(je),{key:0,class:"w-full h-full"})):(i(),w(t(ze),{key:1,class:"w-full h-full"}))]),e("h3",ss,v(p.value?"Aucun équipement trouvé":"Commencez votre recherche"),1),e("p",as,v(p.value?"Essayez de modifier vos critères de recherche pour trouver plus de résultats.":"Utilisez la barre de recherche ci-dessus pour trouver l'équipement dont vous avez besoin."),1),p.value?(i(),f("div",os,[s(t(V),{variant:"outline",onClick:l[0]||(l[0]=c=>u.$emit("reset-filters"))},{default:n(()=>l[2]||(l[2]=[g(" Réinitialiser les filtres ")])),_:1,__:[2]})])):S("",!0)]))]))}},ms={key:0,class:"relative pb-12"},As={__name:"Home",props:{equipments:{type:Object,required:!0},filters:{type:Object,default:()=>({})},stats:{type:Object,default:()=>({min_price:0,max_price:1e3,categories:[]})}},setup(a){const h=k(!1),_=N(),p=_.props.name,u=_.props.auth.user;return(l,c)=>(i(),w(ue,{title:"Location et prêt de matériel événementiel",description:`${t(p)} facilite la location de matériel entre associations. Trouvez et réservez en quelques clics le matériel dont vous avez besoin pour vos événements.`},{default:n(()=>[t(u)?S("",!0):(i(),f("section",ms,[s(He)])),e("section",null,[s(zt,{filters:a.filters,stats:a.stats,onSearching:c[0]||(c[0]=d=>h.value=d)},null,8,["filters","stats"])]),e("section",{class:P(["relative py-12 bg-gradient-to-b from-background via-background/50 to-background",{"mt-8":a.equipments.data.length>0}])},[s(cs,{equipments:a.equipments,"start-date":a.filters.start_date,"end-date":a.filters.end_date,isSearching:h.value},null,8,["equipments","start-date","end-date","isSearching"])],2)]),_:1},8,["description"]))}};export{As as default};
