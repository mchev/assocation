import{u as O,c as f,o as i,w as s,b as a,a as r,d as e,I as T,f as G,e as n,g as b,F as q,r as F,t as m,h as $,G as k,l as N,n as L}from"./app-sSnOuiS_.js";import E from"./Layout-CH0k68tO.js";import{_}from"./index-CngNQWs9.js";import{_ as R,a as U}from"./CardContent.vue_vue_type_script_setup_true_lang-BaBJ3IcR.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-e9BOQLmt.js";import{_ as z}from"./Label.vue_vue_type_script_setup_true_lang-BMfO6R1t.js";import{_ as P,a as H,b as B,c,d as J,e as x}from"./TableHeader.vue_vue_type_script_setup_true_lang-VxuxCyOl.js";import{_ as K,a as Q,b as W,c as X,d as I}from"./SelectValue.vue_vue_type_script_setup_true_lang-DKHh9TjG.js";import{_ as Y}from"./Pagination-CIKOLZGE.js";import{A as Z,a as tt}from"./arrow-up-down-C8ZTd138.js";import{A as et}from"./arrow-up-BRuf1qX_.js";import"./AppLayout--uU8Elsr.js";import"./FlashMessage-DCuqi0Nv.js";import"./UserDropdown-CfJ1VFfX.js";import"./createLucideIcon-DOaAfCYf.js";import"./Teleport-CwCxbVhN.js";import"./useForwardExpose-MUkCD28K.js";import"./index-DbanMfEd.js";import"./package-B14j99Lx.js";import"./loader-circle--oOnvbLv.js";import"./upload-CWTpmYWR.js";import"./useNonce-B46GxRdC.js";import"./chevron-down-CBTH8hce.js";import"./nullish-DiobDxmp.js";import"./useFormControl-Dgh79oge.js";const st={class:"flex justify-between items-center"},at={class:"font-semibold text-xl leading-tight"},rt={class:"py-12"},lt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ot={class:"flex flex-wrap items-end gap-6"},nt={class:"flex gap-2 ml-auto"},it={key:0,class:"text-center py-12"},ut={key:1},dt={class:"flex items-center space-x-2"},ft={class:"flex items-center space-x-2"},mt={class:"flex items-center space-x-2"},pt={class:"flex items-center space-x-2"},_t={class:"text-xs text-gray-500"},vt={class:"flex items-center justify-end space-x-2"},ct={class:"mt-4"},Gt={__name:"Index",props:{organization:{type:Object,required:!0},reservations:{type:Object,required:!0},filters:{type:Object,required:!0},can:{type:Object,required:!0},statuses:{type:Array,required:!0}},setup(u){var C,D,h,A,S,j;const p=u,o=O({search:((C=p.filters)==null?void 0:C.search)??"",status:((D=p.filters)==null?void 0:D.status)??null,start_date:((h=p.filters)==null?void 0:h.start_date)??"",end_date:((A=p.filters)==null?void 0:A.end_date)??"",sort:((S=p.filters)==null?void 0:S.sort)??"start_date",direction:((j=p.filters)==null?void 0:j.direction)??"desc"}),v=()=>{o.get(route("app.organizations.reservations.out.index",p.organization),{preserveState:!0,preserveScroll:!0})},M=()=>{o.search="",o.status=null,o.start_date="",o.end_date="",o.sort="start_date",o.direction="desc",v()},g=d=>{o.sort===d?o.direction=o.direction==="asc"?"desc":"asc":(o.sort=d,o.direction="asc"),v()},y=d=>o.sort!==d?Z:o.direction==="asc"?et:tt,V=d=>new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return(d,t)=>(i(),f(E,{title:"Réservations - "+u.organization.name},{header:s(()=>[r("div",st,[r("div",null,[r("h2",at," Réservations ("+m(u.reservations.total)+") ",1),t[8]||(t[8]=r("p",{class:"text-sm text-muted-foreground"},"Matériel que vous louez ou prêtez à d'autres organisations",-1))]),u.can.create?(i(),f(e(_),{key:0,as:"a",href:d.route("app.organizations.reservations.out.create",u.organization),variant:"default",size:"default"},{default:s(()=>[...t[9]||(t[9]=[n(" Nouvelle réservation ",-1)])]),_:1},8,["href"])):$("",!0)])]),default:s(()=>[a(e(T),{title:"Réservations"}),r("div",rt,[r("div",lt,[a(e(R),{class:"mb-6"},{default:s(()=>[a(e(U),{class:"p-4"},{default:s(()=>[r("form",{onSubmit:G(v,["prevent"])},[r("div",ot,[r("div",null,[a(e(z),{for:"search",class:"text-sm"},{default:s(()=>[...t[10]||(t[10]=[n("Rechercher",-1)])]),_:1}),a(e(w),{id:"search",modelValue:e(o).search,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).search=l),type:"text",placeholder:"Matériel, utilisateur...",onInput:v},null,8,["modelValue"])]),r("div",null,[a(e(z),{for:"status",class:"text-sm"},{default:s(()=>[...t[11]||(t[11]=[n("Statut",-1)])]),_:1}),a(e(K),{modelValue:e(o).status,"onUpdate:modelValue":[t[1]||(t[1]=l=>e(o).status=l),v]},{default:s(()=>[a(e(Q),{class:"h-9"},{default:s(()=>[a(e(W),{placeholder:"Tous"})]),_:1}),a(e(X),null,{default:s(()=>[a(e(I),{value:null},{default:s(()=>[...t[12]||(t[12]=[n("Tous les statuts",-1)])]),_:1}),(i(!0),b(q,null,F(u.statuses,l=>(i(),f(e(I),{key:l.value,value:l.value},{default:s(()=>[n(m(l.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),r("div",null,[a(e(z),{for:"start_date",class:"text-sm"},{default:s(()=>[...t[13]||(t[13]=[n("Date de début",-1)])]),_:1}),a(e(w),{id:"start_date",modelValue:e(o).start_date,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).start_date=l),type:"date",class:"h-9"},null,8,["modelValue"])]),r("div",null,[a(e(z),{for:"end_date",class:"text-sm"},{default:s(()=>[...t[14]||(t[14]=[n("Date de fin",-1)])]),_:1}),a(e(w),{id:"end_date",modelValue:e(o).end_date,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).end_date=l),type:"date",class:"h-9"},null,8,["modelValue"])]),r("div",nt,[a(e(_),{type:"button",variant:"outline",onClick:M,size:"sm",class:"h-9"},{default:s(()=>[...t[15]||(t[15]=[n(" Réinitialiser ",-1)])]),_:1}),a(e(_),{type:"submit",variant:"default",size:"sm",class:"h-9"},{default:s(()=>[...t[16]||(t[16]=[n(" Filtrer ",-1)])]),_:1})])])],32)]),_:1})]),_:1}),a(e(R),null,{default:s(()=>[a(e(U),{class:"p-6"},{default:s(()=>[u.reservations.data.length===0?(i(),b("div",it,[t[18]||(t[18]=r("p",{class:"text-muted-foreground text-lg"}," Aucune réservation trouvée ",-1)),u.can.create?(i(),f(e(_),{key:0,as:"a",href:d.route("app.organizations.reservations.out.create",u.organization),variant:"default",class:"mt-4"},{default:s(()=>[...t[17]||(t[17]=[n(" Nouvelle réservation ",-1)])]),_:1},8,["href"])):$("",!0)])):(i(),b("div",ut,[a(e(P),null,{default:s(()=>[a(e(H),null,{default:s(()=>[a(e(B),null,{default:s(()=>[a(e(c),{class:"cursor-pointer hover:bg-muted/50",onClick:t[4]||(t[4]=l=>g("borrower_organization.name"))},{default:s(()=>[r("div",dt,[t[19]||(t[19]=r("span",null,"Destinataire",-1)),(i(),f(k(y("borrower_organization.name")),{class:"w-4 h-4"}))])]),_:1}),a(e(c),{class:"cursor-pointer hover:bg-muted/50",onClick:t[5]||(t[5]=l=>g("user.name"))},{default:s(()=>[r("div",ft,[t[20]||(t[20]=r("span",null,"Contact",-1)),(i(),f(k(y("user.name")),{class:"w-4 h-4"}))])]),_:1}),a(e(c),{class:"cursor-pointer hover:bg-muted/50",onClick:t[6]||(t[6]=l=>g("start_date"))},{default:s(()=>[r("div",mt,[t[21]||(t[21]=r("span",null,"Période",-1)),(i(),f(k(y("start_date")),{class:"w-4 h-4"}))])]),_:1}),a(e(c),{class:"cursor-pointer hover:bg-muted/50",onClick:t[7]||(t[7]=l=>g("status"))},{default:s(()=>[r("div",pt,[t[22]||(t[22]=r("span",null,"Statut",-1)),(i(),f(k(y("status")),{class:"w-4 h-4"}))])]),_:1}),a(e(c),{class:"text-right"},{default:s(()=>[...t[23]||(t[23]=[n("Actions",-1)])]),_:1})]),_:1})]),_:1}),a(e(J),null,{default:s(()=>[(i(!0),b(q,null,F(u.reservations.data,l=>(i(),f(e(B),{key:l.id},{default:s(()=>[a(e(x),{class:"font-medium"},{default:s(()=>[a(e(N),{href:d.route("app.organizations.reservations.out.edit",l)},{default:s(()=>[n(m(l.borrower_organization.name),1)]),_:2},1032,["href"])]),_:2},1024),a(e(x),null,{default:s(()=>[n(m(l.user.name),1),t[24]||(t[24]=r("br",null,null,-1)),r("span",_t,m(l.user.phone),1)]),_:2},1024),a(e(x),null,{default:s(()=>[n(" Du "+m(V(l.start_date)),1),t[25]||(t[25]=r("br",null,null,-1)),n(" au "+m(V(l.end_date)),1)]),_:2},1024),a(e(x),null,{default:s(()=>[r("span",{class:L([l.status_color,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},m(l.status_label),3)]),_:2},1024),a(e(x),{class:"text-right"},{default:s(()=>[r("div",vt,[a(e(_),{asChild:""},{default:s(()=>[a(e(N),{href:d.route("app.organizations.reservations.out.edit",l)},{default:s(()=>[...t[26]||(t[26]=[n(" Gérer ",-1)])]),_:1},8,["href"])]),_:2},1024),u.can.update?(i(),f(e(_),{key:0,as:"a",href:d.route("app.organizations.reservations.out.edit",l),size:"sm"},{default:s(()=>[...t[27]||(t[27]=[n(" Modifier ",-1)])]),_:1},8,["href"])):$("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),r("div",ct,[u.reservations.links.length>3?(i(),f(Y,{key:0,links:u.reservations.links},null,8,["links"])):$("",!0)])]))]),_:1})]),_:1})])])]),_:1},8,["title"]))}};export{Gt as default};
