import{z as E,c as f,o,w as s,i as a,l,u as e,q as I,A as T,p as i,k as b,F as j,v as R,s as m,H as z,S as U,x as L,f as k}from"./app-QgaNazCu.js";import P from"./Layout-BpCLrJHf.js";import{_ as p}from"./index-BpLck3DN.js";import{_ as F,a as N}from"./CardContent.vue_vue_type_script_setup_true_lang-uQ5Wvl0x.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-BMr4LfDm.js";import{_ as $}from"./Label.vue_vue_type_script_setup_true_lang-BslrW4ah.js";import{_ as H,a as G,b as B,c as v,d as J,e as x}from"./TableHeader.vue_vue_type_script_setup_true_lang-hJA5PH8k.js";import{_ as K,a as Q,b as W,c as X,d as M}from"./SelectValue.vue_vue_type_script_setup_true_lang-rm8Q_Vdk.js";import{_ as Y}from"./Pagination-CCRz31AD.js";import{E as Z}from"./eye-ZXD7qGG0.js";import{A as tt,a as et,b as st}from"./arrow-up-CaDN8MTh.js";import"./AppLayout-BIDeSL5C.js";import"./FlashMessage-DE1DGer_.js";import"./x-B-1_nBWT.js";import"./createLucideIcon-CMFpOf5j.js";import"./upload-D39mN18V.js";import"./chevron-down-DBKfPh0v.js";import"./clamp-C1pUPxJP.js";import"./check-zqIBt0wU.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";const at={class:"flex justify-between items-center"},lt={class:"font-semibold text-xl leading-tight"},rt={class:"py-12"},nt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},it={class:"flex flex-wrap items-end gap-6"},ot={class:"flex gap-2 ml-auto"},dt={key:0,class:"text-center py-12"},ut={key:1},ft={class:"flex items-center space-x-2"},mt={class:"flex items-center space-x-2"},_t={class:"flex items-center space-x-2"},pt={class:"flex items-center space-x-2"},ct={class:"text-xs text-gray-500"},vt={class:"flex items-center justify-end space-x-2"},xt={class:"mt-4"},Ot={__name:"Index",props:{organization:{type:Object,required:!0},reservations:{type:Object,required:!0},filters:{type:Object,required:!0},can:{type:Object,required:!0},statuses:{type:Array,required:!0}},setup(d){var D,h,C,S,A,q;const _=d,n=E({search:((D=_.filters)==null?void 0:D.search)??"",status:((h=_.filters)==null?void 0:h.status)??null,start_date:((C=_.filters)==null?void 0:C.start_date)??"",end_date:((S=_.filters)==null?void 0:S.end_date)??"",sort:((A=_.filters)==null?void 0:A.sort)??"start_date",direction:((q=_.filters)==null?void 0:q.direction)??"desc"}),c=()=>{n.get(route("app.organizations.reservations.index",_.organization),{preserveState:!0,preserveScroll:!0})},O=()=>{n.search="",n.status=null,n.start_date="",n.end_date="",n.sort="start_date",n.direction="desc",c()},g=u=>{n.sort===u?n.direction=n.direction==="asc"?"desc":"asc":(n.sort=u,n.direction="asc"),c()},y=u=>n.sort!==u?tt:n.direction==="asc"?et:st,V=u=>new Date(u).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"});return(u,t)=>(o(),f(P,{title:"Réservations - "+d.organization.name},{header:s(()=>[l("div",at,[l("div",null,[l("h2",lt," Réservations ("+m(d.reservations.total)+") ",1),t[8]||(t[8]=l("p",{class:"text-sm text-muted-foreground"},"Matériel que vous louez ou prêtez à d'autres organisations",-1))]),d.can.create?(o(),f(e(p),{key:0,as:"a",href:u.route("app.organizations.reservations.in.create",d.organization),variant:"default",size:"default"},{default:s(()=>t[9]||(t[9]=[i(" Nouvelle réservation ")])),_:1,__:[9]},8,["href"])):k("",!0)])]),default:s(()=>[a(e(I),{title:"Réservations"}),l("div",rt,[l("div",nt,[a(e(F),{class:"mb-6"},{default:s(()=>[a(e(N),{class:"p-4"},{default:s(()=>[l("form",{onSubmit:T(c,["prevent"])},[l("div",it,[l("div",null,[a(e($),{for:"search",class:"text-sm"},{default:s(()=>t[10]||(t[10]=[i("Rechercher")])),_:1,__:[10]}),a(e(w),{id:"search",modelValue:e(n).search,"onUpdate:modelValue":t[0]||(t[0]=r=>e(n).search=r),type:"text",placeholder:"Matériel, utilisateur...",onInput:c},null,8,["modelValue"])]),l("div",null,[a(e($),{for:"status",class:"text-sm"},{default:s(()=>t[11]||(t[11]=[i("Statut")])),_:1,__:[11]}),a(e(K),{modelValue:e(n).status,"onUpdate:modelValue":[t[1]||(t[1]=r=>e(n).status=r),c]},{default:s(()=>[a(e(Q),{class:"h-9"},{default:s(()=>[a(e(W),{placeholder:"Tous"})]),_:1}),a(e(X),null,{default:s(()=>[a(e(M),{value:null},{default:s(()=>t[12]||(t[12]=[i("Tous les statuts")])),_:1,__:[12]}),(o(!0),b(j,null,R(d.statuses,r=>(o(),f(e(M),{key:r.value,value:r.value},{default:s(()=>[i(m(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l("div",null,[a(e($),{for:"start_date",class:"text-sm"},{default:s(()=>t[13]||(t[13]=[i("Date de début")])),_:1,__:[13]}),a(e(w),{id:"start_date",modelValue:e(n).start_date,"onUpdate:modelValue":t[2]||(t[2]=r=>e(n).start_date=r),type:"date",class:"h-9"},null,8,["modelValue"])]),l("div",null,[a(e($),{for:"end_date",class:"text-sm"},{default:s(()=>t[14]||(t[14]=[i("Date de fin")])),_:1,__:[14]}),a(e(w),{id:"end_date",modelValue:e(n).end_date,"onUpdate:modelValue":t[3]||(t[3]=r=>e(n).end_date=r),type:"date",class:"h-9"},null,8,["modelValue"])]),l("div",ot,[a(e(p),{type:"button",variant:"outline",onClick:O,size:"sm",class:"h-9"},{default:s(()=>t[15]||(t[15]=[i(" Réinitialiser ")])),_:1,__:[15]}),a(e(p),{type:"submit",variant:"default",size:"sm",class:"h-9"},{default:s(()=>t[16]||(t[16]=[i(" Filtrer ")])),_:1,__:[16]})])])],32)]),_:1})]),_:1}),a(e(F),null,{default:s(()=>[a(e(N),{class:"p-6"},{default:s(()=>[d.reservations.data.length===0?(o(),b("div",dt,[t[18]||(t[18]=l("p",{class:"text-muted-foreground text-lg"}," Aucune réservation trouvée ",-1)),a(e(p),{as:"a",href:u.route("home"),variant:"default",class:"mt-4"},{default:s(()=>t[17]||(t[17]=[i(" Parcourir le matériel disponible ")])),_:1,__:[17]},8,["href"])])):(o(),b("div",ut,[a(e(H),null,{default:s(()=>[a(e(G),null,{default:s(()=>[a(e(B),null,{default:s(()=>[a(e(v),{class:"cursor-pointer hover:bg-muted/50",onClick:t[4]||(t[4]=r=>g("lender_organization.name"))},{default:s(()=>[l("div",ft,[t[19]||(t[19]=l("span",null,"Destinataire",-1)),(o(),f(z(y("lender_organization.name")),{class:"w-4 h-4"}))])]),_:1}),a(e(v),{class:"cursor-pointer hover:bg-muted/50",onClick:t[5]||(t[5]=r=>g("user.name"))},{default:s(()=>[l("div",mt,[t[20]||(t[20]=l("span",null,"Contact",-1)),(o(),f(z(y("user.name")),{class:"w-4 h-4"}))])]),_:1}),a(e(v),{class:"cursor-pointer hover:bg-muted/50",onClick:t[6]||(t[6]=r=>g("start_date"))},{default:s(()=>[l("div",_t,[t[21]||(t[21]=l("span",null,"Période",-1)),(o(),f(z(y("start_date")),{class:"w-4 h-4"}))])]),_:1}),a(e(v),{class:"cursor-pointer hover:bg-muted/50",onClick:t[7]||(t[7]=r=>g("status"))},{default:s(()=>[l("div",pt,[t[22]||(t[22]=l("span",null,"Statut",-1)),(o(),f(z(y("status")),{class:"w-4 h-4"}))])]),_:1}),a(e(v),{class:"text-right"},{default:s(()=>t[23]||(t[23]=[i("Actions")])),_:1,__:[23]})]),_:1})]),_:1}),a(e(J),null,{default:s(()=>[(o(!0),b(j,null,R(d.reservations.data,r=>(o(),f(e(B),{key:r.id},{default:s(()=>[a(e(x),{class:"font-medium"},{default:s(()=>[a(e(U),{href:u.route("app.organizations.reservations.in.show",[d.organization,r])},{default:s(()=>[i(m(r.lender_organization.name),1)]),_:2},1032,["href"])]),_:2},1024),a(e(x),null,{default:s(()=>[i(m(r.user.name),1),t[24]||(t[24]=l("br",null,null,-1)),l("span",ct,m(r.user.phone),1)]),_:2,__:[24]},1024),a(e(x),null,{default:s(()=>[i(" Du "+m(V(r.start_date)),1),t[25]||(t[25]=l("br",null,null,-1)),i(" au "+m(V(r.end_date)),1)]),_:2,__:[25]},1024),a(e(x),null,{default:s(()=>[l("span",{class:L([r.status_color,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},m(r.status_label),3)]),_:2},1024),a(e(x),{class:"text-right"},{default:s(()=>[l("div",vt,[a(e(p),{asChild:""},{default:s(()=>[a(e(U),{href:u.route("app.organizations.reservations.in.show",[r])},{default:s(()=>[a(e(Z),{class:"w-4 h-4 mr-2"}),t[26]||(t[26]=i(" Détails "))]),_:2,__:[26]},1032,["href"])]),_:2},1024),d.can.update?(o(),f(e(p),{key:0,as:"a",href:u.route("app.organizations.reservations.in.edit",[d.organization,r]),size:"sm"},{default:s(()=>t[27]||(t[27]=[i(" Modifier ")])),_:2,__:[27]},1032,["href"])):k("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l("div",xt,[d.reservations.links.length>3?(o(),f(Y,{key:0,links:d.reservations.links},null,8,["links"])):k("",!0)])]))]),_:1})]),_:1})])])]),_:1},8,["title"]))}};export{Ot as default};
