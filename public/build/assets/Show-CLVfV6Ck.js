import{r as $,b as h,y as U,c as V,o as d,w as r,l as e,k as u,i as a,u as s,S as M,p as c,F as L,s as S,v as o,f as b,K as k}from"./app-DD1-xKIm.js";import{_ as m}from"./index-CklhflfB.js";import{_ as w,a as C}from"./CardContent.vue_vue_type_script_setup_true_lang-ca8kNMV_.js";import{_ as T,a as F}from"./CardTitle.vue_vue_type_script_setup_true_lang-BsKDagrk.js";import{_ as N}from"./Separator.vue_vue_type_script_setup_true_lang-CfPXysey.js";import{_ as H,a as P}from"./DialogContent.vue_vue_type_script_setup_true_lang-QGz98B9A.js";import{_ as R,a as B}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Q5ZsI8YR.js";import{_ as J,a as Q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C_DULG9J.js";import{T as K,c as Z,g as G,t as _}from"./FlashMessage-DJI6Pnp7.js";import{_ as O}from"./PublicLayout-Cetfzw7j.js";import{c as v}from"./createLucideIcon-CgKBn6th.js";import{T as W}from"./triangle-alert-CRAvAwnu.js";import{U as X}from"./users-DDN5u83R.js";import{C as Y}from"./circle-alert-U5WmjkFZ.js";import"./Separator-C3kJUzny.js";import"./Input.vue_vue_type_script_setup_true_lang-Bi5L-Wxl.js";import"./x-BU8LFfg_.js";import"./loader-circle-MS8PgvkP.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=v("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=v("CreditCardIcon",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=v("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=v("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=v("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ne={class:"max-w-7xl mx-auto py-6"},ie={key:0,class:"flex flex-col items-center justify-center py-12"},le={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},oe={class:"lg:col-span-2 space-y-6"},de={class:"uppercase font-medium"},ue={class:"flex flex-wrap gap-6"},ce={class:"relative"},me=["src","alt"],pe={key:1,class:"w-12 h-12 lg:w-32 lg:h-32 bg-muted rounded-lg flex items-center justify-center"},fe={class:"flex-1"},_e={class:"text-lg font-semibold mb-2"},ve={class:"space-y-2 text-sm text-muted-foreground"},xe={class:"space-y-1"},ye={class:"flex items-center gap-2 mt-1"},ge={class:"w-8 text-center"},he={key:0},be={class:"lg:text-right space-y-2"},ke={class:"text-lg font-semibold"},we={class:"text-sm"},Ce={key:0,class:"text-sm text-muted-foreground"},qe={class:"flex justify-between pt-4 border-t"},ze={class:"font-medium"},je={class:"text-right"},$e={class:"font-semibold"},Ve={key:0,class:"text-sm text-muted-foreground"},Me={class:"lg:col-span-1 space-y-6"},Le={class:"space-y-2"},Se={class:"flex justify-between"},Te={class:"flex justify-between"},Fe={class:"space-y-4 py-4"},Ie={class:"flex gap-3"},Ee={class:"flex-shrink-0 w-6 h-6 rounded-full bg-destructive/10 flex items-center justify-center text-destructive"},Ae={class:"flex gap-3"},De={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Ue={class:"flex gap-3"},Ne={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},He={class:"flex gap-3"},Pe={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Re={class:"flex gap-3"},Be={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},Je={class:"flex gap-3"},Qe={class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary"},mt={__name:"Show",setup(Ke){const f=$(!1),x=$(!1),y=h(()=>U().props.items),q=i=>new Date(i).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),p=i=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),I=h(()=>{var i;return((i=y.value)==null?void 0:i.reduce((t,l)=>t+l.total,0))??0}),E=h(()=>{var i;return((i=y.value)==null?void 0:i.reduce((t,l)=>t+l.deposit,0))??0}),g=async i=>{if(!f.value){f.value=!0;try{await i()}finally{f.value=!1}}},z=(i,t)=>{t<1||g(()=>k.put(route("carts.update",i.equipment.id),{quantity:t,rental_start:i.rental_start,rental_end:i.rental_end},{preserveScroll:!0,only:["items"],onError:()=>{_("Erreur",{description:"Une erreur s'est produite lors de la mise à jour de la quantité.",variant:"destructive"})}}))},A=i=>{confirm("Voulez-vous vraiment retirer cet article du camion ?")&&g(()=>k.delete(route("carts.remove",i.equipment.id),{data:{rental_start:i.rental_start,rental_end:i.rental_end}},{preserveScroll:!0,onSuccess:()=>{_("Article supprimé",{description:"L'article a été retiré de votre camion."})},onError:()=>{_("Erreur",{description:"Une erreur s'est produite lors de la suppression de l'article.",variant:"destructive"})}}))},D=()=>{confirm("Voulez-vous vraiment vider votre camion ?")&&g(()=>k.delete(route("carts.clear"),{onSuccess:()=>{_("Camion vidé",{description:"Tous les articles ont été retirés de votre camion."})},onError:()=>{_("Erreur",{description:"Une erreur s'est produite lors du vidage du camion.",variant:"destructive"})}}))};return(i,t)=>(d(),V(O,{title:"Mon camion",description:"Vérifier le chargement avant de confirmer votre demande"},{header:r(()=>t[3]||(t[3]=[e("div",{class:"max-w-7xl mx-auto"},[e("h1",{class:"text-xl font-semibold"},"Mon camion"),e("p",{class:"text-sm text-muted-foreground"}," Vérifiez bien les dates et les quantités avant de confirmer votre demande. ")],-1)])),default:r(()=>[e("div",ne,[y.value.length===0?(d(),u("div",ie,[a(s(K),{class:"h-16 w-16 text-muted-foreground mb-4"}),t[5]||(t[5]=e("h2",{class:"text-2xl font-semibold mb-2"},"Votre camion est vide",-1)),t[6]||(t[6]=e("p",{class:"text-muted-foreground mb-6"},"Ajoutez du matériel à votre camion pour commencer",-1)),a(s(m),{asChild:""},{default:r(()=>[a(s(M),{href:i.route("home")},{default:r(()=>t[4]||(t[4]=[c(" Parcourir le matériel disponible ")])),_:1,__:[4]},8,["href"])]),_:1})])):(d(),u("div",le,[e("div",oe,[(d(!0),u(L,null,S(y.value,l=>(d(),u("div",{key:l.organization.id,class:"space-y-4"},[a(s(w),{class:"bg-secondary/50"},{default:r(()=>[a(s(T),null,{default:r(()=>[a(s(F),null,{default:r(()=>[e("span",de,o(l.organization.name),1)]),_:2},1024)]),_:2},1024),a(s(C),{class:"space-y-4"},{default:r(()=>[(d(!0),u(L,null,S(l.items,n=>(d(),V(s(w),{key:n.equipment.id,class:"group"},{default:r(()=>[a(s(C),{class:"px-4"},{default:r(()=>[e("div",ue,[e("div",ce,[n.image?(d(),u("img",{key:0,src:n.image,alt:n.equipment.name,class:"w-12 h-12 lg:w-32 lg:h-32 object-cover rounded-lg"},null,8,me)):(d(),u("div",pe,[a(s(ee),{class:"h-10 w-10 text-muted-foreground"})]))]),e("div",fe,[e("h3",_e,o(n.equipment.name),1),e("div",ve,[e("p",null," du "+o(q(n.rental_start))+" au "+o(q(n.rental_end)),1),e("div",xe,[t[7]||(t[7]=e("span",{class:"font-medium"},"Quantité:",-1)),e("div",ye,[a(s(m),{variant:"outline",size:"icon",onClick:j=>z(n,n.quantity-1),disabled:n.quantity<=1,class:"transition-opacity"},{default:r(()=>[a(s(ae),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"]),e("span",ge,o(n.quantity),1),a(s(m),{variant:"outline",size:"icon",onClick:j=>z(n,n.quantity+1),class:"transition-opacity",disabled:n.quantity>=n.quantityAvailable},{default:r(()=>[a(s(Z),{class:"h-4 w-4"})]),_:2},1032,["onClick","disabled"])])]),n.notes?(d(),u("p",he,[t[8]||(t[8]=e("span",{class:"font-medium"},"Notes:",-1)),t[9]||(t[9]=e("br",null,null,-1)),c(" "+o(n.notes),1)])):b("",!0)])]),e("div",be,[e("p",ke,o(p(n.total)),1),e("p",we,o(p(n.price))+" x "+o(n.days)+" jours ",1),n.equipment.requires_deposit?(d(),u("p",Ce," Caution: "+o(p(n.equipment.deposit_amount*n.quantity)),1)):b("",!0),a(s(m),{variant:"ghost",class:"text-destructive",size:"sm",onClick:j=>A(n)},{default:r(()=>[a(s(G),{class:"h-4 w-4"}),t[10]||(t[10]=c(" Retirer "))]),_:2,__:[10]},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128)),e("div",qe,[e("span",ze,"Total pour "+o(l.organization.name),1),e("div",je,[e("p",$e,o(p(l.total)),1),l.deposit>0?(d(),u("p",Ve," Caution: "+o(p(l.deposit)),1)):b("",!0)])])]),_:2},1024)]),_:2},1024)]))),128))]),e("div",Me,[a(s(w),null,{default:r(()=>[a(s(T),null,{default:r(()=>[a(s(F),null,{default:r(()=>t[11]||(t[11]=[c("Récapitulatif de la réservation")])),_:1,__:[11]})]),_:1}),a(s(C),{class:"space-y-4"},{default:r(()=>[e("div",Le,[e("div",Se,[t[12]||(t[12]=e("span",null,"Coût de location",-1)),e("span",null,o(p(I.value)),1)]),e("div",Te,[t[13]||(t[13]=e("span",null,"Caution totale",-1)),e("span",null,o(p(E.value)),1)]),a(s(N)),t[14]||(t[14]=e("p",{class:"text-sm text-muted-foreground"}," La caution sera à régler directement avec le propriétaire lors de la remise du matériel. ",-1))]),t[17]||(t[17]=e("div",{class:"space-y-2"},[e("div",{class:"mt-4 p-4 bg-muted/50 rounded-lg border border-border"},[e("h4",{class:"font-medium mb-3 flex items-center gap-2"}," Comment fonctionne la réservation ? "),e("div",{class:"space-y-3 text-sm"},[e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"1"),e("p",null,'Vous notifiez les organisations propriétaires des équipements sélectionnés en cliquant sur le bouton "Confirmer ma demande".')]),e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"2"),e("p",null,"Les propriétaires valident ou refusent votre demande. Laissez-leur un peu de temps pour répondre.")]),e("div",{class:"flex gap-3"},[e("div",{class:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-medium"},"3"),e("p",null,"Vous recevez un email de chaque propriétaire avec leurs coordonnées pour finaliser la réservation si elle est acceptée. Vous recevez également un email si la réservation est refusée.")])])])],-1)),a(s(m),{class:"w-full",disabled:f.value,onClick:t[0]||(t[0]=l=>x.value=!0)},{default:r(()=>t[15]||(t[15]=[c(" Confirmer ma demande ")])),_:1,__:[15]},8,["disabled"]),a(s(m),{variant:"destructive",onClick:D,class:"w-full",disabled:f.value},{default:r(()=>t[16]||(t[16]=[c(" Vider le camion ")])),_:1,__:[16]},8,["disabled"])]),_:1,__:[17]})]),_:1}),a(s(H),{open:x.value,"onUpdate:open":t[2]||(t[2]=l=>x.value=l)},{default:r(()=>[a(s(P),{class:"sm:max-w-[600px]"},{default:r(()=>[a(s(J),null,{default:r(()=>[a(s(Q),null,{default:r(()=>t[18]||(t[18]=[c("Confirmation de votre demande")])),_:1,__:[18]}),a(s(R),null,{default:r(()=>t[19]||(t[19]=[c(" Veuillez prendre connaissance des informations importantes avant de confirmer votre demande. ")])),_:1,__:[19]})]),_:1}),e("div",Fe,[e("div",Ie,[e("div",Ee,[a(s(W),{class:"h-4 w-4"})]),t[20]||(t[20]=e("p",{class:"text-sm text-destructive"},"Les demandes de réservation de plus d'une semaine restées sans réponse seront automatiquement annulées.",-1))]),e("div",Ae,[e("div",De,[a(s(X),{class:"h-4 w-4"})]),t[21]||(t[21]=e("p",{class:"text-sm"},"Chaque demande faite à une organisation différente est traitée comme une réservation distincte.",-1))]),e("div",Ue,[e("div",Ne,[a(s(re),{class:"h-4 w-4"})]),t[22]||(t[22]=e("p",{class:"text-sm"},"La plateforme agit uniquement comme intermédiaire et ne peut être tenue responsable des litiges entre les parties.",-1))]),e("div",He,[e("div",Pe,[a(s(se),{class:"h-4 w-4"})]),t[23]||(t[23]=e("p",{class:"text-sm"},"Il est de la responsabilité des utilisateurs de vérifier l'état et la conformité du matériel avant la location.",-1))]),e("div",Re,[e("div",Be,[a(s(Y),{class:"h-4 w-4"})]),t[24]||(t[24]=e("p",{class:"text-sm"},"La plateforme ne garantit pas la disponibilité des équipements et ne peut être tenue responsable des annulations.",-1))]),e("div",Je,[e("div",Qe,[a(s(te),{class:"h-4 w-4"})]),t[25]||(t[25]=e("p",{class:"text-sm"},"Les paiements et arrangements financiers se font directement avec les propriétaires des équipements, en dehors de la plateforme.",-1))])]),a(s(B),null,{default:r(()=>[a(s(m),{variant:"outline",onClick:t[1]||(t[1]=l=>x.value=!1)},{default:r(()=>t[26]||(t[26]=[c(" Annuler ")])),_:1,__:[26]}),a(s(m),{asChild:""},{default:r(()=>[a(s(M),{href:i.route("app.organizations.reservations.in.create")},{default:r(()=>t[27]||(t[27]=[c(" Je confirme ma demande ")])),_:1,__:[27]},8,["href"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]))])]),_:1}))}};export{mt as default};
