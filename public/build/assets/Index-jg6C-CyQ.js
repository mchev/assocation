import{_ as ct}from"./AppLayout-CNXDddNf.js";import{u as ht,q as le,g as C,o as w,a as E,b as S,h as T,w as b,e as x,d as u,t as D,F as oe,r as ae,c as $,f as ut,H as gt,k as B,n as ft}from"./app-XVxDceb-.js";import{m as M,y as g,D as pt,a as mt,b as pe,d as W,c as vt,e as St,W as Et,C as me,g as xe,S as yt,V as Ce,f as bt,N as Oe,h as ve,r as Re,i as G,j as wt,k as Dt,B as q,l as xt,n as Ct,o as Rt,p as de,q as Tt,w as Se,R as ze,P as We,s as Mt,t as _t,u as kt,v as ce,_ as K,x as Pt,z as It,A as Nt,E as At,F as Lt,G as Ht,H as he,I as O,J as U,K as jt,M as qt,L as Vt,O as Ot,Q as Ue,T as zt,U as Wt,X as Ut,Y as Ft,Z as Gt,$ as Xt,a0 as Fe,a1 as _,a2 as Yt,a3 as Bt,a4 as $t,a5 as Kt,a6 as Qt,a7 as Zt,a8 as j,a9 as ee,aa as Ee,ab as Jt,ac as ye,ad as be,ae as ei,af as ue,ag as Ge,ah as H,ai as Xe,aj as Ye,ak as Q,al as Z,am as ti,an as Be,ao as ne,ap as ii,aq as si,ar as ni,as as $e,at as ri,au as li,av as oi,aw as ai,ax as di,ay as ci,az as Ke,aA as we,aB as hi,aC as ui,aD as gi,aE as fi,aF as pi,aG as mi,aH as vi,aI as Si,aJ as Ei,aK as yi}from"./fr-F01SY_eM.js";import{_ as Te,a as Me}from"./DialogContent.vue_vue_type_script_setup_true_lang-Dg1J4yJ8.js";import{_ as _e,a as ke}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CtN4HCPq.js";import{_ as Pe}from"./index-DMUj0GAK.js";import{_ as z}from"./index-BY6Sg-hh.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-D3E7DMxr.js";import{_ as bi}from"./Textarea.vue_vue_type_script_setup_true_lang-D_DgQt5S.js";import{a as wi,b as Di,c as xi,d as Ci,_ as Ri}from"./SelectValue.vue_vue_type_script_setup_true_lang-B9JIiDBJ.js";import{_ as I}from"./Label.vue_vue_type_script_setup_true_lang-Cx0AZPwD.js";import{S as Ti}from"./spinner-yOyEIyAq.js";import{X as Mi}from"./Teleport-C6qIYPtC.js";import{P as _i}from"./plus-Bod7wQUC.js";import{C as Ie,U as ki}from"./FlashMessage-DQFSd5VP.js";import{B as Pi}from"./building-2-rUrb8Xrb.js";import{P as Ne}from"./phone-D3f1MIo-.js";import{M as Ae}from"./mail-BtBKWBiu.js";import{P as Ii}from"./package-BrJScXl1.js";import"./DialogPortal-D727flEM.js";import"./useForwardExpose-BJPidsTf.js";import"./DialogTitle-Drkol4kQ.js";import"./useNonce-BTBF0_Hr.js";import"./chevron-down-DF-fHJav.js";import"./createLucideIcon-Cv9XdNR4.js";import"./UserDropdown-CxJieKwn.js";import"./check-w3o6PVRK.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-hjZzxYlq.js";import"./loader-circle-CcH6x_uZ.js";class Ni extends wt{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?Dt(e)?["timed","allDay"]:["allDay"]:["timed"]}}const Ai=G({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function Qe(o){let e=["fc-timegrid-slot","fc-timegrid-slot-label",o.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return g(xt.Consumer,null,i=>{if(!o.isLabeled)return g("td",{className:e.join(" "),"data-time":o.isoTimeStr});let{dateEnv:t,options:s,viewApi:r}=i,n=s.slotLabelFormat==null?Ai:Array.isArray(s.slotLabelFormat)?G(s.slotLabelFormat[0]):G(s.slotLabelFormat),l={level:0,time:o.time,date:t.toDate(o.date),view:r,text:t.format(o.date,n)};return g(me,{elTag:"td",elClasses:e,elAttrs:{"data-time":o.isoTimeStr},renderProps:l,generatorName:"slotLabelContent",customGenerator:s.slotLabelContent,defaultGenerator:Li,classNameGenerator:s.slotLabelClassNames,didMount:s.slotLabelDidMount,willUnmount:s.slotLabelWillUnmount},a=>g("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},g(a,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function Li(o){return o.text}class Hi extends q{render(){return this.props.slatMetas.map(e=>g("tr",{key:e.key},g(Qe,Object.assign({},e))))}}const ji=G({week:"short"}),qi=5;class Vi extends pe{constructor(){super(...arguments),this.allDaySplitter=new Ni,this.headerElRef=W(),this.rootElRef=W(),this.scrollerElRef=W(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let i=this.scrollerElRef.current;i&&(i.scrollTop=e)},this.renderHeadAxis=(e,i="")=>{let{options:t}=this.context,{dateProfile:s}=this.props,r=s.renderRange,l=vt(r.start,r.end)===1?St(this.context,r.start,"week"):{};return t.weekNumbers&&e==="day"?g(Et,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:r.start,defaultFormat:ji},a=>g("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:i}},g(a,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:l}))):g("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},g("div",{className:"fc-timegrid-axis-frame",style:{height:i}}))},this.renderTableRowAxis=e=>{let{options:i,viewApi:t}=this.context,s={text:i.allDayText,view:t};return g(me,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:s,generatorName:"allDayContent",customGenerator:i.allDayContent,defaultGenerator:Oi,classNameGenerator:i.allDayClassNames,didMount:i.allDayDidMount,willUnmount:i.allDayWillUnmount},r=>g("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},g(r,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,i,t){let{context:s,props:r}=this,n=[],l=xe(s.options);return e&&n.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),i&&(n.push({type:"body",key:"all-day",chunk:{content:i}}),n.push({type:"body",key:"all-day-divider",outerContent:g("tr",{role:"presentation",className:"fc-scrollgrid-section"},g("td",{className:"fc-timegrid-divider "+s.theme.getClass("tableCellShaded")}))})),n.push({type:"body",key:"body",liquid:!0,expandRows:!!s.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:t}}),g(Ce,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:s.viewSpec},g(yt,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[{width:"shrink"}],sections:n}))}renderHScrollLayout(e,i,t,s,r,n,l){let a=this.context.pluginHooks.scrollGridImpl;if(!a)throw new Error("No ScrollGrid implementation");let{context:c,props:d}=this,h=!d.forPrint&&xe(c.options),f=!d.forPrint&&bt(c.options),m=[];e&&m.push({type:"header",key:"header",isSticky:h,syncRowHeights:!0,chunks:[{key:"axis",rowContent:p=>g("tr",{role:"presentation"},this.renderHeadAxis("day",p.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),i&&(m.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:p=>g("tr",{role:"presentation"},this.renderTableRowAxis(p.rowSyncHeights[0]))},{key:"cols",content:i}]}),m.push({key:"all-day-divider",type:"body",outerContent:g("tr",{role:"presentation",className:"fc-scrollgrid-section"},g("td",{colSpan:2,className:"fc-timegrid-divider "+c.theme.getClass("tableCellShaded")}))}));let v=c.options.nowIndicator;return m.push({type:"body",key:"body",liquid:!0,expandRows:!!c.options.expandRows,chunks:[{key:"axis",content:p=>g("div",{className:"fc-timegrid-axis-chunk"},g("table",{"aria-hidden":!0,style:{height:p.expandRows?p.clientHeight:""}},p.tableColGroupNode,g("tbody",null,g(Hi,{slatMetas:n}))),g("div",{className:"fc-timegrid-now-indicator-container"},g(Oe,{unit:v?"minute":"day"},y=>{let R=v&&l&&l.safeComputeTop(y);return typeof R=="number"?g(ve,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:R},isAxis:!0,date:y}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:t}]}),f&&m.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Re},{key:"cols",content:Re}]}),g(Ce,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:c.viewSpec},g(a,{liquid:!d.isHeightAuto&&!d.forPrint,forPrint:d.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:s,minWidth:r}]}],sections:m}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:i}=this.context.options;return(e===!0||i===!0)&&(e=void 0,i=qi),{dayMaxEvents:e,dayMaxEventRows:i}}}function Oi(o){return o.text}class zi{constructor(e,i,t){this.positions=e,this.dateProfile=i,this.slotDuration=t}safeComputeTop(e){let{dateProfile:i}=this;if(Ht(i.currentRange,e)){let t=he(e),s=e.valueOf()-t.valueOf();if(s>=O(i.slotMinTime)&&s<O(i.slotMaxTime))return this.computeTimeTop(U(s))}return null}computeDateTop(e,i){return i||(i=he(e)),this.computeTimeTop(U(e.valueOf()-i.valueOf()))}computeTimeTop(e){let{positions:i,dateProfile:t}=this,s=i.els.length,r=(e.milliseconds-O(t.slotMinTime))/O(this.slotDuration),n,l;return r=Math.max(0,r),r=Math.min(s,r),n=Math.floor(r),n=Math.min(n,s-1),l=r-n,i.tops[n]+i.getHeight(n)*l}}class Wi extends q{render(){let{props:e,context:i}=this,{options:t}=i,{slatElRefs:s}=e;return g("tbody",null,e.slatMetas.map((r,n)=>{let l={time:r.time,date:i.dateEnv.toDate(r.date),view:i.viewApi};return g("tr",{key:r.key,ref:s.createRef(r.key)},e.axis&&g(Qe,Object.assign({},r)),g(me,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!r.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":r.isoTimeStr},renderProps:l,generatorName:"slotLaneContent",customGenerator:t.slotLaneContent,classNameGenerator:t.slotLaneClassNames,didMount:t.slotLaneDidMount,willUnmount:t.slotLaneWillUnmount}))}))}}class Ui extends q{constructor(){super(...arguments),this.rootElRef=W(),this.slatElRefs=new ze}render(){let{props:e,context:i}=this;return g("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},g("table",{"aria-hidden":!0,className:i.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,g(Wi,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:i}=this;i.onCoords&&i.clientWidth!==null&&this.rootElRef.current.offsetHeight&&i.onCoords(new zi(new We(this.rootElRef.current,Fi(this.slatElRefs.currentMap,i.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function Fi(o,e){return e.map(i=>o[i.key])}function F(o,e){let i=[],t;for(t=0;t<e;t+=1)i.push([]);if(o)for(t=0;t<o.length;t+=1)i[o[t].col].push(o[t]);return i}function Le(o,e){let i=[];if(o){for(let t=0;t<e;t+=1)i[t]={affectedInstances:o.affectedInstances,isEvent:o.isEvent,segs:[]};for(let t of o.segs)i[t.col].segs.push(t)}else for(let t=0;t<e;t+=1)i[t]=null;return i}class Gi extends q{render(){let{props:e}=this;return g(qt,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>Je(e.hiddenSegs,e),defaultGenerator:Xi,forceTimed:!0},i=>g(i,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function Xi(o){return o.shortText}function Yi(o,e,i){let t=new Vt;e!=null&&(t.strictOrder=e),i!=null&&(t.maxStackCnt=i);let s=t.addSegs(o),r=Ot(s),n=Bi(t);return n=Zi(n,1),{segRects:Ji(n),hiddenGroups:r}}function Bi(o){const{entriesByLevel:e}=o,i=De((t,s)=>t+":"+s,(t,s)=>{let r=Qi(o,t,s),n=He(r,i),l=e[t][s];return[Object.assign(Object.assign({},l),{nextLevelNodes:n[0]}),l.thickness+n[1]]});return He(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,i)[0]}function He(o,e){if(!o)return[[],0];let{level:i,lateralStart:t,lateralEnd:s}=o,r=t,n=[];for(;r<s;)n.push(e(i,r)),r+=1;return n.sort($i),[n.map(Ki),n[0][1]]}function $i(o,e){return e[1]-o[1]}function Ki(o){return o[0]}function Qi(o,e,i){let{levelCoords:t,entriesByLevel:s}=o,r=s[e][i],n=t[e]+r.thickness,l=t.length,a=e;for(;a<l&&t[a]<n;a+=1);for(;a<l;a+=1){let c=s[a],d,h=Gt(c,r.span.start,Xt),f=h[0]+h[1],m=f;for(;(d=c[m])&&d.span.start<r.span.end;)m+=1;if(f<m)return{level:a,lateralStart:f,lateralEnd:m}}return null}function Zi(o,e){const i=De((t,s,r)=>Ue(t),(t,s,r)=>{let{nextLevelNodes:n,thickness:l}=t,a=l+r,c=l/a,d,h=[];if(!n.length)d=e;else for(let m of n)if(d===void 0){let v=i(m,s,a);d=v[0],h.push(v[1])}else{let v=i(m,d,0);h.push(v[1])}let f=(d-s)*c;return[d-f,Object.assign(Object.assign({},t),{thickness:f,nextLevelNodes:h})]});return o.map(t=>i(t,0,0)[1])}function Ji(o){let e=[];const i=De((s,r,n)=>Ue(s),(s,r,n)=>{let l=Object.assign(Object.assign({},s),{levelCoord:r,stackDepth:n,stackForward:0});return e.push(l),l.stackForward=t(s.nextLevelNodes,r+s.thickness,n+1)+1});function t(s,r,n){let l=0;for(let a of s)l=Math.max(i(a,r,n),l);return l}return t(o,0,0),e}function De(o,e){const i={};return(...t)=>{let s=o(...t);return s in i?i[s]:i[s]=e(...t)}}function je(o,e,i=null,t=0){let s=[];if(i)for(let r=0;r<o.length;r+=1){let n=o[r],l=i.computeDateTop(n.start,e),a=Math.max(l+(t||0),i.computeDateTop(n.end,e));s.push({start:Math.round(l),end:Math.round(a)})}return s}function es(o,e,i,t){let s=[],r=[];for(let c=0;c<o.length;c+=1){let d=e[c];d?s.push({index:c,thickness:1,span:d}):r.push(o[c])}let{segRects:n,hiddenGroups:l}=Yi(s,i,t),a=[];for(let c of n)a.push({seg:o[c.index],rect:c});for(let c of r)a.push({seg:c,rect:null});return{segPlacements:a,hiddenGroups:l}}const ts=G({hour:"numeric",minute:"2-digit",meridiem:!1});class Ze extends q{render(){return g(jt,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:ts}))}}class is extends q{constructor(){super(...arguments),this.sortEventSegs=M(Mt)}render(){let{props:e,context:i}=this,{options:t}=i,s=t.selectMirror,r=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||s&&e.dateSelectionSegs||[],n=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},l=this.sortEventSegs(e.fgEventSegs,t.eventOrder);return g(kt,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},a=>g("div",{className:"fc-timegrid-col-frame"},g("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),g("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(l,n,!1,!1,!1)),g("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(r,{},!!e.eventDrag,!!e.eventResize,!!s,"mirror")),g("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),_t(t)&&g(a,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,i,t,s,r,n){let{props:l}=this;return l.forPrint?Je(e,l):this.renderPositionedFgSegs(e,i,t,s,r,n)}renderPositionedFgSegs(e,i,t,s,r,n){let{eventMaxStack:l,eventShortHeight:a,eventOrderStrict:c,eventMinHeight:d}=this.context.options,{date:h,slatCoords:f,eventSelection:m,todayRange:v,nowDate:p}=this.props,y=t||s||r,R=je(e,h,f,d),{segPlacements:N,hiddenGroups:P}=es(e,R,c,l);return g(K,null,this.renderHiddenGroups(P,e),N.map(A=>{let{seg:L,rect:k}=A,se=L.eventRange.instance.instanceId,rt=y||!!(!i[se]&&k),lt=re(k&&k.span),ot=!y&&k?this.computeSegHStyle(k):{left:0,right:0},at=!!k&&k.stackForward>0,dt=!!k&&k.span.end-k.span.start<a;return g("div",{className:"fc-timegrid-event-harness"+(at?" fc-timegrid-event-harness-inset":""),key:n||se,style:Object.assign(Object.assign({visibility:rt?"":"hidden"},lt),ot)},g(Ze,Object.assign({seg:L,isDragging:t,isResizing:s,isDateSelecting:r,isSelected:se===m,isShort:dt},ce(L,v,p))))}))}renderHiddenGroups(e,i){let{extraDateSpan:t,dateProfile:s,todayRange:r,nowDate:n,eventSelection:l,eventDrag:a,eventResize:c}=this.props;return g(K,null,e.map(d=>{let h=re(d.span),f=ss(d.entries,i);return g(Gi,{key:Pt(It(f)),hiddenSegs:f,top:h.top,bottom:h.bottom,extraDateSpan:t,dateProfile:s,todayRange:r,nowDate:n,eventSelection:l,eventDrag:a,eventResize:c})}))}renderFillSegs(e,i){let{props:t,context:s}=this,n=je(e,t.date,t.slatCoords,s.options.eventMinHeight).map((l,a)=>{let c=e[a];return g("div",{key:Lt(c.eventRange),className:"fc-timegrid-bg-harness",style:re(l)},i==="bg-event"?g(At,Object.assign({seg:c},ce(c,t.todayRange,t.nowDate))):Nt(i))});return g(K,null,n)}renderNowIndicator(e){let{slatCoords:i,date:t}=this.props;return i?e.map((s,r)=>g(ve,{key:r,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:i.computeDateTop(s.start,t)},isAxis:!1,date:t})):null}computeSegHStyle(e){let{isRtl:i,options:t}=this.context,s=t.slotEventOverlap,r=e.levelCoord,n=e.levelCoord+e.thickness,l,a;s&&(n=Math.min(1,r+(n-r)*2)),i?(l=1-n,a=r):(l=r,a=1-n);let c={zIndex:e.stackDepth+1,left:l*100+"%",right:a*100+"%"};return s&&!e.stackForward&&(c[i?"marginLeft":"marginRight"]=20),c}}function Je(o,{todayRange:e,nowDate:i,eventSelection:t,eventDrag:s,eventResize:r}){let n=(s?s.affectedInstances:null)||(r?r.affectedInstances:null)||{};return g(K,null,o.map(l=>{let a=l.eventRange.instance.instanceId;return g("div",{key:a,style:{visibility:n[a]?"hidden":""}},g(Ze,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===t,isShort:!1},ce(l,e,i))))}))}function re(o){return o?{top:o.start,bottom:-o.end}:{top:"",bottom:""}}function ss(o,e){return o.map(i=>e[i.index])}class ns extends q{constructor(){super(...arguments),this.splitFgEventSegs=M(F),this.splitBgEventSegs=M(F),this.splitBusinessHourSegs=M(F),this.splitNowIndicatorSegs=M(F),this.splitDateSelectionSegs=M(F),this.splitEventDrag=M(Le),this.splitEventResize=M(Le),this.rootElRef=W(),this.cellElRefs=new ze}render(){let{props:e,context:i}=this,t=i.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),s=e.cells.length,r=this.splitFgEventSegs(e.fgEventSegs,s),n=this.splitBgEventSegs(e.bgEventSegs,s),l=this.splitBusinessHourSegs(e.businessHourSegs,s),a=this.splitNowIndicatorSegs(e.nowIndicatorSegs,s),c=this.splitDateSelectionSegs(e.dateSelectionSegs,s),d=this.splitEventDrag(e.eventDrag,s),h=this.splitEventResize(e.eventResize,s);return g("div",{className:"fc-timegrid-cols",ref:this.rootElRef},g("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,g("tbody",{role:"presentation"},g("tr",{role:"row"},e.axis&&g("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},g("div",{className:"fc-timegrid-col-frame"},g("div",{className:"fc-timegrid-now-indicator-container"},typeof t=="number"&&g(ve,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:t},isAxis:!0,date:e.nowDate})))),e.cells.map((f,m)=>g(is,{key:f.key,elRef:this.cellElRefs.createRef(f.key),dateProfile:e.dateProfile,date:f.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:f.extraRenderProps,extraDataAttrs:f.extraDataAttrs,extraClassNames:f.extraClassNames,extraDateSpan:f.extraDateSpan,fgEventSegs:r[m],bgEventSegs:n[m],businessHourSegs:l[m],nowIndicatorSegs:a[m],dateSelectionSegs:c[m],eventDrag:d[m],eventResize:h[m],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new We(this.rootElRef.current,rs(this.cellElRefs.currentMap,e.cells),!0,!1))}}function rs(o,e){return e.map(i=>o[i.key])}class ls extends pe{constructor(){super(...arguments),this.processSlotOptions=M(os),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:i}=this.props,{slatCoords:t}=this.state;if(i&&t){if(e.time){let s=t.computeTimeTop(e.time);s=Math.ceil(s),s&&(s+=1),i(s)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:i}=this;return g("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},g(Ui,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),g(ns,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:i.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,i){let{dateEnv:t,options:s}=this.context,{colCoords:r}=this,{dateProfile:n}=this.props,{slatCoords:l}=this.state,{snapDuration:a,snapsPerSlot:c}=this.processSlotOptions(this.props.slotDuration,s.snapDuration),d=r.leftToIndex(e),h=l.positions.topToIndex(i);if(d!=null&&h!=null){let f=this.props.cells[d],m=l.positions.tops[h],v=l.positions.getHeight(h),p=(i-m)/v,y=Math.floor(p*c),R=h*c+y,N=this.props.cells[d].date,P=de(n.slotMinTime,Tt(a,R)),A=t.add(N,P),L=t.add(A,a);return{dateProfile:n,dateSpan:Object.assign({range:{start:A,end:L},allDay:!1},f.extraDateSpan),dayEl:r.els[d],rect:{left:r.lefts[d],right:r.rights[d],top:m,bottom:m+v},layer:0}}return null}}function os(o,e){let i=e||o,t=Se(o,i);return t===null&&(i=o,t=1),{snapDuration:i,snapsPerSlot:t}}class as extends Ct{sliceRange(e,i){let t=[];for(let s=0;s<i.length;s+=1){let r=Rt(e,i[s]);r&&t.push({start:r.start,end:r.end,isStart:r.start.valueOf()===e.start.valueOf(),isEnd:r.end.valueOf()===e.end.valueOf(),col:s})}return t}}class ds extends pe{constructor(){super(...arguments),this.buildDayRanges=M(cs),this.slicer=new as,this.timeColsRef=W()}render(){let{props:e,context:i}=this,{dateProfile:t,dayTableModel:s}=e,{nowIndicator:r,nextDayThreshold:n}=i.options,l=this.buildDayRanges(s,t,i.dateEnv);return g(Oe,{unit:r?"minute":"day"},(a,c)=>g(ls,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,t,null,i,l),{forPrint:e.forPrint,axis:e.axis,dateProfile:t,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:s.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:a,nowIndicatorSegs:r&&this.slicer.sliceNowDate(a,t,n,i,l),todayRange:c,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function cs(o,e,i){let t=[];for(let s of o.headerDates)t.push({start:i.add(s,e.slotMinTime),end:i.add(s,e.slotMaxTime)});return t}const qe=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function hs(o,e,i,t,s){let r=new Date(0),n=o,l=U(0),a=i||us(t),c=[];for(;O(n)<O(e);){let d=s.add(r,n),h=Se(l,a)!==null;c.push({date:d,time:n,key:d.toISOString(),isoTimeStr:Ft(d),isLabeled:h}),n=de(n,t),l=de(l,t)}return c}function us(o){let e,i,t;for(e=qe.length-1;e>=0;e-=1)if(i=U(qe[e]),t=Se(i,o),t!==null&&t>1)return i;return o}class gs extends Vi{constructor(){super(...arguments),this.buildTimeColsModel=M(fs),this.buildSlatMetas=M(hs)}render(){let{options:e,dateEnv:i,dateProfileGenerator:t}=this.context,{props:s}=this,{dateProfile:r}=s,n=this.buildTimeColsModel(r,t),l=this.allDaySplitter.splitProps(s),a=this.buildSlatMetas(r.slotMinTime,r.slotMaxTime,e.slotLabelInterval,e.slotDuration,i),{dayMinWidth:c}=e,d=!c,h=c,f=e.dayHeaders&&g(pt,{dates:n.headerDates,dateProfile:r,datesRepDistinctDays:!0,renderIntro:d?this.renderHeadAxis:null}),m=e.allDaySlot!==!1&&(p=>g(mt,Object.assign({},l.allDay,{dateProfile:r,dayTableModel:n,nextDayThreshold:e.nextDayThreshold,tableMinWidth:p.tableMinWidth,colGroupNode:p.tableColGroupNode,renderRowIntro:d?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:p.clientWidth,clientHeight:p.clientHeight,forPrint:s.forPrint},this.getAllDayMaxEventProps()))),v=p=>g(ds,Object.assign({},l.timed,{dayTableModel:n,dateProfile:r,axis:d,slotDuration:e.slotDuration,slatMetas:a,forPrint:s.forPrint,tableColGroupNode:p.tableColGroupNode,tableMinWidth:p.tableMinWidth,clientWidth:p.clientWidth,clientHeight:p.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:p.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return h?this.renderHScrollLayout(f,m,v,n.colCnt,c,a,this.state.slatCoords):this.renderSimpleLayout(f,m,v)}}function fs(o,e){let i=new zt(o.renderRange,e);return new Wt(i,!1)}var ps='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';Ut(ps);const ms={allDaySlot:Boolean};var vs=Fe({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:ms,views:{timeGrid:{component:gs,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});we.touchMouseIgnoreWait=500;let ge=0,J=0,fe=!1;class et{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=i=>{if(!this.shouldIgnoreMouse()&&Ss(i)&&this.tryStart(i)){let t=this.createEventFromMouse(i,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=i=>{let t=this.createEventFromMouse(i);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleMouseUp=i=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(i)),this.cleanup()},this.handleTouchStart=i=>{if(this.tryStart(i)){this.isTouchDragging=!0;let t=this.createEventFromTouch(i,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t);let s=i.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=i=>{let t=this.createEventFromTouch(i);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleTouchEnd=i=>{if(this.isDragging){let t=i.target;t.removeEventListener("touchmove",this.handleTouchMove),t.removeEventListener("touchend",this.handleTouchEnd),t.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(i)),this.cleanup(),this.isTouchDragging=!1,Es()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=i=>{if(!this.shouldIgnoreMove){let t=window.scrollX-this.prevScrollX+this.prevPageX,s=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:i,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:t,pageY:s,deltaX:t-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=e,this.emitter=new Be,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),ys()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),bs()}tryStart(e){let i=this.querySubjectEl(e),t=e.target;return i&&(!this.handleSelector||j(t,this.handleSelector))?(this.subjectEl=i,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){fe=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?j(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return ge||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(fe=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,i){let t=0,s=0;return i?(this.origPageX=e.pageX,this.origPageY=e.pageY):(t=e.pageX-this.origPageX,s=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:t,deltaY:s}}createEventFromTouch(e,i){let t=e.touches,s,r,n=0,l=0;return t&&t.length?(s=t[0].pageX,r=t[0].pageY):(s=e.pageX,r=e.pageY),i?(this.origPageX=s,this.origPageY=r):(n=s-this.origPageX,l=r-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:r,deltaX:n,deltaY:l}}}function Ss(o){return o.button===0&&!o.ctrlKey}function Es(){ge+=1,setTimeout(()=>{ge-=1},we.touchMouseIgnoreWait)}function ys(){J+=1,J===1&&window.addEventListener("touchmove",tt,{passive:!1})}function bs(){J-=1,J||window.removeEventListener("touchmove",tt,{passive:!1})}function tt(o){fe&&o.preventDefault()}class ws{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,i,t){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=i-window.scrollX,this.origScreenY=t-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,i){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=i-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,i){let t=()=>{this.cleanup(),i()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(t,this.revertDuration):setTimeout(t,0)}doRevertAnimation(e,i){let t=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();t.style.transition="top "+i+"ms,left "+i+"ms",ne(t,{left:s.left,top:s.top}),ii(t,()=>{t.style.transition="",e()})}cleanup(){this.mirrorEl&&(si(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&ne(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,i=this.mirrorEl;return i||(i=this.mirrorEl=this.sourceEl.cloneNode(!0),i.style.userSelect="none",i.style.webkitUserSelect="none",i.style.pointerEvents="none",i.classList.add("fc-event-dragging"),ne(i,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(i)),i}}class it extends fi{constructor(e,i){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=i,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class st extends it{constructor(e,i){super(new ui(e),i)}getEventTarget(){return this.scrollController.el}computeClientRect(){return gi(this.scrollController.el)}}class Ds extends it{constructor(e){super(new hi,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Ve=typeof performance=="function"?performance.now:Date.now;class xs{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let i=Ve();this.handleSide(e,(i-this.msSinceRequest)/1e3),this.requestAnimation(i)}else this.isAnimating=!1}}}start(e,i,t){this.isEnabled&&(this.scrollCaches=this.buildCaches(t),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,i))}handleMove(e,i){if(this.isEnabled){let t=e-window.scrollX,s=i-window.scrollY,r=this.pointerScreenY===null?0:s-this.pointerScreenY,n=this.pointerScreenX===null?0:t-this.pointerScreenX;r<0?this.everMovedUp=!0:r>0&&(this.everMovedDown=!0),n<0?this.everMovedLeft=!0:n>0&&(this.everMovedRight=!0),this.pointerScreenX=t,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Ve()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,i){let{scrollCache:t}=e,{edgeThreshold:s}=this,r=s-e.distance,n=r*r/(s*s)*this.maxVelocity*i,l=1;switch(e.name){case"left":l=-1;case"right":t.setScrollLeft(t.getScrollLeft()+n*l);break;case"top":l=-1;case"bottom":t.setScrollTop(t.getScrollTop()+n*l);break}}computeBestEdge(e,i){let{edgeThreshold:t}=this,s=null,r=this.scrollCaches||[];for(let n of r){let l=n.clientRect,a=e-l.left,c=l.right-e,d=i-l.top,h=l.bottom-i;a>=0&&c>=0&&d>=0&&h>=0&&(d<=t&&this.everMovedUp&&n.canScrollUp()&&(!s||s.distance>d)&&(s={scrollCache:n,name:"top",distance:d}),h<=t&&this.everMovedDown&&n.canScrollDown()&&(!s||s.distance>h)&&(s={scrollCache:n,name:"bottom",distance:h}),a<=t&&this.everMovedLeft&&n.canScrollLeft()&&(!s||s.distance>a)&&(s={scrollCache:n,name:"left",distance:a}),c<=t&&this.everMovedRight&&n.canScrollRight()&&(!s||s.distance>c)&&(s={scrollCache:n,name:"right",distance:c}))}return s}buildCaches(e){return this.queryScrollEls(e).map(i=>i===window?new Ds(!1):new st(i,!1))}queryScrollEls(e){let i=[];for(let t of this.scrollQuery)typeof t=="object"?i.push(t):i.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(t)));return i}}class X extends Yt{constructor(e,i){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,Bt(document.body),$t(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let r=this.minDistance,n,{deltaX:l,deltaY:a}=s;n=l*l+a*a,n>=r*r&&this.handleDistanceSurpassed(s)}this.isDragging&&(s.origEvent.type!=="scroll"&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,Kt(document.body),Qt(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let t=this.pointer=new et(e);t.emitter.on("pointerdown",this.onPointerDown),t.emitter.on("pointermove",this.onPointerMove),t.emitter.on("pointerup",this.onPointerUp),i&&(t.selector=i),this.mirror=new ws,this.autoScroller=new xs}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class Cs{constructor(e){this.el=e,this.origRect=$e(e),this.scrollCaches=mi(e).map(i=>new st(i,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let i of this.scrollCaches)e+=i.origScrollLeft-i.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let i of this.scrollCaches)e+=i.origScrollTop-i.getScrollTop();return e}isWithinClipping(e,i){let t={left:e,top:i};for(let s of this.scrollCaches)if(!Rs(s.getEventTarget())&&!vi(t,s.clientRect))return!1;return!0}}function Rs(o){let e=o.tagName;return e==="HTML"||e==="BODY"}class te{constructor(e,i){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=t=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(t),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",t)):s.setIgnoreMove(!0)},this.handleDragStart=t=>{this.emitter.trigger("dragstart",t),this.handleMove(t,!0)},this.handleDragMove=t=>{this.emitter.trigger("dragmove",t),this.handleMove(t)},this.handlePointerUp=t=>{this.releaseHits(),this.emitter.trigger("pointerup",t)},this.handleDragEnd=t=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,t),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",t)},this.droppableStore=i,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Be}processFirstCoord(e){let i={left:e.pageX,top:e.pageY},t=i,s=e.subjectEl,r;s instanceof HTMLElement&&(r=$e(s),t=ri(t,r));let n=this.initialHit=this.queryHitForOffset(t.left,t.top);if(n){if(this.useSubjectCenter&&r){let l=li(r,n.rect);l&&(t=oi(l))}this.coordAdjust=ai(t,i)}else this.coordAdjust={left:0,top:0}}handleMove(e,i){let t=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(i||!ie(this.movingHit,t))&&(this.movingHit=t,this.emitter.trigger("hitupdate",t,!1,e))}prepareHits(){this.offsetTrackers=di(this.droppableStore,e=>(e.component.prepareHits(),new Cs(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let i in e)e[i].destroy();this.offsetTrackers={}}queryHitForOffset(e,i){let{droppableStore:t,offsetTrackers:s}=this,r=null;for(let n in t){let l=t[n].component,a=s[n];if(a&&a.isWithinClipping(e,i)){let c=a.computeLeft(),d=a.computeTop(),h=e-c,f=i-d,{origRect:m}=a,v=m.right-m.left,p=m.bottom-m.top;if(h>=0&&h<v&&f>=0&&f<p){let y=l.queryHit(h,f,v,p);y&&ci(y.dateProfile.activeRange,y.dateSpan.range)&&(this.disablePointCheck||a.el.contains(a.el.getRootNode().elementFromPoint(h+c-window.scrollX,f+d-window.scrollY)))&&(!r||y.layer>r.layer)&&(y.componentId=n,y.context=l.context,y.rect.left+=c,y.rect.right+=c,y.rect.top+=d,y.rect.bottom+=d,r=y)}}}return r}}function ie(o,e){return!o&&!e?!0:!!o!=!!e?!1:ni(o.dateSpan,e.dateSpan)}function nt(o,e){let i={};for(let t of e.pluginHooks.datePointTransforms)Object.assign(i,t(o,e));return Object.assign(i,Ts(o,e.dateEnv)),i}function Ts(o,e){return{date:e.toDate(o.range.start),dateStr:e.formatIso(o.range.start,{omitTime:o.allDay}),allDay:o.allDay}}class Ms extends ee{constructor(e){super(e),this.handlePointerDown=t=>{let{dragging:s}=this,r=t.origEvent.target;s.setIgnoreMove(!this.component.isValidDateDownEl(r))},this.handleDragEnd=t=>{let{component:s}=this,{pointer:r}=this.dragging;if(!r.wasTouchScroll){let{initialHit:n,finalHit:l}=this.hitDragging;if(n&&l&&ie(n,l)){let{context:a}=s,c=Object.assign(Object.assign({},nt(n.dateSpan,a)),{dayEl:n.dayEl,jsEvent:t.origEvent,view:a.viewApi||a.calendarApi.view});a.emitter.trigger("dateClick",c)}}},this.dragging=new X(e.el),this.dragging.autoScroller.isEnabled=!1;let i=this.hitDragging=new te(this.dragging,Ee(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class _s extends ee{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=n=>{let{component:l,dragging:a}=this,{options:c}=l.context,d=c.selectable&&l.isValidDateDownEl(n.origEvent.target);a.setIgnoreMove(!d),a.delay=n.isTouch?ks(l):null},this.handleDragStart=n=>{this.component.context.calendarApi.unselect(n)},this.handleHitUpdate=(n,l)=>{let{context:a}=this.component,c=null,d=!1;if(n){let h=this.hitDragging.initialHit;n.componentId===h.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(h,n)||(c=Ps(h,n,a.pluginHooks.dateSelectionTransformers)),(!c||!Jt(c,n.dateProfile,a))&&(d=!0,c=null)}c?a.dispatch({type:"SELECT_DATES",selection:c}):l||a.dispatch({type:"UNSELECT_DATES"}),d?be():ye(),l||(this.dragSelection=c)},this.handlePointerUp=n=>{this.dragSelection&&(ei(this.dragSelection,n,this.component.context),this.dragSelection=null)};let{component:i}=e,{options:t}=i.context,s=this.dragging=new X(e.el);s.touchScrollAllowed=!1,s.minDistance=t.selectMinDistance||0,s.autoScroller.isEnabled=t.dragScroll;let r=this.hitDragging=new te(this.dragging,Ee(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function ks(o){let{options:e}=o.context,i=e.selectLongPressDelay;return i==null&&(i=e.longPressDelay),i}function Ps(o,e,i){let t=o.dateSpan,s=e.dateSpan,r=[t.range.start,t.range.end,s.range.start,s.range.end];r.sort(pi);let n={};for(let l of i){let a=l(o,e);if(a===!1)return null;a&&Object.assign(n,a)}return n.range={start:r[0],end:r[3]},n.allDay=t.allDay,n}class Y extends ee{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=n=>{let l=n.origEvent.target,{component:a,dragging:c}=this,{mirror:d}=c,{options:h}=a.context,f=a.context;this.subjectEl=n.subjectEl;let m=this.subjectSeg=ue(n.subjectEl),p=(this.eventRange=m.eventRange).instance.instanceId;this.relevantEvents=Ge(f.getCurrentData().eventStore,p),c.minDistance=n.isTouch?0:h.eventDragMinDistance,c.delay=n.isTouch&&p!==a.props.eventSelection?Ns(a):null,h.fixedMirrorParent?d.parentNode=h.fixedMirrorParent:d.parentNode=j(l,".fc"),d.revertDuration=h.dragRevertDuration;let y=a.isValidSegDownEl(l)&&!j(l,".fc-event-resizer");c.setIgnoreMove(!y),this.isDragging=y&&n.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=n=>{let l=this.component.context,a=this.eventRange,c=a.instance.instanceId;n.isTouch?c!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:c}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(n),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new H(l,a.def,a.instance),jsEvent:n.origEvent,view:l.viewApi}))},this.handleHitUpdate=(n,l)=>{if(!this.isDragging)return;let a=this.relevantEvents,c=this.hitDragging.initialHit,d=this.component.context,h=null,f=null,m=null,v=!1,p={affectedEvents:a,mutatedEvents:Q(),isEvent:!0};if(n){h=n.context;let y=h.options;d===h||y.editable&&y.droppable?(f=Is(c,n,this.eventRange.instance.range.start,h.getCurrentData().pluginHooks.eventDragMutationMassagers),f&&(m=Xe(a,h.getCurrentData().eventUiBases,f,h),p.mutatedEvents=m,Ye(p,n.dateProfile,h)||(v=!0,f=null,m=null,p.mutatedEvents=Q()))):h=null}this.displayDrag(h,p),v?be():ye(),l||(d===h&&ie(c,n)&&(f=null),this.dragging.setMirrorNeedsRevert(!f),this.dragging.setMirrorIsVisible(!n||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=h,this.validMutation=f,this.mutatedRelevantEvents=m)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=n=>{if(this.isDragging){let l=this.component.context,a=l.viewApi,{receivingContext:c,validMutation:d}=this,h=this.eventRange.def,f=this.eventRange.instance,m=new H(l,h,f),v=this.relevantEvents,p=this.mutatedRelevantEvents,{finalHit:y}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:m,jsEvent:n.origEvent,view:a}),d){if(c===l){let R=new H(l,p.defs[h.defId],f?p.instances[f.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:p});let N={oldEvent:m,event:R,relatedEvents:Z(p,l,f),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:v})}},P={};for(let A of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(P,A(d,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},N),P),{el:n.subjectEl,delta:d.datesDelta,jsEvent:n.origEvent,view:a})),l.emitter.trigger("eventChange",N)}else if(c){let R={event:m,relatedEvents:Z(v,l,f),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:v})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},R),{draggedEl:n.subjectEl,view:a})),l.dispatch({type:"REMOVE_EVENTS",eventStore:v}),l.emitter.trigger("eventRemove",R);let N=p.defs[h.defId],P=p.instances[f.instanceId],A=new H(c,N,P);c.dispatch({type:"MERGE_EVENTS",eventStore:p});let L={event:A,relatedEvents:Z(p,c,P),revert(){c.dispatch({type:"REMOVE_EVENTS",eventStore:p})}};c.emitter.trigger("eventAdd",L),n.isTouch&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:f.instanceId}),c.emitter.trigger("drop",Object.assign(Object.assign({},nt(y.dateSpan,c)),{draggedEl:n.subjectEl,jsEvent:n.origEvent,view:y.context.viewApi})),c.emitter.trigger("eventReceive",Object.assign(Object.assign({},L),{draggedEl:n.subjectEl,view:y.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:i}=this,{options:t}=i.context,s=this.dragging=new X(e.el);s.pointer.selector=Y.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=t.dragScroll;let r=this.hitDragging=new te(this.dragging,ti);r.useSubjectCenter=e.useEventCenter,r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,i){let t=this.component.context,s=this.receivingContext;s&&s!==e&&(s===t?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:i.affectedEvents,mutatedEvents:Q(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:i})}clearDrag(){let e=this.component.context,{receivingContext:i}=this;i&&i.dispatch({type:"UNSET_EVENT_DRAG"}),e!==i&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Y.SELECTOR=".fc-event-draggable, .fc-event-resizable";function Is(o,e,i,t){let s=o.dateSpan,r=e.dateSpan,n=s.range.start,l=r.range.start,a={};s.allDay!==r.allDay&&(a.allDay=r.allDay,a.hasEnd=e.context.options.allDayMaintainDuration,r.allDay?n=he(i):n=i);let c=Ke(n,l,o.context.dateEnv,o.componentId===e.componentId?o.largeUnit:null);c.milliseconds&&(a.allDay=!1);let d={datesDelta:c,standardProps:a};for(let h of t)h(d,o,e);return d}function Ns(o){let{options:e}=o.context,i=e.eventLongPressDelay;return i==null&&(i=e.longPressDelay),i}class As extends ee{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=r=>{let{component:n}=this,l=this.querySegEl(r),a=ue(l),c=this.eventRange=a.eventRange;this.dragging.minDistance=n.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(r.origEvent.target)||r.isTouch&&this.component.props.eventSelection!==c.instance.instanceId)},this.handleDragStart=r=>{let{context:n}=this.component,l=this.eventRange;this.relevantEvents=Ge(n.getCurrentData().eventStore,this.eventRange.instance.instanceId);let a=this.querySegEl(r);this.draggingSegEl=a,this.draggingSeg=ue(a),n.calendarApi.unselect(),n.emitter.trigger("eventResizeStart",{el:a,event:new H(n,l.def,l.instance),jsEvent:r.origEvent,view:n.viewApi})},this.handleHitUpdate=(r,n,l)=>{let{context:a}=this.component,c=this.relevantEvents,d=this.hitDragging.initialHit,h=this.eventRange.instance,f=null,m=null,v=!1,p={affectedEvents:c,mutatedEvents:Q(),isEvent:!0};r&&(r.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,r)||(f=Ls(d,r,l.subjectEl.classList.contains("fc-event-resizer-start"),h.range))),f&&(m=Xe(c,a.getCurrentData().eventUiBases,f,a),p.mutatedEvents=m,Ye(p,r.dateProfile,a)||(v=!0,f=null,m=null,p.mutatedEvents=null)),m?a.dispatch({type:"SET_EVENT_RESIZE",state:p}):a.dispatch({type:"UNSET_EVENT_RESIZE"}),v?be():ye(),n||(f&&ie(d,r)&&(f=null),this.validMutation=f,this.mutatedRelevantEvents=m)},this.handleDragEnd=r=>{let{context:n}=this.component,l=this.eventRange.def,a=this.eventRange.instance,c=new H(n,l,a),d=this.relevantEvents,h=this.mutatedRelevantEvents;if(n.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:c,jsEvent:r.origEvent,view:n.viewApi}),this.validMutation){let f=new H(n,h.defs[l.defId],a?h.instances[a.instanceId]:null);n.dispatch({type:"MERGE_EVENTS",eventStore:h});let m={oldEvent:c,event:f,relatedEvents:Z(h,n,a),revert(){n.dispatch({type:"MERGE_EVENTS",eventStore:d})}};n.emitter.trigger("eventResize",Object.assign(Object.assign({},m),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||U(0),endDelta:this.validMutation.endDelta||U(0),jsEvent:r.origEvent,view:n.viewApi})),n.emitter.trigger("eventChange",m)}else n.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:i}=e,t=this.dragging=new X(e.el);t.pointer.selector=".fc-event-resizer",t.touchScrollAllowed=!1,t.autoScroller.isEnabled=i.context.options.dragScroll;let s=this.hitDragging=new te(this.dragging,Ee(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return j(e.subjectEl,".fc-event")}}function Ls(o,e,i,t){let s=o.context.dateEnv,r=o.dateSpan.range.start,n=e.dateSpan.range.start,l=Ke(r,n,s,o.largeUnit);if(i){if(s.add(t.start,l)<t.end)return{startDelta:l}}else if(s.add(t.end,l)>t.start)return{endDelta:l};return null}class Hs{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=t=>{t.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=t=>{let s=this.context.options.unselectCancel,r=Zt(t.origEvent);this.matchesCancel=!!j(r,s),this.matchesEvent=!!j(r,Y.SELECTOR)},this.onDocumentPointerUp=t=>{let{context:s}=this,{documentPointer:r}=this,n=s.getCurrentData();if(!r.wasTouchScroll){if(n.dateSelection&&!this.isRecentPointerDateSelect){let l=s.options.unselectAuto;l&&(!l||!this.matchesCancel)&&s.calendarApi.unselect(t)}n.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let i=this.documentPointer=new et(document);i.shouldIgnoreMove=!0,i.shouldWatchScroll=!1,i.emitter.on("pointerdown",this.onDocumentPointerDown),i.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const js={fixedMirrorParent:_},qs={dateClick:_,eventDragStart:_,eventDragStop:_,eventDrop:_,eventResizeStart:_,eventResizeStop:_,eventResize:_,drop:_,eventReceive:_,eventLeave:_};we.dataAttrPrefix="";var Vs=Fe({name:"@fullcalendar/interaction",componentInteractions:[Ms,_s,Y,As],calendarInteractions:[Hs],elementDraggingImpl:X,optionRefiners:js,listenerRefiners:qs});const Os={key:0,class:"mt-2 text-sm text-destructive"},zs={class:"grid gap-4 sm:grid-cols-2"},Ws={key:0,class:"mt-2 text-sm text-destructive"},Us={key:0,class:"mt-2 text-sm text-destructive"},Fs={key:0,class:"mt-2 text-sm text-destructive"},Gs={key:0,class:"mt-2 text-sm text-destructive"},Xs={class:"mt-4 space-y-4"},Ys={class:"flex items-center justify-between mb-3"},Bs={class:"font-medium"},$s={class:"grid gap-4 sm:grid-cols-2"},Ks={class:"mt-3"},Qs={class:"flex justify-end gap-3"},Zs={__name:"ManualReservationForm",props:{startDate:{type:String,required:!0},endDate:{type:String,required:!0},equipments:{type:Array,required:!0}},emits:["cancel"],setup(o,{emit:e}){const i=o,t=e,s=ht({title:"",start_date:i.startDate,end_date:i.endDate,recipient:"",notes:"",items:[{equipment_id:"",quantity:1,notes:""}]}),r=le(()=>i.equipments.filter(c=>c.is_available)),n=()=>{s.items.push({equipment_id:"",quantity:1,notes:""})},l=c=>{s.items.splice(c,1)},a=()=>{s.post(route("app.organizations.calendar.manual-reservation"),{onSuccess:()=>{t("cancel")}})};return(c,d)=>(w(),C("form",{onSubmit:ut(a,["prevent"]),class:"space-y-6"},[E("div",null,[S(u(I),{for:"title",required:""},{default:b(()=>d[6]||(d[6]=[x("Titre de la réservation",-1)])),_:1,__:[6]}),S(u(V),{id:"title",modelValue:u(s).title,"onUpdate:modelValue":d[0]||(d[0]=h=>u(s).title=h),type:"text",placeholder:"Ex: Événement externe, Maintenance, etc.",required:"",class:"mt-2"},null,8,["modelValue"]),u(s).errors.title?(w(),C("p",Os,D(u(s).errors.title),1)):T("",!0)]),E("div",zs,[E("div",null,[S(u(I),{for:"start_date",required:""},{default:b(()=>d[7]||(d[7]=[x("Date de début",-1)])),_:1,__:[7]}),S(u(V),{id:"start_date",modelValue:u(s).start_date,"onUpdate:modelValue":d[1]||(d[1]=h=>u(s).start_date=h),type:"date",required:"",class:"mt-2"},null,8,["modelValue"]),u(s).errors.start_date?(w(),C("p",Ws,D(u(s).errors.start_date),1)):T("",!0)]),E("div",null,[S(u(I),{for:"end_date",required:""},{default:b(()=>d[8]||(d[8]=[x("Date de fin",-1)])),_:1,__:[8]}),S(u(V),{id:"end_date",modelValue:u(s).end_date,"onUpdate:modelValue":d[2]||(d[2]=h=>u(s).end_date=h),type:"date",required:"",class:"mt-2"},null,8,["modelValue"]),u(s).errors.end_date?(w(),C("p",Us,D(u(s).errors.end_date),1)):T("",!0)])]),E("div",null,[S(u(I),{for:"recipient"},{default:b(()=>d[9]||(d[9]=[x("Destinataire (optionnel)",-1)])),_:1,__:[9]}),S(u(V),{id:"recipient",modelValue:u(s).recipient,"onUpdate:modelValue":d[3]||(d[3]=h=>u(s).recipient=h),type:"text",placeholder:"Ex: Jean Dupont, Service technique, etc.",class:"mt-2"},null,8,["modelValue"]),u(s).errors.recipient?(w(),C("p",Fs,D(u(s).errors.recipient),1)):T("",!0)]),E("div",null,[S(u(I),{for:"notes"},{default:b(()=>d[10]||(d[10]=[x("Notes (optionnel)",-1)])),_:1,__:[10]}),S(u(bi),{id:"notes",modelValue:u(s).notes,"onUpdate:modelValue":d[4]||(d[4]=h=>u(s).notes=h),rows:"3",placeholder:"Informations supplémentaires sur cette réservation...",class:"mt-2"},null,8,["modelValue"]),u(s).errors.notes?(w(),C("p",Gs,D(u(s).errors.notes),1)):T("",!0)]),E("div",null,[S(u(I),{required:""},{default:b(()=>d[11]||(d[11]=[x("Équipements à bloquer",-1)])),_:1,__:[11]}),d[16]||(d[16]=E("p",{class:"text-sm text-muted-foreground mt-1"},"Sélectionnez les équipements à bloquer pour cette période",-1)),E("div",Xs,[(w(!0),C(oe,null,ae(u(s).items,(h,f)=>(w(),C("div",{key:f,class:"p-4 border rounded-lg"},[E("div",Ys,[E("h4",Bs,"Équipement "+D(f+1),1),u(s).items.length>1?(w(),$(u(z),{key:0,type:"button",variant:"outline",size:"sm",onClick:m=>l(f)},{default:b(()=>[S(u(Mi),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):T("",!0)]),E("div",$s,[E("div",null,[S(u(I),{for:`equipment_${f}`,required:""},{default:b(()=>d[12]||(d[12]=[x("Équipement",-1)])),_:2,__:[12]},1032,["for"]),S(u(Ri),{modelValue:h.equipment_id,"onUpdate:modelValue":m=>h.equipment_id=m,required:"",class:"mt-2"},{default:b(()=>[S(u(wi),null,{default:b(()=>[S(u(Di),{placeholder:"Sélectionnez un équipement"})]),_:1}),S(u(xi),null,{default:b(()=>[(w(!0),C(oe,null,ae(r.value,m=>(w(),$(u(Ci),{key:m.id,value:m.id},{default:b(()=>[x(D(m.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),E("div",null,[S(u(I),{for:`quantity_${f}`,required:""},{default:b(()=>d[13]||(d[13]=[x("Quantité",-1)])),_:2,__:[13]},1032,["for"]),S(u(V),{id:`quantity_${f}`,modelValue:h.quantity,"onUpdate:modelValue":m=>h.quantity=m,modelModifiers:{number:!0},type:"number",min:"1",required:"",class:"mt-2"},null,8,["id","modelValue","onUpdate:modelValue"])])]),E("div",Ks,[S(u(I),{for:`notes_${f}`},{default:b(()=>d[14]||(d[14]=[x("Notes pour cet équipement",-1)])),_:2,__:[14]},1032,["for"]),S(u(V),{id:`notes_${f}`,modelValue:h.notes,"onUpdate:modelValue":m=>h.notes=m,type:"text",placeholder:"Notes spécifiques...",class:"mt-2"},null,8,["id","modelValue","onUpdate:modelValue"])])]))),128))]),S(u(z),{type:"button",variant:"outline",onClick:n,class:"mt-3"},{default:b(()=>[S(u(_i),{class:"w-4 h-4 mr-2"}),d[15]||(d[15]=x(" Ajouter un équipement ",-1))]),_:1,__:[15]})]),E("div",Qs,[S(u(z),{type:"button",variant:"outline",onClick:d[5]||(d[5]=h=>c.$emit("cancel"))},{default:b(()=>d[17]||(d[17]=[x(" Annuler ",-1)])),_:1,__:[17]}),S(u(z),{type:"submit",disabled:u(s).processing},{default:b(()=>[u(s).processing?(w(),$(Ti,{key:0,class:"w-4 h-4 mr-2"})):T("",!0),x(" "+D(u(s).processing?"Création...":"Créer la réservation"),1)]),_:1},8,["disabled"])])],32))}},Js={class:"flex justify-between items-center"},en={class:"font-semibold text-xl leading-tight"},tn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8 py-8"},sn={class:"calendar-wrapper"},nn={key:0,class:"space-y-6"},rn={class:"flex items-start gap-4"},ln={class:"grid gap-4"},on={class:"flex items-center gap-2"},an={class:"rounded-lg bg-muted p-4"},dn={class:"flex items-center gap-2 mb-3"},cn={class:"font-medium"},hn={class:"space-y-2 text-sm text-muted-foreground"},un={key:0,class:"flex items-center gap-2"},gn=["href"],fn={key:1,class:"flex items-center gap-2"},pn=["href"],mn={class:"mt-4 pt-4 border-t border-border"},vn={class:"flex items-center gap-2 mb-2"},Sn={class:"font-medium"},En={class:"space-y-2 text-sm text-muted-foreground"},yn={key:0,class:"flex items-center gap-2"},bn=["href"],wn={key:1,class:"flex items-center gap-2"},Dn=["href"],xn={class:"flex items-start gap-2"},Cn={class:"flex-1"},Rn={class:"space-y-2"},Tn={class:"flex items-center justify-end gap-2"},Mn={key:0},lr={__name:"Index",props:{reservations:{type:Array,required:!0},equipments:{type:Array,required:!0}},setup(o){const e=o,i=le(()=>gt().props.auth.user.current_organization),t=B(null),s=B(!1),r=B(!1),n=B({start:null,end:null}),l=v=>{const p={"bg-yellow-100":"#fef9c3","bg-green-100":"#dcfce7","bg-red-100":"#fee2e2","bg-gray-100":"#f3f4f6","bg-blue-100":"#dbeafe","text-yellow-800":"#854d0e","text-green-800":"#166534","text-red-800":"#991b1b","text-gray-800":"#1f2937","text-blue-800":"#1e3a8a"},[y,R]=v.color.split(" ");return{backgroundColor:p[y],textColor:p[R]}},a=le(()=>e.reservations.map(v=>{const p=l(v.status);return{id:v.id,title:v.title,start:v.start,end:v.end,allDay:!0,backgroundColor:p.backgroundColor,textColor:p.textColor,borderColor:p.backgroundColor,extendedProps:v}})),c=v=>{t.value=v.event.extendedProps,s.value=!0},d=()=>{s.value=!1,t.value=null},h=v=>{n.value={start:v.startStr,end:v.endStr},r.value=!0},f=()=>{r.value=!1,n.value={start:null,end:null}},m=()=>{const v=new Date,p=new Date(v);p.setDate(p.getDate()+1),n.value={start:v.toISOString().split("T")[0],end:p.toISOString().split("T")[0]},r.value=!0};return(v,p)=>(w(),$(ct,{title:"Calendrier"},{header:b(()=>[E("div",Js,[E("h2",en," Calendrier des locations de "+D(i.value.name),1),S(u(z),{onClick:m},{default:b(()=>[S(u(Ie),{class:"w-4 h-4 mr-2"}),p[0]||(p[0]=x(" Réservation manuelle ",-1))]),_:1,__:[0]})])]),default:b(()=>[E("div",tn,[E("div",sn,[S(u(Si),{options:{plugins:[u(yi),u(vs),u(Vs)],initialView:"dayGridMonth",headerToolbar:{left:"prev today",center:"title",right:"next"},events:a.value,eventClick:c,locale:u(Ei),height:"auto",editable:!1,selectable:!0,select:h,selectMirror:!0,nowIndicator:!0,displayEventTime:!1,dayMaxEvents:!0,views:{dayGrid:{dayMaxEvents:4}}}},null,8,["options"])]),S(u(Te),{open:s.value,"onUpdate:open":d},{default:b(()=>[S(u(Me),{class:"sm:max-w-[500px]"},{default:b(()=>[S(u(_e),null,{default:b(()=>[S(u(ke),null,{default:b(()=>p[1]||(p[1]=[x("Détails de la location",-1)])),_:1,__:[1]})]),_:1}),t.value?(w(),C("div",nn,[E("div",rn,[S(u(Pe),{class:ft(t.value.status.color)},{default:b(()=>[x(D(t.value.status.label),1)]),_:1},8,["class"])]),E("div",ln,[E("div",on,[S(u(Ie),{class:"h-4 w-4"}),E("span",null,"Du "+D(new Date(t.value.start).toLocaleDateString())+" au "+D(new Date(t.value.end).toLocaleDateString()),1)]),E("div",an,[E("div",dn,[S(u(Pi),{class:"h-4 w-4"}),E("span",cn,D(t.value.borrower.name),1)]),E("div",hn,[t.value.borrower.phone?(w(),C("div",un,[S(u(Ne),{class:"h-4 w-4"}),E("a",{href:"tel:"+t.value.borrower.phone,class:"hover:underline"},D(t.value.borrower.phone),9,gn)])):T("",!0),t.value.borrower.email?(w(),C("div",fn,[S(u(Ae),{class:"h-4 w-4"}),E("a",{href:"mailto:"+t.value.borrower.email,class:"hover:underline"},D(t.value.borrower.email),9,pn)])):T("",!0)]),E("div",mn,[E("div",vn,[S(u(ki),{class:"h-4 w-4"}),E("span",Sn,D(t.value.borrower.contact.name),1)]),E("div",En,[t.value.borrower.contact.phone?(w(),C("div",yn,[S(u(Ne),{class:"h-4 w-4"}),E("a",{href:"tel:"+t.value.borrower.contact.phone,class:"hover:underline"},D(t.value.borrower.contact.phone),9,bn)])):T("",!0),t.value.borrower.contact.email?(w(),C("div",wn,[S(u(Ae),{class:"h-4 w-4"}),E("a",{href:"mailto:"+t.value.borrower.contact.email,class:"hover:underline"},D(t.value.borrower.contact.email),9,Dn)])):T("",!0)])])]),E("div",xn,[S(u(Ii),{class:"h-4 w-4 mt-1"}),E("div",Cn,[p[2]||(p[2]=E("h4",{class:"font-medium mb-2"},"Équipements",-1)),E("ul",Rn,[(w(!0),C(oe,null,ae(t.value.items,y=>(w(),C("li",{key:y.equipment,class:"flex items-center gap-2 text-sm"},[S(u(Pe),null,{default:b(()=>[x(D(y.quantity),1)]),_:2},1024),E("span",null,D(y.equipment),1)]))),128))])])]),E("div",Tn,[S(u(z),{as:"a",href:v.route("app.organizations.reservations.out.edit",t.value)},{default:b(()=>p[3]||(p[3]=[x(" Gérer la réservation ",-1)])),_:1,__:[3]},8,["href"])])])])):T("",!0)]),_:1})]),_:1},8,["open"]),S(u(Te),{open:r.value,"onUpdate:open":f},{default:b(()=>[S(u(Me),{class:"sm:max-w-[600px]"},{default:b(()=>[S(u(_e),null,{default:b(()=>[S(u(ke),null,{default:b(()=>p[4]||(p[4]=[x("Nouvelle réservation manuelle",-1)])),_:1,__:[4]})]),_:1}),n.value.start&&n.value.end?(w(),C("div",Mn,[S(Zs,{"start-date":n.value.start,"end-date":n.value.end,equipments:o.equipments,onCancel:f},null,8,["start-date","end-date","equipments"])])):T("",!0)]),_:1})]),_:1},8,["open"])])]),_:1}))}};export{lr as default};
