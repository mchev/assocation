import{_ as rt}from"./AppLayout-C2RBtAmW.js";import{l as Se,E as lt,i as Y,c as ot,o as I,w as b,a as S,b as y,u as E,f as _,g as z,d as N,n as at,t as w,F as ct,r as dt}from"./app-B4qOAnfi.js";import{m as D,y as h,D as ht,a as gt,b as ce,d as O,c as ut,e as ft,W as pt,C as de,g as Ee,S as mt,V as ye,f as vt,N as Ae,h as he,r as be,i as U,j as St,k as Et,B as H,l as yt,n as bt,o as wt,p as se,q as Dt,w as ge,R as He,P as je,s as xt,t as Ct,u as Rt,v as ne,_ as q,x as Tt,z as Mt,A as kt,E as Pt,F as It,G as _t,H as re,I as j,J as W,K as Nt,M as Lt,L as At,O as Ht,Q as Oe,T as jt,U as Ot,X as Wt,Y as zt,Z as Ft,$ as Ut,a0 as We,a1 as C,a2 as Vt,a3 as Gt,a4 as Yt,a5 as qt,a6 as Bt,a7 as Xt,a8 as A,a9 as K,aa as ue,ab as $t,ac as fe,ad as pe,ae as Kt,af as le,ag as ze,ah as L,ai as Fe,aj as Ue,ak as B,al as X,am as Zt,an as Ve,ao as ee,ap as Qt,aq as Jt,ar as ei,as as Ge,at as ti,au as ii,av as si,aw as ni,ax as ri,ay as li,az as Ye,aA as me,aB as oi,aC as ai,aD as ci,aE as di,aF as hi,aG as gi,aH as ui,aI as fi,aJ as pi,aK as mi}from"./fr-CroaajLV.js";import{_ as we,a as De}from"./DialogContent.vue_vue_type_script_setup_true_lang-Dl1PDf2-.js";import{_ as xe,a as Ce}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CD4HfCwF.js";import{_ as Re}from"./index-DI6RvLef.js";import{_ as te}from"./index-C12ZVvTv.js";import{c as vi}from"./createLucideIcon-BZQQAVQF.js";import{B as Si}from"./building-2-DCsiGCHM.js";import{P as Te}from"./phone-CYq2d0s-.js";import{M as Me}from"./mail-CV61DQsi.js";import{U as Ei}from"./FlashMessage-D_-HBX8k.js";import{P as yi}from"./package-Bpb1lRVT.js";import"./useForwardPropsEmits-Jyk7U837.js";import"./useForwardExpose-BhbG1jVO.js";import"./DialogPortal-BlCrAxkS.js";import"./DialogTitle-BGek0nz_.js";import"./UserDropdown-Bfa6tj0l.js";import"./loader-circle-I9gtGeU6.js";import"./Input.vue_vue_type_script_setup_true_lang-CDzGxu88.js";import"./plus-B3taoEdH.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=vi("CalendarDaysIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);class bi extends St{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?Et(e)?["timed","allDay"]:["allDay"]:["timed"]}}const wi=U({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function qe(o){let e=["fc-timegrid-slot","fc-timegrid-slot-label",o.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return h(yt.Consumer,null,i=>{if(!o.isLabeled)return h("td",{className:e.join(" "),"data-time":o.isoTimeStr});let{dateEnv:t,options:s,viewApi:r}=i,n=s.slotLabelFormat==null?wi:Array.isArray(s.slotLabelFormat)?U(s.slotLabelFormat[0]):U(s.slotLabelFormat),l={level:0,time:o.time,date:t.toDate(o.date),view:r,text:t.format(o.date,n)};return h(de,{elTag:"td",elClasses:e,elAttrs:{"data-time":o.isoTimeStr},renderProps:l,generatorName:"slotLabelContent",customGenerator:s.slotLabelContent,defaultGenerator:Di,classNameGenerator:s.slotLabelClassNames,didMount:s.slotLabelDidMount,willUnmount:s.slotLabelWillUnmount},a=>h("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},h(a,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function Di(o){return o.text}class xi extends H{render(){return this.props.slatMetas.map(e=>h("tr",{key:e.key},h(qe,Object.assign({},e))))}}const Ci=U({week:"short"}),Ri=5;class Ti extends ce{constructor(){super(...arguments),this.allDaySplitter=new bi,this.headerElRef=O(),this.rootElRef=O(),this.scrollerElRef=O(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let i=this.scrollerElRef.current;i&&(i.scrollTop=e)},this.renderHeadAxis=(e,i="")=>{let{options:t}=this.context,{dateProfile:s}=this.props,r=s.renderRange,l=ut(r.start,r.end)===1?ft(this.context,r.start,"week"):{};return t.weekNumbers&&e==="day"?h(pt,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:r.start,defaultFormat:Ci},a=>h("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:i}},h(a,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:l}))):h("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},h("div",{className:"fc-timegrid-axis-frame",style:{height:i}}))},this.renderTableRowAxis=e=>{let{options:i,viewApi:t}=this.context,s={text:i.allDayText,view:t};return h(de,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:s,generatorName:"allDayContent",customGenerator:i.allDayContent,defaultGenerator:Mi,classNameGenerator:i.allDayClassNames,didMount:i.allDayDidMount,willUnmount:i.allDayWillUnmount},r=>h("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},h(r,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,i,t){let{context:s,props:r}=this,n=[],l=Ee(s.options);return e&&n.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),i&&(n.push({type:"body",key:"all-day",chunk:{content:i}}),n.push({type:"body",key:"all-day-divider",outerContent:h("tr",{role:"presentation",className:"fc-scrollgrid-section"},h("td",{className:"fc-timegrid-divider "+s.theme.getClass("tableCellShaded")}))})),n.push({type:"body",key:"body",liquid:!0,expandRows:!!s.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:t}}),h(ye,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:s.viewSpec},h(mt,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[{width:"shrink"}],sections:n}))}renderHScrollLayout(e,i,t,s,r,n,l){let a=this.context.pluginHooks.scrollGridImpl;if(!a)throw new Error("No ScrollGrid implementation");let{context:c,props:d}=this,u=!d.forPrint&&Ee(c.options),f=!d.forPrint&&vt(c.options),g=[];e&&g.push({type:"header",key:"header",isSticky:u,syncRowHeights:!0,chunks:[{key:"axis",rowContent:p=>h("tr",{role:"presentation"},this.renderHeadAxis("day",p.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),i&&(g.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:p=>h("tr",{role:"presentation"},this.renderTableRowAxis(p.rowSyncHeights[0]))},{key:"cols",content:i}]}),g.push({key:"all-day-divider",type:"body",outerContent:h("tr",{role:"presentation",className:"fc-scrollgrid-section"},h("td",{colSpan:2,className:"fc-timegrid-divider "+c.theme.getClass("tableCellShaded")}))}));let m=c.options.nowIndicator;return g.push({type:"body",key:"body",liquid:!0,expandRows:!!c.options.expandRows,chunks:[{key:"axis",content:p=>h("div",{className:"fc-timegrid-axis-chunk"},h("table",{"aria-hidden":!0,style:{height:p.expandRows?p.clientHeight:""}},p.tableColGroupNode,h("tbody",null,h(xi,{slatMetas:n}))),h("div",{className:"fc-timegrid-now-indicator-container"},h(Ae,{unit:m?"minute":"day"},v=>{let x=m&&l&&l.safeComputeTop(v);return typeof x=="number"?h(he,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:x},isAxis:!0,date:v}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:t}]}),f&&g.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:be},{key:"cols",content:be}]}),h(ye,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:c.viewSpec},h(a,{liquid:!d.isHeightAuto&&!d.forPrint,forPrint:d.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:s,minWidth:r}]}],sections:g}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:i}=this.context.options;return(e===!0||i===!0)&&(e=void 0,i=Ri),{dayMaxEvents:e,dayMaxEventRows:i}}}function Mi(o){return o.text}class ki{constructor(e,i,t){this.positions=e,this.dateProfile=i,this.slotDuration=t}safeComputeTop(e){let{dateProfile:i}=this;if(_t(i.currentRange,e)){let t=re(e),s=e.valueOf()-t.valueOf();if(s>=j(i.slotMinTime)&&s<j(i.slotMaxTime))return this.computeTimeTop(W(s))}return null}computeDateTop(e,i){return i||(i=re(e)),this.computeTimeTop(W(e.valueOf()-i.valueOf()))}computeTimeTop(e){let{positions:i,dateProfile:t}=this,s=i.els.length,r=(e.milliseconds-j(t.slotMinTime))/j(this.slotDuration),n,l;return r=Math.max(0,r),r=Math.min(s,r),n=Math.floor(r),n=Math.min(n,s-1),l=r-n,i.tops[n]+i.getHeight(n)*l}}class Pi extends H{render(){let{props:e,context:i}=this,{options:t}=i,{slatElRefs:s}=e;return h("tbody",null,e.slatMetas.map((r,n)=>{let l={time:r.time,date:i.dateEnv.toDate(r.date),view:i.viewApi};return h("tr",{key:r.key,ref:s.createRef(r.key)},e.axis&&h(qe,Object.assign({},r)),h(de,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!r.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":r.isoTimeStr},renderProps:l,generatorName:"slotLaneContent",customGenerator:t.slotLaneContent,classNameGenerator:t.slotLaneClassNames,didMount:t.slotLaneDidMount,willUnmount:t.slotLaneWillUnmount}))}))}}class Ii extends H{constructor(){super(...arguments),this.rootElRef=O(),this.slatElRefs=new He}render(){let{props:e,context:i}=this;return h("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},h("table",{"aria-hidden":!0,className:i.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,h(Pi,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:i}=this;i.onCoords&&i.clientWidth!==null&&this.rootElRef.current.offsetHeight&&i.onCoords(new ki(new je(this.rootElRef.current,_i(this.slatElRefs.currentMap,i.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function _i(o,e){return e.map(i=>o[i.key])}function F(o,e){let i=[],t;for(t=0;t<e;t+=1)i.push([]);if(o)for(t=0;t<o.length;t+=1)i[o[t].col].push(o[t]);return i}function Pe(o,e){let i=[];if(o){for(let t=0;t<e;t+=1)i[t]={affectedInstances:o.affectedInstances,isEvent:o.isEvent,segs:[]};for(let t of o.segs)i[t.col].segs.push(t)}else for(let t=0;t<e;t+=1)i[t]=null;return i}class Ni extends H{render(){let{props:e}=this;return h(Lt,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>Xe(e.hiddenSegs,e),defaultGenerator:Li,forceTimed:!0},i=>h(i,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function Li(o){return o.shortText}function Ai(o,e,i){let t=new At;e!=null&&(t.strictOrder=e),i!=null&&(t.maxStackCnt=i);let s=t.addSegs(o),r=Ht(s),n=Hi(t);return n=zi(n,1),{segRects:Fi(n),hiddenGroups:r}}function Hi(o){const{entriesByLevel:e}=o,i=ve((t,s)=>t+":"+s,(t,s)=>{let r=Wi(o,t,s),n=Ie(r,i),l=e[t][s];return[Object.assign(Object.assign({},l),{nextLevelNodes:n[0]}),l.thickness+n[1]]});return Ie(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,i)[0]}function Ie(o,e){if(!o)return[[],0];let{level:i,lateralStart:t,lateralEnd:s}=o,r=t,n=[];for(;r<s;)n.push(e(i,r)),r+=1;return n.sort(ji),[n.map(Oi),n[0][1]]}function ji(o,e){return e[1]-o[1]}function Oi(o){return o[0]}function Wi(o,e,i){let{levelCoords:t,entriesByLevel:s}=o,r=s[e][i],n=t[e]+r.thickness,l=t.length,a=e;for(;a<l&&t[a]<n;a+=1);for(;a<l;a+=1){let c=s[a],d,u=Ft(c,r.span.start,Ut),f=u[0]+u[1],g=f;for(;(d=c[g])&&d.span.start<r.span.end;)g+=1;if(f<g)return{level:a,lateralStart:f,lateralEnd:g}}return null}function zi(o,e){const i=ve((t,s,r)=>Oe(t),(t,s,r)=>{let{nextLevelNodes:n,thickness:l}=t,a=l+r,c=l/a,d,u=[];if(!n.length)d=e;else for(let g of n)if(d===void 0){let m=i(g,s,a);d=m[0],u.push(m[1])}else{let m=i(g,d,0);u.push(m[1])}let f=(d-s)*c;return[d-f,Object.assign(Object.assign({},t),{thickness:f,nextLevelNodes:u})]});return o.map(t=>i(t,0,0)[1])}function Fi(o){let e=[];const i=ve((s,r,n)=>Oe(s),(s,r,n)=>{let l=Object.assign(Object.assign({},s),{levelCoord:r,stackDepth:n,stackForward:0});return e.push(l),l.stackForward=t(s.nextLevelNodes,r+s.thickness,n+1)+1});function t(s,r,n){let l=0;for(let a of s)l=Math.max(i(a,r,n),l);return l}return t(o,0,0),e}function ve(o,e){const i={};return(...t)=>{let s=o(...t);return s in i?i[s]:i[s]=e(...t)}}function _e(o,e,i=null,t=0){let s=[];if(i)for(let r=0;r<o.length;r+=1){let n=o[r],l=i.computeDateTop(n.start,e),a=Math.max(l+(t||0),i.computeDateTop(n.end,e));s.push({start:Math.round(l),end:Math.round(a)})}return s}function Ui(o,e,i,t){let s=[],r=[];for(let c=0;c<o.length;c+=1){let d=e[c];d?s.push({index:c,thickness:1,span:d}):r.push(o[c])}let{segRects:n,hiddenGroups:l}=Ai(s,i,t),a=[];for(let c of n)a.push({seg:o[c.index],rect:c});for(let c of r)a.push({seg:c,rect:null});return{segPlacements:a,hiddenGroups:l}}const Vi=U({hour:"numeric",minute:"2-digit",meridiem:!1});class Be extends H{render(){return h(Nt,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:Vi}))}}class Gi extends H{constructor(){super(...arguments),this.sortEventSegs=D(xt)}render(){let{props:e,context:i}=this,{options:t}=i,s=t.selectMirror,r=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||s&&e.dateSelectionSegs||[],n=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},l=this.sortEventSegs(e.fgEventSegs,t.eventOrder);return h(Rt,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},a=>h("div",{className:"fc-timegrid-col-frame"},h("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),h("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(l,n,!1,!1,!1)),h("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(r,{},!!e.eventDrag,!!e.eventResize,!!s,"mirror")),h("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),Ct(t)&&h(a,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,i,t,s,r,n){let{props:l}=this;return l.forPrint?Xe(e,l):this.renderPositionedFgSegs(e,i,t,s,r,n)}renderPositionedFgSegs(e,i,t,s,r,n){let{eventMaxStack:l,eventShortHeight:a,eventOrderStrict:c,eventMinHeight:d}=this.context.options,{date:u,slatCoords:f,eventSelection:g,todayRange:m,nowDate:p}=this.props,v=t||s||r,x=_e(e,u,f,d),{segPlacements:M,hiddenGroups:T}=Ui(e,x,c,l);return h(q,null,this.renderHiddenGroups(T,e),M.map(k=>{let{seg:P,rect:R}=k,J=P.eventRange.instance.instanceId,et=v||!!(!i[J]&&R),tt=ie(R&&R.span),it=!v&&R?this.computeSegHStyle(R):{left:0,right:0},st=!!R&&R.stackForward>0,nt=!!R&&R.span.end-R.span.start<a;return h("div",{className:"fc-timegrid-event-harness"+(st?" fc-timegrid-event-harness-inset":""),key:n||J,style:Object.assign(Object.assign({visibility:et?"":"hidden"},tt),it)},h(Be,Object.assign({seg:P,isDragging:t,isResizing:s,isDateSelecting:r,isSelected:J===g,isShort:nt},ne(P,m,p))))}))}renderHiddenGroups(e,i){let{extraDateSpan:t,dateProfile:s,todayRange:r,nowDate:n,eventSelection:l,eventDrag:a,eventResize:c}=this.props;return h(q,null,e.map(d=>{let u=ie(d.span),f=Yi(d.entries,i);return h(Ni,{key:Tt(Mt(f)),hiddenSegs:f,top:u.top,bottom:u.bottom,extraDateSpan:t,dateProfile:s,todayRange:r,nowDate:n,eventSelection:l,eventDrag:a,eventResize:c})}))}renderFillSegs(e,i){let{props:t,context:s}=this,n=_e(e,t.date,t.slatCoords,s.options.eventMinHeight).map((l,a)=>{let c=e[a];return h("div",{key:It(c.eventRange),className:"fc-timegrid-bg-harness",style:ie(l)},i==="bg-event"?h(Pt,Object.assign({seg:c},ne(c,t.todayRange,t.nowDate))):kt(i))});return h(q,null,n)}renderNowIndicator(e){let{slatCoords:i,date:t}=this.props;return i?e.map((s,r)=>h(he,{key:r,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:i.computeDateTop(s.start,t)},isAxis:!1,date:t})):null}computeSegHStyle(e){let{isRtl:i,options:t}=this.context,s=t.slotEventOverlap,r=e.levelCoord,n=e.levelCoord+e.thickness,l,a;s&&(n=Math.min(1,r+(n-r)*2)),i?(l=1-n,a=r):(l=r,a=1-n);let c={zIndex:e.stackDepth+1,left:l*100+"%",right:a*100+"%"};return s&&!e.stackForward&&(c[i?"marginLeft":"marginRight"]=10*2),c}}function Xe(o,{todayRange:e,nowDate:i,eventSelection:t,eventDrag:s,eventResize:r}){let n=(s?s.affectedInstances:null)||(r?r.affectedInstances:null)||{};return h(q,null,o.map(l=>{let a=l.eventRange.instance.instanceId;return h("div",{key:a,style:{visibility:n[a]?"hidden":""}},h(Be,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===t,isShort:!1},ne(l,e,i))))}))}function ie(o){return o?{top:o.start,bottom:-o.end}:{top:"",bottom:""}}function Yi(o,e){return o.map(i=>e[i.index])}class qi extends H{constructor(){super(...arguments),this.splitFgEventSegs=D(F),this.splitBgEventSegs=D(F),this.splitBusinessHourSegs=D(F),this.splitNowIndicatorSegs=D(F),this.splitDateSelectionSegs=D(F),this.splitEventDrag=D(Pe),this.splitEventResize=D(Pe),this.rootElRef=O(),this.cellElRefs=new He}render(){let{props:e,context:i}=this,t=i.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),s=e.cells.length,r=this.splitFgEventSegs(e.fgEventSegs,s),n=this.splitBgEventSegs(e.bgEventSegs,s),l=this.splitBusinessHourSegs(e.businessHourSegs,s),a=this.splitNowIndicatorSegs(e.nowIndicatorSegs,s),c=this.splitDateSelectionSegs(e.dateSelectionSegs,s),d=this.splitEventDrag(e.eventDrag,s),u=this.splitEventResize(e.eventResize,s);return h("div",{className:"fc-timegrid-cols",ref:this.rootElRef},h("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,h("tbody",{role:"presentation"},h("tr",{role:"row"},e.axis&&h("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},h("div",{className:"fc-timegrid-col-frame"},h("div",{className:"fc-timegrid-now-indicator-container"},typeof t=="number"&&h(he,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:t},isAxis:!0,date:e.nowDate})))),e.cells.map((f,g)=>h(Gi,{key:f.key,elRef:this.cellElRefs.createRef(f.key),dateProfile:e.dateProfile,date:f.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:f.extraRenderProps,extraDataAttrs:f.extraDataAttrs,extraClassNames:f.extraClassNames,extraDateSpan:f.extraDateSpan,fgEventSegs:r[g],bgEventSegs:n[g],businessHourSegs:l[g],nowIndicatorSegs:a[g],dateSelectionSegs:c[g],eventDrag:d[g],eventResize:u[g],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new je(this.rootElRef.current,Bi(this.cellElRefs.currentMap,e.cells),!0,!1))}}function Bi(o,e){return e.map(i=>o[i.key])}class Xi extends ce{constructor(){super(...arguments),this.processSlotOptions=D($i),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:i}=this.props,{slatCoords:t}=this.state;if(i&&t){if(e.time){let s=t.computeTimeTop(e.time);s=Math.ceil(s),s&&(s+=1),i(s)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:i}=this;return h("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},h(Ii,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),h(qi,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:i.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,i){let{dateEnv:t,options:s}=this.context,{colCoords:r}=this,{dateProfile:n}=this.props,{slatCoords:l}=this.state,{snapDuration:a,snapsPerSlot:c}=this.processSlotOptions(this.props.slotDuration,s.snapDuration),d=r.leftToIndex(e),u=l.positions.topToIndex(i);if(d!=null&&u!=null){let f=this.props.cells[d],g=l.positions.tops[u],m=l.positions.getHeight(u),p=(i-g)/m,v=Math.floor(p*c),x=u*c+v,M=this.props.cells[d].date,T=se(n.slotMinTime,Dt(a,x)),k=t.add(M,T),P=t.add(k,a);return{dateProfile:n,dateSpan:Object.assign({range:{start:k,end:P},allDay:!1},f.extraDateSpan),dayEl:r.els[d],rect:{left:r.lefts[d],right:r.rights[d],top:g,bottom:g+m},layer:0}}return null}}function $i(o,e){let i=e||o,t=ge(o,i);return t===null&&(i=o,t=1),{snapDuration:i,snapsPerSlot:t}}class Ki extends bt{sliceRange(e,i){let t=[];for(let s=0;s<i.length;s+=1){let r=wt(e,i[s]);r&&t.push({start:r.start,end:r.end,isStart:r.start.valueOf()===e.start.valueOf(),isEnd:r.end.valueOf()===e.end.valueOf(),col:s})}return t}}class Zi extends ce{constructor(){super(...arguments),this.buildDayRanges=D(Qi),this.slicer=new Ki,this.timeColsRef=O()}render(){let{props:e,context:i}=this,{dateProfile:t,dayTableModel:s}=e,{nowIndicator:r,nextDayThreshold:n}=i.options,l=this.buildDayRanges(s,t,i.dateEnv);return h(Ae,{unit:r?"minute":"day"},(a,c)=>h(Xi,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,t,null,i,l),{forPrint:e.forPrint,axis:e.axis,dateProfile:t,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:s.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:a,nowIndicatorSegs:r&&this.slicer.sliceNowDate(a,t,n,i,l),todayRange:c,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function Qi(o,e,i){let t=[];for(let s of o.headerDates)t.push({start:i.add(s,e.slotMinTime),end:i.add(s,e.slotMaxTime)});return t}const Ne=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function Ji(o,e,i,t,s){let r=new Date(0),n=o,l=W(0),a=i||es(t),c=[];for(;j(n)<j(e);){let d=s.add(r,n),u=ge(l,a)!==null;c.push({date:d,time:n,key:d.toISOString(),isoTimeStr:zt(d),isLabeled:u}),n=se(n,t),l=se(l,t)}return c}function es(o){let e,i,t;for(e=Ne.length-1;e>=0;e-=1)if(i=W(Ne[e]),t=ge(i,o),t!==null&&t>1)return i;return o}class ts extends Ti{constructor(){super(...arguments),this.buildTimeColsModel=D(is),this.buildSlatMetas=D(Ji)}render(){let{options:e,dateEnv:i,dateProfileGenerator:t}=this.context,{props:s}=this,{dateProfile:r}=s,n=this.buildTimeColsModel(r,t),l=this.allDaySplitter.splitProps(s),a=this.buildSlatMetas(r.slotMinTime,r.slotMaxTime,e.slotLabelInterval,e.slotDuration,i),{dayMinWidth:c}=e,d=!c,u=c,f=e.dayHeaders&&h(ht,{dates:n.headerDates,dateProfile:r,datesRepDistinctDays:!0,renderIntro:d?this.renderHeadAxis:null}),g=e.allDaySlot!==!1&&(p=>h(gt,Object.assign({},l.allDay,{dateProfile:r,dayTableModel:n,nextDayThreshold:e.nextDayThreshold,tableMinWidth:p.tableMinWidth,colGroupNode:p.tableColGroupNode,renderRowIntro:d?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:p.clientWidth,clientHeight:p.clientHeight,forPrint:s.forPrint},this.getAllDayMaxEventProps()))),m=p=>h(Zi,Object.assign({},l.timed,{dayTableModel:n,dateProfile:r,axis:d,slotDuration:e.slotDuration,slatMetas:a,forPrint:s.forPrint,tableColGroupNode:p.tableColGroupNode,tableMinWidth:p.tableMinWidth,clientWidth:p.clientWidth,clientHeight:p.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:p.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return u?this.renderHScrollLayout(f,g,m,n.colCnt,c,a,this.state.slatCoords):this.renderSimpleLayout(f,g,m)}}function is(o,e){let i=new jt(o.renderRange,e);return new Ot(i,!1)}var ss='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';Wt(ss);const ns={allDaySlot:Boolean};var rs=We({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:ns,views:{timeGrid:{component:ts,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});me.touchMouseIgnoreWait=500;let oe=0,$=0,ae=!1;class $e{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=i=>{if(!this.shouldIgnoreMouse()&&ls(i)&&this.tryStart(i)){let t=this.createEventFromMouse(i,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=i=>{let t=this.createEventFromMouse(i);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleMouseUp=i=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(i)),this.cleanup()},this.handleTouchStart=i=>{if(this.tryStart(i)){this.isTouchDragging=!0;let t=this.createEventFromTouch(i,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t);let s=i.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=i=>{let t=this.createEventFromTouch(i);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleTouchEnd=i=>{if(this.isDragging){let t=i.target;t.removeEventListener("touchmove",this.handleTouchMove),t.removeEventListener("touchend",this.handleTouchEnd),t.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(i)),this.cleanup(),this.isTouchDragging=!1,os()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=i=>{if(!this.shouldIgnoreMove){let t=window.scrollX-this.prevScrollX+this.prevPageX,s=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:i,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:t,pageY:s,deltaX:t-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=e,this.emitter=new Ve,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),as()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),cs()}tryStart(e){let i=this.querySubjectEl(e),t=e.target;return i&&(!this.handleSelector||A(t,this.handleSelector))?(this.subjectEl=i,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){ae=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?A(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return oe||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(ae=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,i){let t=0,s=0;return i?(this.origPageX=e.pageX,this.origPageY=e.pageY):(t=e.pageX-this.origPageX,s=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:t,deltaY:s}}createEventFromTouch(e,i){let t=e.touches,s,r,n=0,l=0;return t&&t.length?(s=t[0].pageX,r=t[0].pageY):(s=e.pageX,r=e.pageY),i?(this.origPageX=s,this.origPageY=r):(n=s-this.origPageX,l=r-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:r,deltaX:n,deltaY:l}}}function ls(o){return o.button===0&&!o.ctrlKey}function os(){oe+=1,setTimeout(()=>{oe-=1},me.touchMouseIgnoreWait)}function as(){$+=1,$===1&&window.addEventListener("touchmove",Ke,{passive:!1})}function cs(){$-=1,$||window.removeEventListener("touchmove",Ke,{passive:!1})}function Ke(o){ae&&o.preventDefault()}class ds{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,i,t){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=i-window.scrollX,this.origScreenY=t-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,i){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=i-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,i){let t=()=>{this.cleanup(),i()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(t,this.revertDuration):setTimeout(t,0)}doRevertAnimation(e,i){let t=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();t.style.transition="top "+i+"ms,left "+i+"ms",ee(t,{left:s.left,top:s.top}),Qt(t,()=>{t.style.transition="",e()})}cleanup(){this.mirrorEl&&(Jt(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&ee(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,i=this.mirrorEl;return i||(i=this.mirrorEl=this.sourceEl.cloneNode(!0),i.style.userSelect="none",i.style.webkitUserSelect="none",i.style.pointerEvents="none",i.classList.add("fc-event-dragging"),ee(i,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(i)),i}}class Ze extends di{constructor(e,i){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=i,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class Qe extends Ze{constructor(e,i){super(new ai(e),i)}getEventTarget(){return this.scrollController.el}computeClientRect(){return ci(this.scrollController.el)}}class hs extends Ze{constructor(e){super(new oi,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Le=typeof performance=="function"?performance.now:Date.now;class gs{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let i=Le();this.handleSide(e,(i-this.msSinceRequest)/1e3),this.requestAnimation(i)}else this.isAnimating=!1}}}start(e,i,t){this.isEnabled&&(this.scrollCaches=this.buildCaches(t),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,i))}handleMove(e,i){if(this.isEnabled){let t=e-window.scrollX,s=i-window.scrollY,r=this.pointerScreenY===null?0:s-this.pointerScreenY,n=this.pointerScreenX===null?0:t-this.pointerScreenX;r<0?this.everMovedUp=!0:r>0&&(this.everMovedDown=!0),n<0?this.everMovedLeft=!0:n>0&&(this.everMovedRight=!0),this.pointerScreenX=t,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Le()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,i){let{scrollCache:t}=e,{edgeThreshold:s}=this,r=s-e.distance,n=r*r/(s*s)*this.maxVelocity*i,l=1;switch(e.name){case"left":l=-1;case"right":t.setScrollLeft(t.getScrollLeft()+n*l);break;case"top":l=-1;case"bottom":t.setScrollTop(t.getScrollTop()+n*l);break}}computeBestEdge(e,i){let{edgeThreshold:t}=this,s=null,r=this.scrollCaches||[];for(let n of r){let l=n.clientRect,a=e-l.left,c=l.right-e,d=i-l.top,u=l.bottom-i;a>=0&&c>=0&&d>=0&&u>=0&&(d<=t&&this.everMovedUp&&n.canScrollUp()&&(!s||s.distance>d)&&(s={scrollCache:n,name:"top",distance:d}),u<=t&&this.everMovedDown&&n.canScrollDown()&&(!s||s.distance>u)&&(s={scrollCache:n,name:"bottom",distance:u}),a<=t&&this.everMovedLeft&&n.canScrollLeft()&&(!s||s.distance>a)&&(s={scrollCache:n,name:"left",distance:a}),c<=t&&this.everMovedRight&&n.canScrollRight()&&(!s||s.distance>c)&&(s={scrollCache:n,name:"right",distance:c}))}return s}buildCaches(e){return this.queryScrollEls(e).map(i=>i===window?new hs(!1):new Qe(i,!1))}queryScrollEls(e){let i=[];for(let t of this.scrollQuery)typeof t=="object"?i.push(t):i.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(t)));return i}}class V extends Vt{constructor(e,i){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,Gt(document.body),Yt(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let r=this.minDistance,n,{deltaX:l,deltaY:a}=s;n=l*l+a*a,n>=r*r&&this.handleDistanceSurpassed(s)}this.isDragging&&(s.origEvent.type!=="scroll"&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,qt(document.body),Bt(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let t=this.pointer=new $e(e);t.emitter.on("pointerdown",this.onPointerDown),t.emitter.on("pointermove",this.onPointerMove),t.emitter.on("pointerup",this.onPointerUp),i&&(t.selector=i),this.mirror=new ds,this.autoScroller=new gs}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class us{constructor(e){this.el=e,this.origRect=Ge(e),this.scrollCaches=gi(e).map(i=>new Qe(i,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let i of this.scrollCaches)e+=i.origScrollLeft-i.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let i of this.scrollCaches)e+=i.origScrollTop-i.getScrollTop();return e}isWithinClipping(e,i){let t={left:e,top:i};for(let s of this.scrollCaches)if(!fs(s.getEventTarget())&&!ui(t,s.clientRect))return!1;return!0}}function fs(o){let e=o.tagName;return e==="HTML"||e==="BODY"}class Z{constructor(e,i){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=t=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(t),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",t)):s.setIgnoreMove(!0)},this.handleDragStart=t=>{this.emitter.trigger("dragstart",t),this.handleMove(t,!0)},this.handleDragMove=t=>{this.emitter.trigger("dragmove",t),this.handleMove(t)},this.handlePointerUp=t=>{this.releaseHits(),this.emitter.trigger("pointerup",t)},this.handleDragEnd=t=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,t),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",t)},this.droppableStore=i,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Ve}processFirstCoord(e){let i={left:e.pageX,top:e.pageY},t=i,s=e.subjectEl,r;s instanceof HTMLElement&&(r=Ge(s),t=ti(t,r));let n=this.initialHit=this.queryHitForOffset(t.left,t.top);if(n){if(this.useSubjectCenter&&r){let l=ii(r,n.rect);l&&(t=si(l))}this.coordAdjust=ni(t,i)}else this.coordAdjust={left:0,top:0}}handleMove(e,i){let t=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(i||!Q(this.movingHit,t))&&(this.movingHit=t,this.emitter.trigger("hitupdate",t,!1,e))}prepareHits(){this.offsetTrackers=ri(this.droppableStore,e=>(e.component.prepareHits(),new us(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let i in e)e[i].destroy();this.offsetTrackers={}}queryHitForOffset(e,i){let{droppableStore:t,offsetTrackers:s}=this,r=null;for(let n in t){let l=t[n].component,a=s[n];if(a&&a.isWithinClipping(e,i)){let c=a.computeLeft(),d=a.computeTop(),u=e-c,f=i-d,{origRect:g}=a,m=g.right-g.left,p=g.bottom-g.top;if(u>=0&&u<m&&f>=0&&f<p){let v=l.queryHit(u,f,m,p);v&&li(v.dateProfile.activeRange,v.dateSpan.range)&&(this.disablePointCheck||a.el.contains(a.el.getRootNode().elementFromPoint(u+c-window.scrollX,f+d-window.scrollY)))&&(!r||v.layer>r.layer)&&(v.componentId=n,v.context=l.context,v.rect.left+=c,v.rect.right+=c,v.rect.top+=d,v.rect.bottom+=d,r=v)}}}return r}}function Q(o,e){return!o&&!e?!0:!!o!=!!e?!1:ei(o.dateSpan,e.dateSpan)}function Je(o,e){let i={};for(let t of e.pluginHooks.datePointTransforms)Object.assign(i,t(o,e));return Object.assign(i,ps(o,e.dateEnv)),i}function ps(o,e){return{date:e.toDate(o.range.start),dateStr:e.formatIso(o.range.start,{omitTime:o.allDay}),allDay:o.allDay}}class ms extends K{constructor(e){super(e),this.handlePointerDown=t=>{let{dragging:s}=this,r=t.origEvent.target;s.setIgnoreMove(!this.component.isValidDateDownEl(r))},this.handleDragEnd=t=>{let{component:s}=this,{pointer:r}=this.dragging;if(!r.wasTouchScroll){let{initialHit:n,finalHit:l}=this.hitDragging;if(n&&l&&Q(n,l)){let{context:a}=s,c=Object.assign(Object.assign({},Je(n.dateSpan,a)),{dayEl:n.dayEl,jsEvent:t.origEvent,view:a.viewApi||a.calendarApi.view});a.emitter.trigger("dateClick",c)}}},this.dragging=new V(e.el),this.dragging.autoScroller.isEnabled=!1;let i=this.hitDragging=new Z(this.dragging,ue(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class vs extends K{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=n=>{let{component:l,dragging:a}=this,{options:c}=l.context,d=c.selectable&&l.isValidDateDownEl(n.origEvent.target);a.setIgnoreMove(!d),a.delay=n.isTouch?Ss(l):null},this.handleDragStart=n=>{this.component.context.calendarApi.unselect(n)},this.handleHitUpdate=(n,l)=>{let{context:a}=this.component,c=null,d=!1;if(n){let u=this.hitDragging.initialHit;n.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,n)||(c=Es(u,n,a.pluginHooks.dateSelectionTransformers)),(!c||!$t(c,n.dateProfile,a))&&(d=!0,c=null)}c?a.dispatch({type:"SELECT_DATES",selection:c}):l||a.dispatch({type:"UNSELECT_DATES"}),d?pe():fe(),l||(this.dragSelection=c)},this.handlePointerUp=n=>{this.dragSelection&&(Kt(this.dragSelection,n,this.component.context),this.dragSelection=null)};let{component:i}=e,{options:t}=i.context,s=this.dragging=new V(e.el);s.touchScrollAllowed=!1,s.minDistance=t.selectMinDistance||0,s.autoScroller.isEnabled=t.dragScroll;let r=this.hitDragging=new Z(this.dragging,ue(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function Ss(o){let{options:e}=o.context,i=e.selectLongPressDelay;return i==null&&(i=e.longPressDelay),i}function Es(o,e,i){let t=o.dateSpan,s=e.dateSpan,r=[t.range.start,t.range.end,s.range.start,s.range.end];r.sort(hi);let n={};for(let l of i){let a=l(o,e);if(a===!1)return null;a&&Object.assign(n,a)}return n.range={start:r[0],end:r[3]},n.allDay=t.allDay,n}class G extends K{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=n=>{let l=n.origEvent.target,{component:a,dragging:c}=this,{mirror:d}=c,{options:u}=a.context,f=a.context;this.subjectEl=n.subjectEl;let g=this.subjectSeg=le(n.subjectEl),p=(this.eventRange=g.eventRange).instance.instanceId;this.relevantEvents=ze(f.getCurrentData().eventStore,p),c.minDistance=n.isTouch?0:u.eventDragMinDistance,c.delay=n.isTouch&&p!==a.props.eventSelection?bs(a):null,u.fixedMirrorParent?d.parentNode=u.fixedMirrorParent:d.parentNode=A(l,".fc"),d.revertDuration=u.dragRevertDuration;let v=a.isValidSegDownEl(l)&&!A(l,".fc-event-resizer");c.setIgnoreMove(!v),this.isDragging=v&&n.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=n=>{let l=this.component.context,a=this.eventRange,c=a.instance.instanceId;n.isTouch?c!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:c}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(n),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new L(l,a.def,a.instance),jsEvent:n.origEvent,view:l.viewApi}))},this.handleHitUpdate=(n,l)=>{if(!this.isDragging)return;let a=this.relevantEvents,c=this.hitDragging.initialHit,d=this.component.context,u=null,f=null,g=null,m=!1,p={affectedEvents:a,mutatedEvents:B(),isEvent:!0};if(n){u=n.context;let v=u.options;d===u||v.editable&&v.droppable?(f=ys(c,n,this.eventRange.instance.range.start,u.getCurrentData().pluginHooks.eventDragMutationMassagers),f&&(g=Fe(a,u.getCurrentData().eventUiBases,f,u),p.mutatedEvents=g,Ue(p,n.dateProfile,u)||(m=!0,f=null,g=null,p.mutatedEvents=B()))):u=null}this.displayDrag(u,p),m?pe():fe(),l||(d===u&&Q(c,n)&&(f=null),this.dragging.setMirrorNeedsRevert(!f),this.dragging.setMirrorIsVisible(!n||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=u,this.validMutation=f,this.mutatedRelevantEvents=g)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=n=>{if(this.isDragging){let l=this.component.context,a=l.viewApi,{receivingContext:c,validMutation:d}=this,u=this.eventRange.def,f=this.eventRange.instance,g=new L(l,u,f),m=this.relevantEvents,p=this.mutatedRelevantEvents,{finalHit:v}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:g,jsEvent:n.origEvent,view:a}),d){if(c===l){let x=new L(l,p.defs[u.defId],f?p.instances[f.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:p});let M={oldEvent:g,event:x,relatedEvents:X(p,l,f),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:m})}},T={};for(let k of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(T,k(d,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},M),T),{el:n.subjectEl,delta:d.datesDelta,jsEvent:n.origEvent,view:a})),l.emitter.trigger("eventChange",M)}else if(c){let x={event:g,relatedEvents:X(m,l,f),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:m})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},x),{draggedEl:n.subjectEl,view:a})),l.dispatch({type:"REMOVE_EVENTS",eventStore:m}),l.emitter.trigger("eventRemove",x);let M=p.defs[u.defId],T=p.instances[f.instanceId],k=new L(c,M,T);c.dispatch({type:"MERGE_EVENTS",eventStore:p});let P={event:k,relatedEvents:X(p,c,T),revert(){c.dispatch({type:"REMOVE_EVENTS",eventStore:p})}};c.emitter.trigger("eventAdd",P),n.isTouch&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:f.instanceId}),c.emitter.trigger("drop",Object.assign(Object.assign({},Je(v.dateSpan,c)),{draggedEl:n.subjectEl,jsEvent:n.origEvent,view:v.context.viewApi})),c.emitter.trigger("eventReceive",Object.assign(Object.assign({},P),{draggedEl:n.subjectEl,view:v.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:i}=this,{options:t}=i.context,s=this.dragging=new V(e.el);s.pointer.selector=G.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=t.dragScroll;let r=this.hitDragging=new Z(this.dragging,Zt);r.useSubjectCenter=e.useEventCenter,r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,i){let t=this.component.context,s=this.receivingContext;s&&s!==e&&(s===t?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:i.affectedEvents,mutatedEvents:B(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:i})}clearDrag(){let e=this.component.context,{receivingContext:i}=this;i&&i.dispatch({type:"UNSET_EVENT_DRAG"}),e!==i&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}G.SELECTOR=".fc-event-draggable, .fc-event-resizable";function ys(o,e,i,t){let s=o.dateSpan,r=e.dateSpan,n=s.range.start,l=r.range.start,a={};s.allDay!==r.allDay&&(a.allDay=r.allDay,a.hasEnd=e.context.options.allDayMaintainDuration,r.allDay?n=re(i):n=i);let c=Ye(n,l,o.context.dateEnv,o.componentId===e.componentId?o.largeUnit:null);c.milliseconds&&(a.allDay=!1);let d={datesDelta:c,standardProps:a};for(let u of t)u(d,o,e);return d}function bs(o){let{options:e}=o.context,i=e.eventLongPressDelay;return i==null&&(i=e.longPressDelay),i}class ws extends K{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=r=>{let{component:n}=this,l=this.querySegEl(r),a=le(l),c=this.eventRange=a.eventRange;this.dragging.minDistance=n.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(r.origEvent.target)||r.isTouch&&this.component.props.eventSelection!==c.instance.instanceId)},this.handleDragStart=r=>{let{context:n}=this.component,l=this.eventRange;this.relevantEvents=ze(n.getCurrentData().eventStore,this.eventRange.instance.instanceId);let a=this.querySegEl(r);this.draggingSegEl=a,this.draggingSeg=le(a),n.calendarApi.unselect(),n.emitter.trigger("eventResizeStart",{el:a,event:new L(n,l.def,l.instance),jsEvent:r.origEvent,view:n.viewApi})},this.handleHitUpdate=(r,n,l)=>{let{context:a}=this.component,c=this.relevantEvents,d=this.hitDragging.initialHit,u=this.eventRange.instance,f=null,g=null,m=!1,p={affectedEvents:c,mutatedEvents:B(),isEvent:!0};r&&(r.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,r)||(f=Ds(d,r,l.subjectEl.classList.contains("fc-event-resizer-start"),u.range))),f&&(g=Fe(c,a.getCurrentData().eventUiBases,f,a),p.mutatedEvents=g,Ue(p,r.dateProfile,a)||(m=!0,f=null,g=null,p.mutatedEvents=null)),g?a.dispatch({type:"SET_EVENT_RESIZE",state:p}):a.dispatch({type:"UNSET_EVENT_RESIZE"}),m?pe():fe(),n||(f&&Q(d,r)&&(f=null),this.validMutation=f,this.mutatedRelevantEvents=g)},this.handleDragEnd=r=>{let{context:n}=this.component,l=this.eventRange.def,a=this.eventRange.instance,c=new L(n,l,a),d=this.relevantEvents,u=this.mutatedRelevantEvents;if(n.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:c,jsEvent:r.origEvent,view:n.viewApi}),this.validMutation){let f=new L(n,u.defs[l.defId],a?u.instances[a.instanceId]:null);n.dispatch({type:"MERGE_EVENTS",eventStore:u});let g={oldEvent:c,event:f,relatedEvents:X(u,n,a),revert(){n.dispatch({type:"MERGE_EVENTS",eventStore:d})}};n.emitter.trigger("eventResize",Object.assign(Object.assign({},g),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||W(0),endDelta:this.validMutation.endDelta||W(0),jsEvent:r.origEvent,view:n.viewApi})),n.emitter.trigger("eventChange",g)}else n.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:i}=e,t=this.dragging=new V(e.el);t.pointer.selector=".fc-event-resizer",t.touchScrollAllowed=!1,t.autoScroller.isEnabled=i.context.options.dragScroll;let s=this.hitDragging=new Z(this.dragging,ue(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return A(e.subjectEl,".fc-event")}}function Ds(o,e,i,t){let s=o.context.dateEnv,r=o.dateSpan.range.start,n=e.dateSpan.range.start,l=Ye(r,n,s,o.largeUnit);if(i){if(s.add(t.start,l)<t.end)return{startDelta:l}}else if(s.add(t.end,l)>t.start)return{endDelta:l};return null}class xs{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=t=>{t.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=t=>{let s=this.context.options.unselectCancel,r=Xt(t.origEvent);this.matchesCancel=!!A(r,s),this.matchesEvent=!!A(r,G.SELECTOR)},this.onDocumentPointerUp=t=>{let{context:s}=this,{documentPointer:r}=this,n=s.getCurrentData();if(!r.wasTouchScroll){if(n.dateSelection&&!this.isRecentPointerDateSelect){let l=s.options.unselectAuto;l&&(!l||!this.matchesCancel)&&s.calendarApi.unselect(t)}n.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let i=this.documentPointer=new $e(document);i.shouldIgnoreMove=!0,i.shouldWatchScroll=!1,i.emitter.on("pointerdown",this.onDocumentPointerDown),i.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const Cs={fixedMirrorParent:C},Rs={dateClick:C,eventDragStart:C,eventDragStop:C,eventDrop:C,eventResizeStart:C,eventResizeStop:C,eventResize:C,drop:C,eventReceive:C,eventLeave:C};me.dataAttrPrefix="";var Ts=We({name:"@fullcalendar/interaction",componentInteractions:[ms,vs,G,ws],calendarInteractions:[xs],elementDraggingImpl:V,optionRefiners:Cs,listenerRefiners:Rs});const Ms={class:"flex justify-between items-center"},ks={class:"font-semibold text-xl leading-tight"},Ps={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8 py-8"},Is={class:"calendar-wrapper"},_s={key:0,class:"space-y-6"},Ns={class:"flex items-start gap-4"},Ls={class:"grid gap-4"},As={class:"flex items-center gap-2"},Hs={class:"rounded-lg bg-muted p-4"},js={class:"flex items-center gap-2 mb-3"},Os={class:"font-medium"},Ws={class:"space-y-2 text-sm text-muted-foreground"},zs={key:0,class:"flex items-center gap-2"},Fs=["href"],Us={key:1,class:"flex items-center gap-2"},Vs=["href"],Gs={class:"mt-4 pt-4 border-t border-border"},Ys={class:"flex items-center gap-2 mb-2"},qs={class:"font-medium"},Bs={class:"space-y-2 text-sm text-muted-foreground"},Xs={key:0,class:"flex items-center gap-2"},$s=["href"],Ks={key:1,class:"flex items-center gap-2"},Zs=["href"],Qs={class:"flex items-start gap-2"},Js={class:"flex-1"},en={class:"space-y-2"},tn={class:"flex items-center justify-end gap-2"},sn={class:"space-y-6"},nn={class:"flex items-center gap-2"},rn={class:"flex justify-end gap-2"},Tn={__name:"Index",props:{reservations:{type:Array,required:!0}},setup(o){const e=o,i=Se(()=>lt().props.auth.user.current_organization),t=Y(null),s=Y(!1),r=Y(!1),n=Y({start:null,end:null}),l=g=>{const m={"bg-yellow-100":"#fef9c3","bg-green-100":"#dcfce7","bg-red-100":"#fee2e2","bg-gray-100":"#f3f4f6","bg-blue-100":"#dbeafe","text-yellow-800":"#854d0e","text-green-800":"#166534","text-red-800":"#991b1b","text-gray-800":"#1f2937","text-blue-800":"#1e3a8a"},[p,v]=g.color.split(" ");return{backgroundColor:m[p],textColor:m[v]}},a=Se(()=>e.reservations.map(g=>{const m=l(g.status);return{id:g.id,title:g.title,start:g.start,end:g.end,allDay:!0,backgroundColor:m.backgroundColor,textColor:m.textColor,borderColor:m.backgroundColor,extendedProps:g}})),c=g=>{t.value=g.event.extendedProps,s.value=!0},d=()=>{s.value=!1,t.value=null},u=g=>{n.value={start:g.startStr,end:g.endStr},r.value=!0},f=()=>{alert("Fonctionnalité non disponible pour le moment.")};return(g,m)=>(I(),ot(rt,{title:"Calendrier"},{header:b(()=>[S("div",Ms,[S("h2",ks," Calendrier des locations de "+w(i.value.name),1)])]),default:b(()=>[S("div",Ps,[S("div",Is,[y(E(fi),{options:{plugins:[E(mi),E(rs),E(Ts)],initialView:"dayGridMonth",headerToolbar:{left:"prev today",center:"title",right:"next"},events:a.value,eventClick:c,locale:E(pi),height:"auto",editable:!1,selectable:!0,select:u,selectMirror:!0,nowIndicator:!0,displayEventTime:!1,dayMaxEvents:!0,views:{dayGrid:{dayMaxEvents:4}}}},null,8,["options"])]),y(E(we),{open:s.value,"onUpdate:open":d},{default:b(()=>[y(E(De),{class:"sm:max-w-[500px]"},{default:b(()=>[y(E(xe),null,{default:b(()=>[y(E(Ce),null,{default:b(()=>m[2]||(m[2]=[N("Détails de la location")])),_:1,__:[2]})]),_:1}),t.value?(I(),_("div",_s,[S("div",Ns,[y(E(Re),{class:at(t.value.status.color)},{default:b(()=>[N(w(t.value.status.label),1)]),_:1},8,["class"])]),S("div",Ls,[S("div",As,[y(E(ke),{class:"h-4 w-4"}),S("span",null,"Du "+w(new Date(t.value.start).toLocaleDateString())+" au "+w(new Date(t.value.end).toLocaleDateString()),1)]),S("div",Hs,[S("div",js,[y(E(Si),{class:"h-4 w-4"}),S("span",Os,w(t.value.borrower.name),1)]),S("div",Ws,[t.value.borrower.phone?(I(),_("div",zs,[y(E(Te),{class:"h-4 w-4"}),S("a",{href:"tel:"+t.value.borrower.phone,class:"hover:underline"},w(t.value.borrower.phone),9,Fs)])):z("",!0),t.value.borrower.email?(I(),_("div",Us,[y(E(Me),{class:"h-4 w-4"}),S("a",{href:"mailto:"+t.value.borrower.email,class:"hover:underline"},w(t.value.borrower.email),9,Vs)])):z("",!0)]),S("div",Gs,[S("div",Ys,[y(E(Ei),{class:"h-4 w-4"}),S("span",qs,w(t.value.borrower.contact.name),1)]),S("div",Bs,[t.value.borrower.contact.phone?(I(),_("div",Xs,[y(E(Te),{class:"h-4 w-4"}),S("a",{href:"tel:"+t.value.borrower.contact.phone,class:"hover:underline"},w(t.value.borrower.contact.phone),9,$s)])):z("",!0),t.value.borrower.contact.email?(I(),_("div",Ks,[y(E(Me),{class:"h-4 w-4"}),S("a",{href:"mailto:"+t.value.borrower.contact.email,class:"hover:underline"},w(t.value.borrower.contact.email),9,Zs)])):z("",!0)])])]),S("div",Qs,[y(E(yi),{class:"h-4 w-4 mt-1"}),S("div",Js,[m[3]||(m[3]=S("h4",{class:"font-medium mb-2"},"Équipements",-1)),S("ul",en,[(I(!0),_(ct,null,dt(t.value.items,p=>(I(),_("li",{key:p.equipment,class:"flex items-center gap-2 text-sm"},[y(E(Re),null,{default:b(()=>[N(w(p.quantity),1)]),_:2},1024),S("span",null,w(p.equipment),1)]))),128))])])]),S("div",tn,[y(E(te),{as:"a",href:g.route("app.organizations.reservations.out.edit",t.value)},{default:b(()=>m[4]||(m[4]=[N(" Gérer la réservation ")])),_:1,__:[4]},8,["href"])])])])):z("",!0)]),_:1})]),_:1},8,["open"]),y(E(we),{open:r.value,"onUpdate:open":m[1]||(m[1]=p=>r.value=!1)},{default:b(()=>[y(E(De),{class:"sm:max-w-[500px]"},{default:b(()=>[y(E(xe),null,{default:b(()=>[y(E(Ce),null,{default:b(()=>m[5]||(m[5]=[N("Nouvelle réservation")])),_:1,__:[5]})]),_:1}),S("div",sn,[S("div",nn,[y(E(ke),{class:"h-4 w-4"}),S("span",null,"Du "+w(new Date(n.value.start).toLocaleDateString())+" au "+w(new Date(n.value.end).toLocaleDateString()),1)]),S("div",rn,[y(E(te),{variant:"outline",onClick:m[0]||(m[0]=p=>r.value=!1)},{default:b(()=>m[6]||(m[6]=[N(" Annuler ")])),_:1,__:[6]}),y(E(te),{onClick:f},{default:b(()=>m[7]||(m[7]=[N(" Créer la location ")])),_:1,__:[7]})])])]),_:1})]),_:1},8,["open"])])]),_:1}))}};export{Tn as default};
