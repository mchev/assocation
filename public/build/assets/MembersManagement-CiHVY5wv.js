import{r as M,A,k as l,o,i as a,l as e,f as x,w as i,u as s,p as m,B as C,I as S,F as f,v as c,s as g,N as V,x as y,c as q,J as v}from"./app-CF2PQjK1.js";import{_ as p}from"./index-D6yHQQF8.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-DPasokJG.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-ErMF0Zzf.js";import{_ as k}from"./InputError.vue_vue_type_script_setup_true_lang-BYDpL3K1.js";import{_ as N}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-D-JjL92m.js";import{a as j,_ as D}from"./DialogContent.vue_vue_type_script_setup_true_lang-CKSrIMFM.js";import{_ as E,a as P}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BscvC9Nu.js";import{_ as U,a as F}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DL5RXrRd.js";import{_ as J}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DVi6GIOd.js";import{f as O,a as R}from"./fr-D_pP4D31.js";import"./x-BeJZ5Uwf.js";import"./createLucideIcon-dUJhoo3M.js";const G={class:"space-y-6"},L={class:"space-y-4"},T={class:"grid gap-4 py-4"},H={class:"grid gap-2"},K={class:"grid gap-2"},Q=["value"],W={class:"rounded-md border"},X={class:"border-t"},Y={role:"list",class:"divide-y divide-gray-200 dark:divide-gray-800"},Z={class:"min-w-0"},ee={class:"flex items-start gap-x-3"},te={class:"text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100"},re={class:"mt-1 flex items-center gap-x-2 text-xs leading-5 text-gray-500 dark:text-gray-400"},se={class:"whitespace-nowrap"},ae={class:"flex flex-none items-center gap-x-4"},ie={key:0,class:"rounded-md border"},ne={class:"border-t"},oe={role:"list",class:"divide-y divide-gray-200 dark:divide-gray-800"},de={class:"min-w-0"},le={class:"flex items-start gap-x-3"},me={class:"text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100"},ge={class:"mt-1 flex items-center gap-x-2 text-xs leading-5 text-gray-500 dark:text-gray-400"},ue={class:"whitespace-nowrap"},pe={class:"flex flex-none items-center gap-x-4"},Me={__name:"MembersManagement",props:{organization:{type:Object,required:!0},members:{type:Array,required:!0},pendingInvitations:{type:Array,required:!0},roles:{type:Array,required:!0}},setup(u){const _=M(!1),n=A({email:"",role:""}),w=d=>O(new Date(d),"PPP",{locale:R}),$=()=>{n.post(route("app.organizations.members.invite"),{preserveScroll:!0,onSuccess:()=>{n.reset(),_.value=!1}})},h=d=>{confirm(`Êtes-vous sûr de vouloir retirer ${d.name} de l'organisation ?`)&&v.delete(route("app.organizations.members.remove",d.id),{preserveScroll:!0})},z=d=>{confirm(`Êtes-vous sûr de vouloir annuler l'invitation de ${d.email} ?`)&&v.delete(route("app.organizations.invitations.cancel",d.id),{preserveScroll:!0})};return(d,t)=>(o(),l("section",G,[a(N,{title:"Gestion des membres",description:"Invitez et gérez les membres de votre organisation."}),e("div",L,[a(s(D),{open:_.value,"onUpdate:open":t[2]||(t[2]=r=>_.value=r)},{default:i(()=>[a(s(J),{asChild:""},{default:i(()=>[a(s(p),null,{default:i(()=>t[3]||(t[3]=[m("Inviter un membre")])),_:1,__:[3]})]),_:1}),a(s(j),null,{default:i(()=>[e("form",{onSubmit:C($,["prevent"])},[a(s(U),null,{default:i(()=>[a(s(F),null,{default:i(()=>t[4]||(t[4]=[m("Inviter un nouveau membre")])),_:1,__:[4]}),a(s(E),null,{default:i(()=>t[5]||(t[5]=[m(" Envoyez une invitation par email pour rejoindre votre organisation. ")])),_:1,__:[5]})]),_:1}),e("div",T,[e("div",H,[a(s(b),{for:"email"},{default:i(()=>t[6]||(t[6]=[m("Adresse email")])),_:1,__:[6]}),a(s(B),{id:"email",type:"email",modelValue:s(n).email,"onUpdate:modelValue":t[0]||(t[0]=r=>s(n).email=r),placeholder:"email@example.com",required:""},null,8,["modelValue"]),a(k,{message:s(n).errors.email},null,8,["message"])]),e("div",K,[a(s(b),{for:"role"},{default:i(()=>t[7]||(t[7]=[m("Rôle")])),_:1,__:[7]}),S(e("select",{id:"role","onUpdate:modelValue":t[1]||(t[1]=r=>s(n).role=r),class:"rounded-md border-0 bg-white py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-primary dark:bg-gray-950 dark:text-gray-100 dark:ring-gray-800 sm:text-sm sm:leading-6",required:""},[t[8]||(t[8]=e("option",{value:""},"Sélectionnez un rôle",-1)),(o(!0),l(f,null,c(u.roles,r=>(o(),l("option",{key:r.id,value:r.id},g(r.name),9,Q))),128))],512),[[V,s(n).role]]),a(k,{message:s(n).errors.role},null,8,["message"])])]),a(s(P),null,{default:i(()=>[a(s(p),{type:"submit",disabled:s(n).processing},{default:i(()=>t[9]||(t[9]=[m(" Envoyer l'invitation ")])),_:1,__:[9]},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),e("div",W,[t[11]||(t[11]=e("div",{class:"px-4 py-3 sm:px-6"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-100"}," Membres actifs ")],-1)),e("div",X,[e("ul",Y,[(o(!0),l(f,null,c(u.members,r=>(o(),l("li",{key:r.id,class:"flex items-center justify-between gap-x-6 px-4 py-5 sm:px-6"},[e("div",Z,[e("div",ee,[e("p",te,g(r.name),1),e("p",{class:y(["rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset",r.role==="admin"?"text-green-700 bg-green-50 ring-green-600/20 dark:bg-green-500/10 dark:text-green-400 dark:ring-green-500/20":"text-gray-600 bg-gray-50 ring-gray-500/10 dark:bg-gray-400/10 dark:text-gray-400 dark:ring-gray-400/20"])},g(r.role==="admin"?"Administrateur":"Membre"),3)]),e("div",re,[e("p",se,g(r.email),1)])]),e("div",ae,[r.id!==u.organization.owner_id?(o(),q(s(p),{key:0,variant:"ghost",onClick:I=>h(r)},{default:i(()=>t[10]||(t[10]=[m(" Retirer ")])),_:2,__:[10]},1032,["onClick"])):x("",!0)])]))),128))])])]),u.pendingInvitations.length>0?(o(),l("div",ie,[t[13]||(t[13]=e("div",{class:"px-4 py-3 sm:px-6"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-100"}," Invitations en attente ")],-1)),e("div",ne,[e("ul",oe,[(o(!0),l(f,null,c(u.pendingInvitations,r=>(o(),l("li",{key:r.id,class:"flex items-center justify-between gap-x-6 px-4 py-5 sm:px-6"},[e("div",de,[e("div",le,[e("p",me,g(r.email),1),e("p",{class:y(["rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset",r.role==="admin"?"text-green-700 bg-green-50 ring-green-600/20 dark:bg-green-500/10 dark:text-green-400 dark:ring-green-500/20":"text-gray-600 bg-gray-50 ring-gray-500/10 dark:bg-gray-400/10 dark:text-gray-400 dark:ring-gray-400/20"])},g(r.role==="admin"?"Administrateur":"Membre"),3)]),e("div",ge,[e("p",ue,"Invité le "+g(w(r.created_at)),1)])]),e("div",pe,[a(s(p),{variant:"ghost",onClick:I=>z(r)},{default:i(()=>t[12]||(t[12]=[m(" Annuler ")])),_:2,__:[12]},1032,["onClick"])])]))),128))])])])):x("",!0)])]))}};export{Me as default};
