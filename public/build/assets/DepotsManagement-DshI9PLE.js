import{r as c,A as J,e as O,k as S,o as b,i as t,l as i,w as o,u as e,p as r,B as k,F as T,v as I,c as L,s as p,C as P,J as H}from"./app-BfcCw6S1.js";import{_ as f}from"./index-BUpqKPHg.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-C03VHxLj.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-B5Spazz6.js";import{_ as U}from"./Textarea.vue_vue_type_script_setup_true_lang-B1VNxCsP.js";import{_ as D}from"./AddressInput-C9QiGKy-.js";import{a as K,b as z,c as C,d as Q,e as x,_ as W}from"./TableHeader.vue_vue_type_script_setup_true_lang-CqXINZkV.js";import{_ as m}from"./InputError.vue_vue_type_script_setup_true_lang-DGjRH3D0.js";import{_ as X}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-Cgc-T_b9.js";import{a as A,_ as w}from"./DialogContent.vue_vue_type_script_setup_true_lang-jBnNyD6F.js";import{_ as Y,a as q}from"./DialogFooter.vue_vue_type_script_setup_true_lang-WYe-espr.js";import{_ as N,a as B}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BLztrDQD.js";import{_ as F}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DjNeBfcA.js";import"./debounce-DfsW6fn1.js";import"./x-Ck3LuOsf.js";import"./createLucideIcon-DrgzgInY.js";import"./map-pin-DmeGmS4O.js";const Z={class:"space-y-6"},h={class:"space-y-4"},ee={class:"grid gap-4 py-4"},se={class:"grid gap-2"},te={class:"grid gap-2"},le={class:"grid gap-2"},oe={class:"grid grid-cols-2 gap-4"},de={class:"grid gap-2"},ae={class:"grid gap-2"},ie={class:"rounded-md border dark:border-gray-800"},re={class:"font-medium"},ne={class:"text-sm text-gray-500"},ue={class:"flex items-center gap-2"},me=["onSubmit"],_e={class:"grid gap-4 py-4"},pe={class:"grid gap-2"},fe={class:"grid gap-2"},ge={class:"grid gap-2"},Be={__name:"DepotsManagement",props:{depots:{type:Array,default:()=>[]}},setup(j){const y=c(!1),g=c(!1),V=c(!1),l=J({name:"",description:"",address:"",city:"",latitude:"",longitude:"",postal_code:"",country:"FR"}),_=c(null),$=()=>{l.reset(),l.clearErrors(),_.value=null};O(_,d=>{if(V.value)return;if(!d){l.address="",l.city="",l.postal_code="",l.latitude="",l.longitude="";return}const s=[];d.housenumber&&s.push(d.housenumber),d.street&&s.push(d.street),l.address=s.join(" "),l.city=d.city,l.postal_code=d.postcode,l.latitude=d.lat,l.longitude=d.lng});const M=()=>{l.post(route("app.organizations.depots.store"),{preserveScroll:!0,onSuccess:()=>{$(),y.value=!1}})},E=d=>{V.value=!0,l.name=d.name,l.description=d.description,l.address=d.address,l.city=d.city,l.latitude=d.latitude,l.longitude=d.longitude,l.postal_code=d.postal_code,l.country=d.country,P(()=>{_.value={name:d.address,street:d.address,city:d.city,postcode:d.postal_code,lat:d.latitude,lng:d.longitude},V.value=!1})},R=d=>{l.put(route("app.organizations.depots.update",d.id),{preserveScroll:!0,onSuccess:()=>{$(),g.value=!1}})},G=d=>{confirm("Êtes-vous sûr de vouloir supprimer ce dépôt ?")&&H.delete(route("app.organizations.depots.destroy",d.id),{preserveScroll:!0})};return(d,s)=>(b(),S("section",Z,[t(X,{title:"Gestion des dépôts",description:"Gérez les lieux de stockage de votre organisation."}),i("div",h,[t(e(w),{open:y.value,"onUpdate:open":s[5]||(s[5]=a=>y.value=a)},{default:o(()=>[t(e(F),{asChild:""},{default:o(()=>[t(e(f),{onClick:$},{default:o(()=>s[10]||(s[10]=[r("Ajouter un dépôt")])),_:1,__:[10]})]),_:1}),t(e(A),null,{default:o(()=>[i("form",{onSubmit:k(M,["prevent"])},[t(e(N),null,{default:o(()=>[t(e(B),null,{default:o(()=>s[11]||(s[11]=[r("Ajouter un nouveau dépôt")])),_:1,__:[11]}),t(e(Y),null,{default:o(()=>s[12]||(s[12]=[r(" Créez un nouveau lieu de stockage pour votre organisation. ")])),_:1,__:[12]})]),_:1}),i("div",ee,[i("div",se,[t(e(u),{for:"name"},{default:o(()=>s[13]||(s[13]=[r("Nom du dépôt")])),_:1,__:[13]}),t(e(v),{id:"name",modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(l).name=a),required:""},null,8,["modelValue"]),t(m,{message:e(l).errors.name},null,8,["message"])]),i("div",te,[t(e(u),{for:"description"},{default:o(()=>s[14]||(s[14]=[r("Description")])),_:1,__:[14]}),t(e(U),{id:"description",modelValue:e(l).description,"onUpdate:modelValue":s[1]||(s[1]=a=>e(l).description=a),rows:"3"},null,8,["modelValue"]),t(m,{message:e(l).errors.description},null,8,["message"])]),i("div",le,[t(e(u),{for:"address"},{default:o(()=>s[15]||(s[15]=[r("Adresse")])),_:1,__:[15]}),t(D,{id:"location",modelValue:_.value,"onUpdate:modelValue":s[2]||(s[2]=a=>_.value=a),placeholder:"Rechercher une adresse",required:""},null,8,["modelValue"]),t(m,{message:e(l).errors.address},null,8,["message"])]),i("div",oe,[i("div",de,[t(e(u),{for:"city"},{default:o(()=>s[16]||(s[16]=[r("Ville")])),_:1,__:[16]}),t(e(v),{id:"city",modelValue:e(l).city,"onUpdate:modelValue":s[3]||(s[3]=a=>e(l).city=a),required:""},null,8,["modelValue"]),t(m,{message:e(l).errors.city},null,8,["message"])]),i("div",ae,[t(e(u),{for:"postal_code"},{default:o(()=>s[17]||(s[17]=[r("Code postal")])),_:1,__:[17]}),t(e(v),{id:"postal_code",modelValue:e(l).postal_code,"onUpdate:modelValue":s[4]||(s[4]=a=>e(l).postal_code=a),required:""},null,8,["modelValue"]),t(m,{message:e(l).errors.postal_code},null,8,["message"])])])]),t(e(q),null,{default:o(()=>[t(e(f),{type:"submit",disabled:e(l).processing},{default:o(()=>s[18]||(s[18]=[r(" Créer le dépôt ")])),_:1,__:[18]},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),i("div",ie,[t(e(W),null,{default:o(()=>[t(e(K),null,{default:o(()=>[t(e(z),null,{default:o(()=>[t(e(C),null,{default:o(()=>s[19]||(s[19]=[r("Nom")])),_:1,__:[19]}),t(e(C),null,{default:o(()=>s[20]||(s[20]=[r("Adresse")])),_:1,__:[20]}),t(e(C),{class:"w-[100px]"},{default:o(()=>s[21]||(s[21]=[r("Actions")])),_:1,__:[21]})]),_:1})]),_:1}),t(e(Q),null,{default:o(()=>[(b(!0),S(T,null,I(j.depots,a=>(b(),L(e(z),{key:a.id},{default:o(()=>[t(e(x),null,{default:o(()=>[i("div",re,p(a.name),1),i("div",ne,p(a.description),1)]),_:2},1024),t(e(x),null,{default:o(()=>[i("div",null,p(a.address),1),i("div",null,p(a.postal_code)+" "+p(a.city),1)]),_:2},1024),t(e(x),null,{default:o(()=>[i("div",ue,[t(e(w),{open:g.value,"onUpdate:open":s[9]||(s[9]=n=>g.value=n)},{default:o(()=>[t(e(F),{asChild:""},{default:o(()=>[t(e(f),{variant:"outline",size:"sm",onClick:k(()=>{g.value=!0,E(a)},["stop"])},{default:o(()=>s[22]||(s[22]=[r(" Modifier ")])),_:2,__:[22]},1032,["onClick"])]),_:2},1024),t(e(A),null,{default:o(()=>[i("form",{onSubmit:k(n=>R(a),["prevent"])},[t(e(N),null,{default:o(()=>[t(e(B),null,{default:o(()=>s[23]||(s[23]=[r("Modifier le dépôt")])),_:1,__:[23]})]),_:1}),i("div",_e,[i("div",pe,[t(e(u),{for:"edit-name"},{default:o(()=>s[24]||(s[24]=[r("Nom du dépôt")])),_:1,__:[24]}),t(e(v),{id:"edit-name",modelValue:e(l).name,"onUpdate:modelValue":s[6]||(s[6]=n=>e(l).name=n),required:""},null,8,["modelValue"]),t(m,{message:e(l).errors.name},null,8,["message"])]),i("div",fe,[t(e(u),{for:"edit-description"},{default:o(()=>s[25]||(s[25]=[r("Description")])),_:1,__:[25]}),t(e(U),{id:"edit-description",modelValue:e(l).description,"onUpdate:modelValue":s[7]||(s[7]=n=>e(l).description=n),rows:"3"},null,8,["modelValue"]),t(m,{message:e(l).errors.description},null,8,["message"])]),i("div",ge,[t(e(u),{for:"edit-address"},{default:o(()=>s[26]||(s[26]=[r("Adresse")])),_:1,__:[26]}),t(D,{id:"edit-location",modelValue:_.value,"onUpdate:modelValue":s[8]||(s[8]=n=>_.value=n),placeholder:"Rechercher une adresse",required:""},null,8,["modelValue"]),t(m,{message:e(l).errors.address},null,8,["message"])])]),t(e(q),null,{default:o(()=>[t(e(f),{type:"submit",disabled:e(l).processing},{default:o(()=>s[27]||(s[27]=[r(" Sauvegarder ")])),_:1,__:[27]},8,["disabled"])]),_:1})],40,me)]),_:2},1024)]),_:2},1032,["open"]),t(e(f),{variant:"destructive",size:"sm",onClick:n=>G(a)},{default:o(()=>s[28]||(s[28]=[r(" Supprimer ")])),_:2,__:[28]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]))}};export{Be as default};
