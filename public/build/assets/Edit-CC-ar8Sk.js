import{A as j,c as v,o as r,w as o,l as s,i as l,u as e,B as L,p as n,k as m,f as p,s as u,F as M,v as N,S as A,x as E}from"./app-C--Zj7h2.js";import{_ as F}from"./AppLayout-Dia2O8zN.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-DKdDTl7D.js";import{_ as O}from"./Textarea.vue_vue_type_script_setup_true_lang-DqBklwpQ.js";import{_ as $,a as w,b as S,c as U,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-CPAFimlw.js";import{C as T,_ as z,S as R}from"./spinner-By4CwAOI.js";import{_ as X}from"./index-BtJXUQxW.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-DEAynY49.js";import{_ as G,a as H}from"./CardContent.vue_vue_type_script_setup_true_lang-COoUNKAF.js";import{_ as y}from"./CardDescription.vue_vue_type_script_setup_true_lang-B1TJ6XQb.js";import{_ as V,a as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-C9zxrVNS.js";import{S as J}from"./sparkles-Dw3aUqCm.js";import{C as K,b as Q}from"./FlashMessage-Cmei7Lpr.js";import{A as W}from"./arrow-left-EjKglc_m.js";import"./x-aGZ-pY6V.js";import"./createLucideIcon-O6XXDYIF.js";import"./chevron-down-HQfZhsyQ.js";import"./clamp-CrWB99jp.js";import"./check-34FhGm_C.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./VisuallyHidden-0R9yq6-v.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHiddenInput-BCf-MV-8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"flex justify-between items-center"},Z={class:"font-semibold text-xl text-gray-800 leading-tight"},h={class:"py-12"},ee={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},te={class:"space-y-6"},se={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},le={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},ie={class:"space-y-2"},oe={key:0,class:"text-sm text-destructive"},ne={class:"sm:col-span-2 space-y-2"},re={key:0,class:"text-sm text-destructive"},de={class:"space-y-6 mt-8"},ue={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},me={class:"space-y-2"},pe={class:"flex items-center"},_e={class:"flex items-center"},ce={class:"flex items-center"},fe={class:"flex items-center"},xe={key:0,class:"text-sm text-destructive"},ge={class:"space-y-2"},ve={key:0,class:"text-sm text-destructive"},ye={class:"space-y-6 mt-8"},Ve={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},be={class:"space-y-2"},qe={class:"relative"},ke={key:0,class:"text-sm text-destructive"},$e={class:"space-y-2"},we={class:"relative"},Se={key:0,class:"text-sm text-destructive"},Ue={class:"space-y-2"},ze={class:"relative"},Ce={key:0,class:"text-sm text-destructive"},Be={class:"space-y-4 mt-4"},De={class:"flex items-center space-x-2"},Me={class:"flex items-center space-x-2"},Ne={class:"flex items-center space-x-2"},Ae={class:"space-y-6 mt-8"},Ie={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Pe={class:"space-y-2"},je={key:0,class:"text-sm text-destructive"},Le={class:"space-y-2"},Ee={key:0,class:"text-sm text-destructive"},Fe={class:"mt-8 flex items-center justify-end gap-x-6 border-t pt-6"},mt={__name:"Edit",props:{organization:{type:Object,required:!0},equipment:{type:Object,required:!0},categories:{type:Array,required:!0},depots:{type:Array,required:!0}},setup(c){var C,B,D;const d=c,a=j({name:d.equipment.name,description:d.equipment.description,category_id:d.equipment.category_id,depot_id:d.equipment.depot_id,condition:d.equipment.condition,purchase_price:((C=d.equipment.purchase_price)==null?void 0:C.toString().replace(".",","))||"0,00",rental_price:((B=d.equipment.rental_price)==null?void 0:B.toString().replace(".",","))||"0,00",deposit_amount:((D=d.equipment.deposit_amount)==null?void 0:D.toString().replace(".",","))||"0,00",is_available:d.equipment.is_available,requires_deposit:d.equipment.requires_deposit,is_rentable:d.equipment.is_rentable,last_maintenance_date:d.equipment.last_maintenance_date,next_maintenance_date:d.equipment.next_maintenance_date}),q=(g,t)=>{let i=g.target.value;i=i.replace(",","."),i=i.replace(/[^\d.]/g,"");const k=i.split(".");k.length>2&&(i=k[0]+"."+k.slice(1).join(""));const P=i?i.replace(".",","):"0,00";a[t]=i||"0.00",g.target.value=P},I=()=>{a.put(route("app.organizations.equipments.update",[d.organization,d.equipment]))};return(g,t)=>(r(),v(F,{title:"Modifier "+c.equipment.name},{header:o(()=>[s("div",Y,[s("h2",Z," Modifier "+u(c.equipment.name),1),l(e(A),{href:g.route("app.organizations.equipments.index",c.organization),class:"inline-flex items-center px-4 py-2 bg-background hover:bg-accent hover:text-accent-foreground h-10 py-2 px-4 transition-colors"},{default:o(()=>[l(e(W),{class:"w-4 h-4 mr-2"}),t[16]||(t[16]=n(" Retour à la liste "))]),_:1,__:[16]},8,["href"])])]),default:o(()=>[s("div",h,[s("div",ee,[l(e(G),null,{default:o(()=>[l(e(H),{class:"p-8"},{default:o(()=>[s("form",{onSubmit:L(I,["prevent"])},[s("div",te,[l(e(V),{class:"px-0 pt-0"},{default:o(()=>[l(e(b),null,{default:o(()=>t[17]||(t[17]=[n("Informations générales")])),_:1,__:[17]}),l(e(y),null,{default:o(()=>t[18]||(t[18]=[n("Informations de base du matériel")])),_:1,__:[18]})]),_:1}),s("div",se,[s("div",le,[l(e(_),{required:""},{default:o(()=>t[19]||(t[19]=[n(" Nom "),s("span",{class:"text-destructive"},"*",-1)])),_:1,__:[19]}),l(e(f),{modelValue:e(a).name,"onUpdate:modelValue":t[0]||(t[0]=i=>e(a).name=i),type:"text",required:"",autofocus:"",placeholder:"Ex: Perceuse Bosch Professional"},null,8,["modelValue"]),t[20]||(t[20]=s("p",{class:"text-xs text-muted-foreground"},"Nom complet du matériel avec sa marque si possible",-1)),e(a).errors.name?(r(),m("p",ae,u(e(a).errors.name),1)):p("",!0)]),s("div",ie,[l(e(_),null,{default:o(()=>t[21]||(t[21]=[n(" Catégorie "),s("span",{class:"text-destructive"},"*",-1)])),_:1,__:[21]}),l(e($),{modelValue:e(a).category_id,"onUpdate:modelValue":t[1]||(t[1]=i=>e(a).category_id=i),required:""},{default:o(()=>[l(e(w),null,{default:o(()=>[l(e(S),{placeholder:"Sélectionnez une catégorie"})]),_:1}),l(e(U),null,{default:o(()=>[(r(!0),m(M,null,N(c.categories,i=>(r(),v(e(x),{key:i.id,value:i.id},{default:o(()=>[n(u(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(a).errors.category_id?(r(),m("p",oe,u(e(a).errors.category_id),1)):p("",!0)]),s("div",ne,[l(e(_),null,{default:o(()=>t[22]||(t[22]=[n(" Description ")])),_:1,__:[22]}),l(e(O),{modelValue:e(a).description,"onUpdate:modelValue":t[2]||(t[2]=i=>e(a).description=i),rows:"3",placeholder:"Décrivez les caractéristiques principales du matériel..."},null,8,["modelValue"]),t[23]||(t[23]=s("p",{class:"text-xs text-muted-foreground"},"Une description détaillée aidera les utilisateurs à mieux comprendre le matériel",-1)),e(a).errors.description?(r(),m("p",re,u(e(a).errors.description),1)):p("",!0)])])]),s("div",de,[l(e(V),{class:"px-0"},{default:o(()=>[l(e(b),null,{default:o(()=>t[24]||(t[24]=[n("État et stockage")])),_:1,__:[24]}),l(e(y),null,{default:o(()=>t[25]||(t[25]=[n("Informations sur l'état et le lieu de stockage")])),_:1,__:[25]})]),_:1}),s("div",ue,[s("div",me,[l(e(_),null,{default:o(()=>t[26]||(t[26]=[n(" État "),s("span",{class:"text-destructive"},"*",-1)])),_:1,__:[26]}),l(e($),{modelValue:e(a).condition,"onUpdate:modelValue":t[3]||(t[3]=i=>e(a).condition=i)},{default:o(()=>[l(e(w),null,{default:o(()=>[l(e(S),{placeholder:"Sélectionnez l'état"})]),_:1}),l(e(U),null,{default:o(()=>[l(e(x),{value:"new"},{default:o(()=>[s("div",pe,[l(e(J),{class:"w-4 h-4 mr-2 text-green-500"}),t[27]||(t[27]=s("span",null,"Neuf",-1))])]),_:1}),l(e(x),{value:"good"},{default:o(()=>[s("div",_e,[l(e(K),{class:"w-4 h-4 mr-2 text-blue-500"}),t[28]||(t[28]=s("span",null,"Bon",-1))])]),_:1}),l(e(x),{value:"fair"},{default:o(()=>[s("div",ce,[l(e(T),{class:"w-4 h-4 mr-2 text-yellow-500"}),t[29]||(t[29]=s("span",null,"Moyen",-1))])]),_:1}),l(e(x),{value:"poor"},{default:o(()=>[s("div",fe,[l(e(Q),{class:"w-4 h-4 mr-2 text-red-500"}),t[30]||(t[30]=s("span",null,"Mauvais",-1))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(a).errors.condition?(r(),m("p",xe,u(e(a).errors.condition),1)):p("",!0)]),s("div",ge,[l(e(_),null,{default:o(()=>t[31]||(t[31]=[n(" Lieu de stockage "),s("span",{class:"text-destructive"},"*",-1)])),_:1,__:[31]}),l(e($),{modelValue:e(a).depot_id,"onUpdate:modelValue":t[4]||(t[4]=i=>e(a).depot_id=i),required:""},{default:o(()=>[l(e(w),null,{default:o(()=>[l(e(S),{placeholder:"Sélectionnez un lieu de stockage"})]),_:1}),l(e(U),null,{default:o(()=>[(r(!0),m(M,null,N(c.depots,i=>(r(),v(e(x),{key:i.id,value:i.id},{default:o(()=>[n(u(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(a).errors.depot_id?(r(),m("p",ve,u(e(a).errors.depot_id),1)):p("",!0)])])]),s("div",ye,[l(e(V),{class:"px-0"},{default:o(()=>[l(e(b),null,{default:o(()=>t[32]||(t[32]=[n("Tarification")])),_:1,__:[32]}),l(e(y),null,{default:o(()=>t[33]||(t[33]=[n("Définissez les prix et conditions de location")])),_:1,__:[33]})]),_:1}),s("div",Ve,[s("div",be,[l(e(_),null,{default:o(()=>t[34]||(t[34]=[n(" Prix d'achat ")])),_:1,__:[34]}),s("div",qe,[l(e(f),{modelValue:e(a).purchase_price,"onUpdate:modelValue":t[5]||(t[5]=i=>e(a).purchase_price=i),type:"text",inputmode:"decimal",class:"pl-7",onInput:t[6]||(t[6]=i=>q(i,"purchase_price"))},null,8,["modelValue"]),t[35]||(t[35]=s("span",{class:"absolute left-2 top-1/2 -translate-y-1/2 text-muted-foreground"},"€",-1))]),e(a).errors.purchase_price?(r(),m("p",ke,u(e(a).errors.purchase_price),1)):p("",!0)]),s("div",$e,[l(e(_),null,{default:o(()=>t[36]||(t[36]=[n(" Prix de location ")])),_:1,__:[36]}),s("div",we,[l(e(f),{modelValue:e(a).rental_price,"onUpdate:modelValue":t[7]||(t[7]=i=>e(a).rental_price=i),type:"text",inputmode:"decimal",class:"pl-7",onInput:t[8]||(t[8]=i=>q(i,"rental_price"))},null,8,["modelValue"]),t[37]||(t[37]=s("span",{class:"absolute left-2 top-1/2 -translate-y-1/2 text-muted-foreground"},"€",-1))]),t[38]||(t[38]=s("p",{class:"text-xs text-muted-foreground"},"Prix par jour",-1)),e(a).errors.rental_price?(r(),m("p",Se,u(e(a).errors.rental_price),1)):p("",!0)]),s("div",Ue,[l(e(_),null,{default:o(()=>t[39]||(t[39]=[n(" Montant de la caution ")])),_:1,__:[39]}),s("div",ze,[l(e(f),{modelValue:e(a).deposit_amount,"onUpdate:modelValue":t[9]||(t[9]=i=>e(a).deposit_amount=i),type:"text",inputmode:"decimal",class:"pl-7",disabled:!e(a).requires_deposit,onInput:t[10]||(t[10]=i=>q(i,"deposit_amount"))},null,8,["modelValue","disabled"]),t[40]||(t[40]=s("span",{class:"absolute left-2 top-1/2 -translate-y-1/2 text-muted-foreground"},"€",-1))]),e(a).errors.deposit_amount?(r(),m("p",Ce,u(e(a).errors.deposit_amount),1)):p("",!0)])]),s("div",Be,[s("label",De,[l(e(z),{modelValue:e(a).is_available,"onUpdate:modelValue":t[11]||(t[11]=i=>e(a).is_available=i)},null,8,["modelValue"]),t[41]||(t[41]=s("div",null,[s("span",{class:"text-sm font-medium leading-none"},"Disponible"),s("p",{class:"text-xs text-muted-foreground"},"Le matériel peut être réservé")],-1))]),s("label",Me,[l(e(z),{modelValue:e(a).requires_deposit,"onUpdate:modelValue":t[12]||(t[12]=i=>e(a).requires_deposit=i)},null,8,["modelValue"]),t[42]||(t[42]=s("div",null,[s("span",{class:"text-sm font-medium leading-none"},"Nécessite une caution"),s("p",{class:"text-xs text-muted-foreground"},"Une caution sera demandée pour la location")],-1))]),s("label",Ne,[l(e(z),{modelValue:e(a).is_rentable,"onUpdate:modelValue":t[13]||(t[13]=i=>e(a).is_rentable=i)},null,8,["modelValue"]),t[43]||(t[43]=s("div",null,[s("span",{class:"text-sm font-medium leading-none"},"Louable"),s("p",{class:"text-xs text-muted-foreground"},"Le matériel peut être loué")],-1))])])]),s("div",Ae,[l(e(V),{class:"px-0"},{default:o(()=>[l(e(b),null,{default:o(()=>t[44]||(t[44]=[n("Maintenance")])),_:1,__:[44]}),l(e(y),null,{default:o(()=>t[45]||(t[45]=[n("Suivi des maintenances du matériel")])),_:1,__:[45]})]),_:1}),s("div",Ie,[s("div",Pe,[l(e(_),null,{default:o(()=>t[46]||(t[46]=[n(" Dernière maintenance ")])),_:1,__:[46]}),l(e(f),{modelValue:e(a).last_maintenance_date,"onUpdate:modelValue":t[14]||(t[14]=i=>e(a).last_maintenance_date=i),type:"date"},null,8,["modelValue"]),t[47]||(t[47]=s("p",{class:"text-xs text-muted-foreground"},"Date de la dernière maintenance effectuée",-1)),e(a).errors.last_maintenance_date?(r(),m("p",je,u(e(a).errors.last_maintenance_date),1)):p("",!0)]),s("div",Le,[l(e(_),null,{default:o(()=>t[48]||(t[48]=[n(" Prochaine maintenance ")])),_:1,__:[48]}),l(e(f),{modelValue:e(a).next_maintenance_date,"onUpdate:modelValue":t[15]||(t[15]=i=>e(a).next_maintenance_date=i),type:"date"},null,8,["modelValue"]),t[49]||(t[49]=s("p",{class:"text-xs text-muted-foreground"},"Date de la prochaine maintenance prévue",-1)),e(a).errors.next_maintenance_date?(r(),m("p",Ee,u(e(a).errors.next_maintenance_date),1)):p("",!0)])])]),s("div",Fe,[l(e(A),{href:g.route("app.organizations.equipments.index",c.organization),class:"text-sm font-semibold leading-6 text-gray-900 hover:text-gray-700"},{default:o(()=>t[50]||(t[50]=[n(" Annuler ")])),_:1,__:[50]},8,["href"]),l(e(X),{type:"submit",disabled:e(a).processing,class:E({"opacity-25":e(a).processing})},{default:o(()=>[e(a).processing?(r(),v(R,{key:0,class:"w-4 h-4 mr-2"})):p("",!0),n(" "+u(e(a).processing?"Modification en cours...":"Enregistrer les modifications"),1)]),_:1},8,["disabled","class"])])],32)]),_:1})]),_:1})])])]),_:1},8,["title"]))}};export{mt as default};
